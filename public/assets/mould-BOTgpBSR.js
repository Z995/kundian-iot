import{r as M,j as $,p as A,w as a,d as o,o as D,a as c,b as n,f as m,g,M as k}from"./index-BIwpTUVt.js";import{a as N,e as B}from"./kdGateway-CmVadWVC.js";const K={class:"kd-content"},G={__name:"mould",setup(O){const t=M({loading:!1,search:{name:""},info:{page:1,limit:10,count:0,list:[]},selectId:[]});$(()=>{r(1,10)});function r(d,e){t.info.page=d||t.info.page,t.info.limit=e||t.info.limit;let l={page:t.info.page,limit:t.info.limit};t.search.name&&(l.name=t.search.name),t.loading=!0,N(l).then(s=>{var p,u;t.loading=!1,s.code===200&&(t.info.list=((p=s.data)==null?void 0:p.list)||[],t.info.count=((u=s.data)==null?void 0:u.count)||0)}).catch(()=>{t.loading=!1})}function f(d){if(d){g.push({path:"/gateway/mouldAdd",query:{id:d}});return}g.push({path:"/gateway/mouldAdd"})}function y(){t.search.name="",r(1,t.info.limit)}function _(d){B({id:d}).then(e=>{if(e.code===200){k.success("删除成功"),r();return}k.error(e.msg)})}return(d,e)=>{const l=o("a-button"),s=o("a-popconfirm"),p=o("a-space"),u=o("a-input"),b=o("a-form-item"),x=o("a-form"),w=o("a-table"),v=o("kd-pager"),I=o("a-card"),C=o("kd-page-box");return D(),A(C,null,{default:a(()=>[c("div",K,[n(I,{title:"网关型号",bordered:!1},{extra:a(()=>[n(p,null,{default:a(()=>[n(l,{type:"primary",onClick:e[0]||(e[0]=i=>f(null))},{default:a(()=>e[5]||(e[5]=[c("i",{class:"ri-add-line"},null,-1),m("新增型号 ")])),_:1,__:[5]}),n(s,{content:"确认删除网关型号吗?",onOk:e[1]||(e[1]=i=>_(t.selectId))},{default:a(()=>[n(l,{disabled:!t.selectId.length},{default:a(()=>e[6]||(e[6]=[m("批量删除")])),_:1,__:[6]},8,["disabled"])]),_:1})]),_:1})]),default:a(()=>[n(x,{model:t.search,layout:"inline"},{default:a(()=>[n(b,{label:"型号名称"},{default:a(()=>[n(u,{placeholder:"请输入型号名称",modelValue:t.search.name,"onUpdate:modelValue":e[2]||(e[2]=i=>t.search.name=i),class:"w300"},null,8,["modelValue"]),n(l,{type:"primary",class:"ml10",onClick:e[3]||(e[3]=i=>r(1,t.info.limit))},{default:a(()=>e[7]||(e[7]=[m("查询")])),_:1,__:[7]}),n(l,{class:"ml10",onClick:y},{default:a(()=>e[8]||(e[8]=[m("重置")])),_:1,__:[8]})]),_:1})]),_:1},8,["model"]),n(w,{class:"mt10 kd-small-table","row-key":"id",pagination:!1,bordered:!1,data:t.info.list,loading:t.loading,columns:[{title:"ID",dataIndex:"id"},{title:"网关型号",dataIndex:"name"},{title:"更新时间",dataIndex:"update_time"},{title:"操作",slotName:"action"}],"row-selection":{type:"checkbox",showCheckedAll:!0,width:50},selectedKeys:t.selectId,"onUpdate:selectedKeys":e[4]||(e[4]=i=>t.selectId=i)},{action:a(({record:i})=>[n(l,{type:"text",size:"mini",onClick:V=>f(i.id)},{default:a(()=>e[9]||(e[9]=[m("编辑")])),_:2,__:[9]},1032,["onClick"]),n(s,{content:"确认删除网关型号吗?",onOk:V=>_(i.id)},{default:a(()=>[n(l,{type:"text",size:"mini"},{default:a(()=>e[10]||(e[10]=[m("删除")])),_:1,__:[10]})]),_:2},1032,["onOk"])]),_:1},8,["data","loading","selectedKeys"]),n(v,{"page-data":t.info,event:r},null,8,["page-data"])]),_:1})])]),_:1})}}};export{G as default};
