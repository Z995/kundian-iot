import{C as N}from"./CqkdAddGateway-BiHmsoMI.js";import{u as U}from"./TianDiMap-BTIHgNCG.js";import{_ as Y,i as X,r as M,j as R,d as Q,c as n,o as A,a as t,b as i,w as d,f as _,e as f,p as D,t as r,F as S,l as L,A as Z,B as O,u as G,M as F,m as W}from"./index-whL21Ijk.js";import{b as V}from"./kdGateway-BVLUjIOd.js";import"./CqkdSelectLabel-BZM80Ztz.js";import"./index-BYOTr1Yd.js";const j="/static/img/device/gateway-model.png",P={class:"gateway-info"},q={class:"f15 fb flex-cb"},z={class:"gi-content flex mt10"},T={class:"gi-left flex"},H={class:"gi-info"},J={class:"name mb10"},K={class:"f14 fb"},$={class:"desc mt10 f12"},tt={class:"other-li flex-c fw"},st={class:"other-li flex-c fw"},At={key:0},et={key:1},ot={key:2},at={class:"other-li flex-c fw"},it={key:0},nt={key:1},lt={key:2},dt={key:3},ct={key:4},rt={class:"other-li flex-c fw"},gt={key:0,class:"other-li flex-c fw"},Qt={class:"tag-box flex"},ft={__name:"CqkdGatewayDetail",props:{info:{type:Object,default:null}},emits:["refresh"],setup(v,{emit:m}){const{initMap:o,setMapCenter:g,addMarker:c}=U(),u=m,a=v,e=X();M({}),R(()=>{o({el:"mapBox"},()=>{let{longitude:E,latitude:s}=a.info;!E||!s?g(106.5571,29.66746):(g(E,s),c(E,s,{draggable:!1}))})});const C=()=>e.value.show(a.info.id),p=()=>u("refresh");return(E,s)=>{var k;const h=Q("a-button"),l=Q("icon-down"),B=Q("a-doption"),y=Q("a-dropdown"),x=Q("a-space"),I=Q("a-tag");return A(),n("div",P,[t("div",q,[s[5]||(s[5]=t("span",null,"网关信息",-1)),i(x,null,{default:d(()=>[i(h,{type:"primary"},{default:d(()=>s[1]||(s[1]=[_("重启网关")])),_:1,__:[1]}),i(y,null,{content:d(()=>[i(B,null,{default:d(()=>[t("span",{onClick:s[0]||(s[0]=w=>C())},"编辑网关")]),_:1}),i(B,null,{default:d(()=>s[3]||(s[3]=[_("删除网关")])),_:1,__:[3]}),i(B,null,{default:d(()=>s[4]||(s[4]=[_("在离线记录")])),_:1,__:[4]})]),default:d(()=>[i(h,{type:"primary"},{default:d(()=>[s[2]||(s[2]=_("更多")),i(l,{class:"ml5"})]),_:1,__:[2]})]),_:1})]),_:1})]),t("div",z,[t("div",T,[s[13]||(s[13]=t("div",{class:"gi-img"},[t("img",{src:j,alt:"",class:"gateway1-icon"})],-1)),t("div",H,[t("div",J,[t("div",K,[t("span",null,r(a.info.name),1),a.info.online===1?(A(),D(I,{key:0,color:"#00CC66",size:"mini",class:"ml10"},{default:d(()=>s[6]||(s[6]=[_("在线")])),_:1,__:[6]})):(A(),D(I,{key:1,color:"#999",size:"mini",class:"ml10"},{default:d(()=>s[7]||(s[7]=[_("离线")])),_:1,__:[7]}))]),t("div",$,r(a.info.mac),1)]),t("div",tt,[s[8]||(s[8]=t("div",{class:"li-title"},"网关型号：",-1)),t("span",null,r(((k=a.info.marque)==null?void 0:k.name)||"-"),1)]),t("div",st,[s[9]||(s[9]=t("div",{class:"li-title"},"协议类型：",-1)),a.info.type===0?(A(),n("span",At,"TCP协议")):f("",!0),a.info.type===1?(A(),n("span",et,"websocket")):f("",!0),a.info.type===2?(A(),n("span",ot,"MQTT")):f("",!0)]),t("div",at,[s[10]||(s[10]=t("div",{class:"li-title"},"网络类型：",-1)),a.info.network===1?(A(),n("span",it,"2g/3g/4g/5g")):f("",!0),a.info.network===2?(A(),n("span",nt,"wifi")):f("",!0),a.info.network===3?(A(),n("span",lt,"NB-loT")):f("",!0),a.info.network===4?(A(),n("span",dt,"以太网")):f("",!0),a.info.network===5?(A(),n("span",ct,"其他")):f("",!0)]),t("div",rt,[s[11]||(s[11]=t("div",{class:"li-title"},"网关地址：",-1)),t("span",null,r(a.info.address),1)]),a.info.label?(A(),n("div",gt,[s[12]||(s[12]=t("div",{class:"li-title"},"网关标签：",-1)),t("div",Qt,[(A(!0),n(S,null,L(a.info.label,(w,b)=>(A(),D(I,{color:"blue",key:b},{default:d(()=>[_(r(w.name),1)]),_:2},1024))),128))])])):f("",!0)])]),s[14]||(s[14]=t("div",{class:"gi-map"},[t("div",{class:"map-box",id:"mapBox"})],-1))]),i(N,{ref_key:"addRef",ref:e,onSuccess:p},null,512)])}}},_t=Y(ft,[["__scopeId","data-v-2ad40d3f"]]),mt={class:"access-info"},ut={class:"access-info-content mt10"},Ct={class:"aic-box flex"},pt={class:"aic-item flex-c"},Et={class:"aic-item-val"},vt={class:"copy-btn ml20 f12"},It={class:"aic-item flex-c"},Bt={class:"aic-item-val"},kt={class:"aic-box flex"},wt={class:"aic-item flex-c"},ht={class:"aic-item-val"},yt={class:"copy-btn ml20 f12"},xt={__name:"CqkdGatewayAccessInfo",props:{info:{type:Object,default:null}},emits:["refresh"],setup(v,{emit:m}){const o=v;return(g,c)=>{const u=Q("kd-copy");return A(),n("div",mt,[c[3]||(c[3]=t("div",{class:"f15 fb"},"接入信息",-1)),t("div",ut,[t("div",Ct,[t("div",pt,[c[0]||(c[0]=t("div",{class:"aic-item-label"},"接入地址：",-1)),t("div",Et,[t("span",null,r(o.info.tcp_ip),1),t("span",vt,[i(u,{value:o.info.tcp_ip},null,8,["value"])])])]),t("div",It,[c[1]||(c[1]=t("div",{class:"aic-item-label"},"端 口 号：",-1)),t("div",Bt,[t("span",null,r(o.info.tcp_PORT),1)])])]),t("div",kt,[t("div",wt,[c[2]||(c[2]=t("div",{class:"aic-item-label"},"注 册 包：",-1)),t("div",ht,[t("span",null,r(o.info.mac),1),t("span",yt,[i(u,{value:o.info.mac},null,8,["value"])])])])])])])}}},bt=Y(xt,[["__scopeId","data-v-81c0d4c4"]]),Dt="data:image/png;base64,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",St="/assets/avatar-C8zt1v5w.png",Yt={class:"debug-box"},Mt={class:"dialogue-box mt10"},Rt={class:"dialogue-content",id:"dialogBox"},Lt={key:0,class:"dialog-device"},Nt={class:"dialog-item flex"},Ut={class:"dialog-item-right"},Xt={class:"user-info flex-c"},Zt={class:"code"},Ot={class:"time"},Gt={key:0,class:"dialog-item-content"},Ft={key:1,class:"dialog-item-content"},Wt={key:2,class:"dialog-item-content"},Vt={key:1,class:"dialog-device dialog-user"},jt={class:"dialog-item flex"},Pt={class:"dialog-item-right"},qt={class:"user-info flex-c"},zt={class:"time"},Tt={class:"code"},Ht={class:"dialog-item-content"},Jt={class:"input-box mt10"},Kt={class:"input-area"},$t={class:"dialogue-footer"},ts={class:"flex mt10"},ss={__name:"CqkdNetworkDebug",props:{deviceCode:{type:[String,Number],default:""}},setup(v){const m=Z(),o=v,g=M({form:{type:"0",eol:!1,message:""}});O(()=>m.state.dialogList,()=>{c()},{deep:!0}),R(()=>{m.state.dialogList=[],m.connect(null,o.deviceCode),c()});function c(){requestAnimationFrame(()=>{dialogBox.scrollTop=dialogBox.scrollHeight})}function u(){let{type:a,eol:e,message:C}=g.form;if(!C)return F.warning("请输入发送内容"),!1;let p={to:o.code,type:a,eol:e?1:0,val:C.replace(/\s+/g,""),to:o.deviceCode};m.sendDebugMsg(p),g.form.message=""}return(a,e)=>{const C=Q("a-textarea"),p=Q("a-button"),E=Q("a-radio"),s=Q("a-radio-group"),h=Q("a-checkbox");return A(),n("div",Yt,[t("div",Mt,[t("div",Rt,[(A(!0),n(S,null,L(G(m).state.dialogList,(l,B)=>{var y,x,I,k,w,b;return A(),n(S,{key:B},[l.type==="device"?(A(),n("div",Lt,[t("div",Nt,[e[3]||(e[3]=t("img",{src:Dt,class:"avatar"},null,-1)),t("div",Ut,[t("div",Xt,[t("span",Zt,r(l.code),1),t("span",Ot,r(l.time),1)]),((y=l.message)==null?void 0:y.type)==="ModbusRTUS"?(A(),n("div",Gt,[t("span",null,r((I=(x=l.message)==null?void 0:x.data)==null?void 0:I.original_data),1)])):((k=l.message)==null?void 0:k.type)==="Customize"?(A(),n("div",Ft,[t("span",null,r((b=(w=l.message)==null?void 0:w.data)==null?void 0:b.val),1)])):(A(),n("div",Wt,r(l.message),1))])])])):f("",!0),l.type==="user"?(A(),n("div",Vt,[t("div",jt,[t("div",Pt,[t("div",qt,[t("span",zt,r(l.time),1),t("span",Tt,r(l.code),1)]),t("div",Ht,r(l.message),1)]),e[4]||(e[4]=t("img",{src:St,class:"avatar"},null,-1))])])):f("",!0)],64)}),128))])]),t("div",Jt,[t("div",Kt,[i(C,{modelValue:g.form.message,"onUpdate:modelValue":e[0]||(e[0]=l=>g.form.message=l),placeholder:"请输入",style:{height:"100px"}},null,8,["modelValue"])]),t("div",$t,[i(p,{type:"primary",class:"w100",onClick:u},{default:d(()=>e[5]||(e[5]=[_("发送")])),_:1,__:[5]})])]),t("div",ts,[i(s,{modelValue:g.form.type,"onUpdate:modelValue":e[1]||(e[1]=l=>g.form.type=l)},{default:d(()=>[i(E,{value:"0"},{default:d(()=>e[6]||(e[6]=[_("ASCII")])),_:1,__:[6]}),i(E,{value:"1"},{default:d(()=>e[7]||(e[7]=[_("HEX")])),_:1,__:[7]})]),_:1},8,["modelValue"]),i(h,{modelValue:g.form.eol,"onUpdate:modelValue":e[2]||(e[2]=l=>g.form.eol=l)},{default:d(()=>e[8]||(e[8]=[_("末尾加换行")])),_:1,__:[8]},8,["modelValue"])])])}}},As=Y(ss,[["__scopeId","data-v-a5b48254"]]),es={class:"kd-content"},os={key:0},as={key:0},gs={__name:"detail",setup(v){const m=W().query,o=M({loading:!1,active:"detail",info:null});R(()=>{g()});function g(){o.loading=!0,V({id:m.id}).then(c=>{o.loading=!1,o.info=c.data}).catch(()=>{o.loading=!1})}return(c,u)=>{const a=Q("a-tab-pane"),e=Q("a-tabs"),C=Q("kd-page-box");return A(),D(C,{loading:o.loading},{default:d(()=>[t("div",es,[i(e,{"active-key":o.active,"onUpdate:activeKey":u[0]||(u[0]=p=>o.active=p)},{default:d(()=>[i(a,{key:"detail",title:"网关详情"},{default:d(()=>[o.info?(A(),n("div",os,[i(_t,{info:o.info,onRefresh:g},null,8,["info"]),i(bt,{info:o.info},null,8,["info"])])):f("",!0)]),_:1}),i(a,{key:"net",title:"网络调试"},{default:d(()=>[o.info?(A(),n("div",as,[i(As,{deviceCode:o.info.code},null,8,["deviceCode"])])):f("",!0)]),_:1})]),_:1},8,["active-key"])])]),_:1},8,["loading"])}}};export{gs as default};
