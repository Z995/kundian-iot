import{s as w,_ as x,r as T,c as r,a as t,b as l,n as f,w as d,d as p,o as u,e as _,f as g,M as a,g as k}from"./index-3_WCOcxA.js";const V="/admin/";function b(m){return w({url:`${V}login`,method:"post",data:m})}const N={class:"kd-login"},I={class:"login-form"},S={class:"login-type flex-c"},C={key:0},O={class:"form-input"},E={class:"form-input mt20"},U={key:1},B={class:"form-input"},M={class:"code-box flex-c mt20"},$={class:"form-input",style:{flex:"1"}},J={__name:"index",setup(m){const e=T({loginType:"account",loading:!1,form:{phone:"",password:""}});async function v(){var o;let n=JSON.parse(JSON.stringify(e.form));if(!n.phone)return a.warning("请输入登录账号"),!1;if(!n.password)return a.warning("请输入登录密码"),!1;e.loading=!0;try{let s=await b(n);if(e.loading=!1,s.code===200&&((o=s.data)!=null&&o.token))return a.success("登录成功"),localStorage.setItem("_IOT_TOKEN_",s.data.token),localStorage.setItem("_IOT_USER_",n.phone),localStorage.removeItem("_IOT_MENU_KEY_"),k.push("/index"),!1;a.error(s.msg)}catch{e.loading=!1}}return(n,o)=>{const s=p("a-input"),c=p("a-button"),y=p("a-form");return u(),r("div",N,[t("div",I,[o[11]||(o[11]=t("div",{class:"lf-title f24"},"欢迎登录",-1)),t("div",S,[t("div",{class:f(["type-item",{active:e.loginType==="account"}]),onClick:o[0]||(o[0]=i=>e.loginType="account")},"账号密码登录",2),t("div",{class:f(["type-item",{active:e.loginType==="code"}]),onClick:o[1]||(o[1]=i=>e.loginType="code")},"短信登录",2)]),l(y,{model:e.form,onSubmit:v},{default:d(()=>[e.loginType==="account"?(u(),r("div",C,[t("div",O,[o[4]||(o[4]=t("i",{class:"ri-user-3-line f22"},null,-1)),l(s,{class:"input-view",modelValue:e.form.phone,"onUpdate:modelValue":o[2]||(o[2]=i=>e.form.phone=i),placeholder:"请输入登录账号"},null,8,["modelValue"])]),t("div",E,[o[5]||(o[5]=t("i",{class:"ri-lock-2-line f22"},null,-1)),l(s,{class:"input-view",modelValue:e.form.password,"onUpdate:modelValue":o[3]||(o[3]=i=>e.form.password=i),placeholder:"请输入登录密码",type:"password"},null,8,["modelValue"])])])):_("",!0),e.loginType==="code"?(u(),r("div",U,[t("div",B,[o[6]||(o[6]=t("i",{class:"ri-user-3-line f22"},null,-1)),l(s,{class:"input-view",placeholder:"请输入登录手机号"})]),t("div",M,[t("div",$,[o[7]||(o[7]=t("i",{class:"ri-lock-2-line f22"},null,-1)),l(s,{class:"input-view",placeholder:"请输入验证码"})]),l(c,{class:"code-btn"},{default:d(()=>o[8]||(o[8]=[g("获取验证码")])),_:1,__:[8]})])])):_("",!0),l(c,{type:"primary",class:"login-btn","html-type":"submit",loading:e.loading},{default:d(()=>o[9]||(o[9]=[g("立即登录")])),_:1,__:[9]},8,["loading"]),o[10]||(o[10]=t("div",{class:"forget mt10"},"忘记密码?",-1))]),_:1,__:[10]},8,["model"])])])}}},L=x(J,[["__scopeId","data-v-5e740183"]]);export{L as default};
