import{C as N}from"./CqkdAddGateway-D-jqZ9XX.js";import{u as U}from"./TianDiMap-AS2vcTZ4.js";import{_ as Y,i as X,r as M,j as L,d as r,c as i,o as e,a as t,b as a,w as l,f as m,e as f,p as D,t as Q,F as S,l as R,A as Z,B as G,u as O,M as F,m as W}from"./index-BIwpTUVt.js";import{b as V}from"./kdGateway-CmVadWVC.js";import"./CqkdSelectLabel-DJRJjxxN.js";import"./index-B-yJ7D-6.js";const j="/static/img/device/gateway-model.png",q={class:"gateway-info"},P={class:"f15 fb flex-cb"},z={class:"gi-content flex mt10"},T={class:"gi-left flex"},H={class:"gi-info"},J={class:"name mb10"},K={class:"f14 fb"},$={class:"desc mt10 f12"},tt={class:"other-li flex-c fw"},At={class:"other-li flex-c fw"},st={key:0},et={key:1},ot={key:2},at={class:"other-li flex-c fw"},it={key:0},nt={key:1},lt={key:2},dt={key:3},ct={key:4},rt={class:"other-li flex-c fw"},gt={key:0,class:"other-li flex-c fw"},Qt={class:"tag-box flex"},ft={__name:"CqkdGatewayDetail",props:{info:{type:Object,default:null}},emits:["refresh"],setup(v,{emit:_}){const{initMap:n,setMapCenter:g,addMarker:d}=U(),u=_,o=v,s=X();M({}),L(()=>{n({el:"mapBox"},()=>{let{longitude:p,latitude:A}=o.info;!p||!A?g(106.5571,29.66746):(g(p,A),d(p,A,{draggable:!1}))})});const C=()=>s.value.show(o.info.id),E=()=>u("refresh");return(p,A)=>{var k;const h=r("a-button"),c=r("icon-down"),B=r("a-doption"),y=r("a-dropdown"),x=r("a-space"),I=r("a-tag");return e(),i("div",q,[t("div",P,[A[5]||(A[5]=t("span",null,"网关信息",-1)),a(x,null,{default:l(()=>[a(h,{type:"primary"},{default:l(()=>A[1]||(A[1]=[m("重启网关")])),_:1,__:[1]}),a(y,null,{content:l(()=>[a(B,null,{default:l(()=>[t("span",{onClick:A[0]||(A[0]=w=>C())},"编辑网关")]),_:1}),a(B,null,{default:l(()=>A[3]||(A[3]=[m("删除网关")])),_:1,__:[3]}),a(B,null,{default:l(()=>A[4]||(A[4]=[m("在离线记录")])),_:1,__:[4]})]),default:l(()=>[a(h,{type:"primary"},{default:l(()=>[A[2]||(A[2]=m("更多")),a(c,{class:"ml5"})]),_:1,__:[2]})]),_:1})]),_:1})]),t("div",z,[t("div",T,[A[13]||(A[13]=t("div",{class:"gi-img"},[t("img",{src:j,alt:"",class:"gateway1-icon"})],-1)),t("div",H,[t("div",J,[t("div",K,[t("span",null,Q(o.info.name),1),o.info.online===1?(e(),D(I,{key:0,color:"#00CC66",size:"mini",class:"ml10"},{default:l(()=>A[6]||(A[6]=[m("在线")])),_:1,__:[6]})):(e(),D(I,{key:1,color:"#999",size:"mini",class:"ml10"},{default:l(()=>A[7]||(A[7]=[m("离线")])),_:1,__:[7]}))]),t("div",$,Q(o.info.mac),1)]),t("div",tt,[A[8]||(A[8]=t("div",{class:"li-title"},"网关型号：",-1)),t("span",null,Q(((k=o.info.marque)==null?void 0:k.name)||"-"),1)]),t("div",At,[A[9]||(A[9]=t("div",{class:"li-title"},"协议类型：",-1)),o.info.type===0?(e(),i("span",st,"TCP协议")):f("",!0),o.info.type===1?(e(),i("span",et,"websocket")):f("",!0),o.info.type===2?(e(),i("span",ot,"MQTT")):f("",!0)]),t("div",at,[A[10]||(A[10]=t("div",{class:"li-title"},"网络类型：",-1)),o.info.network===1?(e(),i("span",it,"2g/3g/4g/5g")):f("",!0),o.info.network===2?(e(),i("span",nt,"wifi")):f("",!0),o.info.network===3?(e(),i("span",lt,"NB-loT")):f("",!0),o.info.network===4?(e(),i("span",dt,"以太网")):f("",!0),o.info.network===5?(e(),i("span",ct,"其他")):f("",!0)]),t("div",rt,[A[11]||(A[11]=t("div",{class:"li-title"},"网关地址：",-1)),t("span",null,Q(o.info.address),1)]),o.info.label?(e(),i("div",gt,[A[12]||(A[12]=t("div",{class:"li-title"},"网关标签：",-1)),t("div",Qt,[(e(!0),i(S,null,R(o.info.label,(w,b)=>(e(),D(I,{color:"blue",key:b},{default:l(()=>[m(Q(w.name),1)]),_:2},1024))),128))])])):f("",!0)])]),A[14]||(A[14]=t("div",{class:"gi-map"},[t("div",{class:"map-box",id:"mapBox"})],-1))]),a(N,{ref_key:"addRef",ref:s,onSuccess:E},null,512)])}}},mt=Y(ft,[["__scopeId","data-v-2ad40d3f"]]),_t={class:"access-info"},ut={class:"access-info-content mt10"},Ct={class:"aic-box flex"},pt={class:"aic-item flex-c"},Et={class:"aic-item-val"},vt={class:"copy-btn ml20 f12"},It={class:"aic-box flex"},Bt={class:"aic-item flex-c"},kt={class:"aic-item-val"},wt={class:"copy-btn ml20 f12"},ht={__name:"CqkdGatewayAccessInfo",props:{info:{type:Object,default:null}},emits:["refresh"],setup(v,{emit:_}){const n=v;return(g,d)=>{const u=r("icon-copy"),o=r("kd-copy");return e(),i("div",_t,[d[5]||(d[5]=t("div",{class:"f15 fb"},"接入信息",-1)),t("div",ut,[t("div",Ct,[t("div",pt,[d[2]||(d[2]=t("div",{class:"aic-item-label"},"接入地址：",-1)),t("div",Et,[d[1]||(d[1]=t("span",null,"-",-1)),t("span",vt,[a(u),d[0]||(d[0]=m("点击复制"))])])]),d[3]||(d[3]=t("div",{class:"aic-item flex-c"},[t("div",{class:"aic-item-label"},"端 口 号："),t("div",{class:"aic-item-val"},[t("span",null,"-")])],-1))]),t("div",It,[t("div",Bt,[d[4]||(d[4]=t("div",{class:"aic-item-label"},"注 册 包：",-1)),t("div",kt,[t("span",null,Q(n.info.mac),1),t("span",wt,[a(o,{value:n.info.mac},null,8,["value"])])])])])])])}}},yt=Y(ht,[["__scopeId","data-v-49f452ba"]]),xt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAAAXNSR0IArs4c6QAADiRJREFUeF7t3U1vVdcVxvF1gBiDobyZd0wScAMphYqK0KQkaoXSKlFnmURVO+iko36BTqt8gU4zqypVyiiDVmpFSlsRFEQSSkuBAMEUggNxHV5tjAE5nOqAIlWpwdc+6zle++z/laJkcO/ae//W9sO618Yphq7fKY0HAghkKVAQAFn2nUMj8ECAAOAiIJCxAAGQcfM5OgIEAHcAgYwFCICMm8/RESAAuAMIZCxAAGTcfI6OAAHAHUAgYwECIOPmc3QECADuAAIZCxAAGTefoyNAAHAHEMhYgADIuPkcHQECgDuAQMYCBEDGzefoCBAA3AEEMhYgADJuPkdHgADgDiCQsQABkHHzOToCBAB3AIGMBQiAjJvP0REgALgDCGQsQABk3HyOjgABwB1AIGMBAiDj5nN0BAgA7gACGQsQABk3n6MjQABwBxDIWIAAyLj5HB0BAoA7gEDGAgRAxs3n6AgQANwBBDIWIAAybj5HR4AA4A4gkLEAAZBx8zk6AgQAdwCBjAUIgIybz9ERIAC4AwhkLEAAZNx8jo4AAcAdQCBjAQIg4+ZzdAQIAO4AAhkLEAAZN5+jI0AAcAcQyFiAAMi4+RwdgaQDYHTcbGTcbPxeSScRkAn0zC+sp9vsawtkS8xa4WQD4JPPzc4OlTbxxazZsXBGAnMKs6dWmfWvKaz677Y8kgyAgaHSBoba0gLOkZLA8kVm2zcWtqArpV0/eq/JBcDRf5c2PNIOfE6RpsCKxWbPbW7HGJBUAJwfNjtzmff7aX7ZtGvXW9YV9vSq9M+UTACUpdnB06Xdvps+OidIX6B6C7BnS2Hz5qZ9lmQCYPim2dHz/Omf9nVr1+639RXWtyLtMyUTAMcvlnbpWtrY7L5dAtUHgrv70/4sIIkAqL7Vt/84f/q368unHafZtbmw3sXpniWJABi8anZykABI95q1d+frlz/8tmCqjyQCoPrir0KABwLRBBZ1m724lQCQ9uXIudKujEqXoDgCMxKYO8fsBzsIgBnhdfqid0/x7b9OrXhe8wLf+0a6PxmYxFuAfcdKq34OgAcCEQWq7wRU3xFI8RE+AMbvmR34iK/+FC9XLnuuPgSsPgxM8RE+AK7dMvtggABI8XLlsuf+NQ//lmCKDwIgxa6x51ACBICwHUwAQlxKuwgQAC6MkxchAIS4lHYRIABcGAkAISOlhQIEgBCXCUCIS2kXAQLAhZEJQMhIaaEAASDEZQIQ4lLaRYAAcGFkAhAyUlooQAAIcZkAhLiUdhEgAFwYmQCEjJQWChAAQlwmACEupV0ECAAXRiYAISOlhQIEgBCXCUCIS2kXAQLAhZEJQMhIaaEAASDEZQIQ4lLaRYAAcGFkAhAyUlooQAAIcZkAhLiUdhEgAFwYmQCEjJQWChAAQlwmACEupV0ECAAXRiYAISOlhQIEgBCXCUCIS2kXAQLAhZEJQMhIaaEAASDEZQIQ4lLaRYAAcGFkAhAyUlooQAAIcZkAhLiUdhEgAFwYmQCEjJQWChAAQlwmACEupV0ECAAXRiYAISOlhQIEgBCXCUCIS2kXAQLAhZEJQMhIaaEAASDEZQIQ4lLaRYAAcGFkAhAyUlooQAAIcZkAhLiUdhEgAFwYmQCEjJQWChAAQlwmACEupV0ECAAXRiYAISOlhQIEgBCXCUCIS2kXAQLAhZEJQMhIaaEAASDEZQIQ4lLaRYAAcGFkAhAyUlooQAAIcZkAhLiUdhEgAFwYmQCEjJQWChAAQlwmACEupV0ECAAXRiYAISOlhQIEgBCXCUCIS2kXAQLAhZEJQMhIaaEAASDEZQIQ4lLaRYAAcGFkAhAyUlooQAAIcZkAhLiUdhEgAFwYmQCEjJQWChAAQlwmACEupV0ECAAXRiYAISOlhQIEgBCXCUCIS2kXAQLAhZEJQMhIaaEAASDEZQIQ4lLaRYAAcGFkAhAyUlooQAAIcZkAhLiUdhEgAFwYmQCEjJQWChAAQlwmACEupV0ECAAXRiYAISOlhQIEgBCXCUCIS2kXAQLAhZEJQMhIaaEAASDEZQIQ4lLaRYAAcGFkAhAyUlooQAAIcZkAhLiUdhEgAFwYmQCEjJQWChAAQlwmACEupV0ECAAXRiYAISOlhQIEgBCXCUCIS2kXAQLAhZEJQMhIaaEAASDEZQIQ4lLaRYAAcGFkAhAyUlooQAAIcZkAhLiUdhEgAFwYmQCEjJQWChAAQtwbY2aHz5bCFSiNQD2BZ9YWtml1vRqz9epi6Pqd0F9ddyfM/nYi9BZnq3esG0TgW08WtnZZkM1McxvhA6A6zzvHSrtPBkyztTy9KYHvfL2wZT1Nrea7ThIBcPBUaWN3fQ9ONQS8BL6/rbDuJ7yqNVsniQA4cq60K6PNwrAaAp0IzJtj9vKOopOnhnxOEgFwcrC0wash/dhU5gKLus1e3EoASK9B9cVfhQAPBKIJrF9utn0jASDty8QXZvuPEwBSZIrPSGDX5sJ6F8/opSFelMRbgErq+MXSLl0LYcYmEHggsHyR2e7+dP/0r86QTAAM3zQ7ep4pgK+9OALb+grrWxFnPzPZSTIBUJZmB0+XdptvB86kz7zGWWBBl9meLYXNm+tcuOFyyQRA5XLxitlHnzIFNHxHWG4SgeqDv+oDwNQfSQVAhT0wVNrAUOrs7D9lgdVLzHY+nfZ7/y/9kwuAauNDN8z+eYFJIOUvolT3nvq3/b7qnmQAVIeofk9ANQ1U/+aBgFpgaY/ZUysLW7NUvVKz9ZMNgC+Zxu+ZVf/weCjw28Oj9uGFep+Url86z375Sstueo0LsrDLrLurRoHAL00+AALbzsrW3vjjddt3crzW2v0rn7Df/GxlrRq8OA0BAiCNPnW8SwKgYyqemNIPAtGtzgQIgM6ceNZDASaAlt0EAqBlDRUfhwAQAzddngBoWjzt9QiAtPv3f7snAFrWUPFxCAAxcNPlCYCmxdNejwBIu39MAC3rX9PHIQCaFhevxwQgBm5ZeQKgZQ0lAFrWUPFxCAAxcNPlCYCmxdNejwBIu398BtCy/jV9HAKgaXHxekwAYuCWlScAWtZQAqBlDRUfhwAQAzddngBoWjzt9QiAtPvHZwAt61/TxyEABOLD967Z6MRtQeWpS765v7BDZ+r9vrqNvWZvvH5/6sUEz+ie02Xru1cJKlNyMgECwPFeHB8dsLf/8xfHitMvdeLITvtscMP0X/g/r1i8ZMSe33ugVo26L/5h7wv2wtIddcvw+ikECACnK/LBzRP2p8/fc6o28zJtCYBKYPeSb9qrK/fMHINXTilAAExJ1NkTfjXwZmdPFD+rTQFQUf1i4+vW28XvJ1RdGwLAQfbM2AV767N9DpXql2hbAOxd8Zy9tOzb9WGoMKkAAeBwMf569UM7eP2oQ6X6JdoWAM/0PGk/XvtKfRgqEACqO/DnK4ft0I1jqvLTqtu2ANi8cIP9dN2PpmXAkzsXYALo3OqRz4wUACf/vtMuX6z7XYCb9vzedx1k6pcgAOobPq4CAeDgGykAzvxrm108t6nWqZb1XrVdLx2qVcPrxQSAl+TkdQgAB99IAXDhbL+dPfFsrVOt6btk23fF+EyDAKjVyilfTABMSTT1EyIFwPDltXbs/V1Tb/oxz9j87BnbtPXjWjW8XkwAeEkyAcgkIwXA7bEee++dvbXOuvO771vv6uFaNbxeTAB4SRIAMslIAVAdsu6PAq/t+1RmNd3CBMB0xab3fN4CTM9r0mdHCwCHI4UpQQBoW0EAOPgSAA6IjyhBAOhsq8oEgIMvAeCASADoEB9TmQBwYCcAHBAJAB0iAaC1JQB0vrwF0NnyFsDJlgBwgpykDAGgsyUAnGwJACdIAkAH+YjKfAbgQE4AOCDyGYAOkc8AtLYEgM6XtwA6W94CONkSAE6QvAXQQfIWQGdLAOhsmQB0tkwATrYEgBMkE4AOkglAZ0sA6GyZAHS2TABOtgSAEyQTgA6SCUBnSwDobJkAdLZMAE62BIATJBOADpIJQGdLAOhsmQB0tkwATrYEgBMkE4AOkglAZ3t05JT9YTjG79HXnXJ2KvM/CNW683cBHHxvTtyyX1/4nUMlSnxV4CfrXrX+hRuBEQkQAE6wvx8+YP8YOe1UjTKVwLr5K+3nfa+BIRQgAJxw796/9+BtwMlb55wq5l1m9fwV9trqvbaqa3neEOLTEwDOwIN3huzjsU9sZGLMuXIe5RbMmW+bFm6w6v8KzEMvQADojVkBgbACBEDY1rAxBPQCBIDemBUQCCtAAIRtDRtDQC9AAOiNWQGBsAIEQNjWsDEE9AIEgN6YFRAIK0AAhG0NG0NAL0AA6I1ZAYGwAgRA2NawMQT0AgSA3pgVEAgrQACEbQ0bQ0AvQADojVkBgbACBEDY1rAxBPQCBIDemBUQCCtAAIRtDRtDQC9AAOiNWQGBsAIEQNjWsDEE9AIEgN6YFRAIK0AAhG0NG0NAL0AA6I1ZAYGwAgRA2NawMQT0AgSA3pgVEAgrQACEbQ0bQ0AvQADojVkBgbACBEDY1rAxBPQCBIDemBUQCCtAAIRtDRtDQC9AAOiNWQGBsAIEQNjWsDEE9AIEgN6YFRAIK0AAhG0NG0NAL0AA6I1ZAYGwAgRA2NawMQT0AgSA3pgVEAgrQACEbQ0bQ0AvQADojVkBgbACBEDY1rAxBPQCBIDemBUQCCtAAIRtDRtDQC9AAOiNWQGBsAIEQNjWsDEE9AIEgN6YFRAIK0AAhG0NG0NAL0AA6I1ZAYGwAgRA2NawMQT0AgSA3pgVEAgrQACEbQ0bQ0AvQADojVkBgbACBEDY1rAxBPQCBIDemBUQCCtAAIRtDRtDQC/wX/RsdWpGG2SdAAAAAElFTkSuQmCC",bt="/assets/avatar-C8zt1v5w.png",Dt={class:"debug-box"},St={class:"dialogue-box mt10"},Yt={class:"dialogue-content",id:"dialogBox"},Mt={key:0,class:"dialog-device"},Lt={class:"dialog-item flex"},Rt={class:"dialog-item-right"},Nt={class:"user-info flex-c"},Ut={class:"code"},Xt={class:"time"},Zt={key:0,class:"dialog-item-content"},Gt={key:1,class:"dialog-item-content"},Ot={key:2,class:"dialog-item-content"},Ft={key:1,class:"dialog-device dialog-user"},Wt={class:"dialog-item flex"},Vt={class:"dialog-item-right"},jt={class:"user-info flex-c"},qt={class:"time"},Pt={class:"code"},zt={class:"dialog-item-content"},Tt={class:"input-box mt10"},Ht={class:"input-area"},Jt={class:"dialogue-footer"},Kt={class:"flex mt10"},$t={__name:"CqkdNetworkDebug",props:{deviceCode:{type:[String,Number],default:""}},setup(v){const _=Z(),n=v,g=M({form:{type:"0",eol:!1,message:""}});G(()=>_.state.dialogList,()=>{d()},{deep:!0}),L(()=>{_.state.dialogList=[],_.connect(null,n.deviceCode),d()});function d(){requestAnimationFrame(()=>{dialogBox.scrollTop=dialogBox.scrollHeight})}function u(){let{type:o,eol:s,message:C}=g.form;if(!C)return F.warning("请输入发送内容"),!1;let E={to:n.code,type:o,eol:s?1:0,val:C.replace(/\s+/g,""),to:n.deviceCode};_.sendDebugMsg(E),g.form.message=""}return(o,s)=>{const C=r("a-textarea"),E=r("a-button"),p=r("a-radio"),A=r("a-radio-group"),h=r("a-checkbox");return e(),i("div",Dt,[t("div",St,[t("div",Yt,[(e(!0),i(S,null,R(O(_).state.dialogList,(c,B)=>{var y,x,I,k,w,b;return e(),i(S,{key:B},[c.type==="device"?(e(),i("div",Mt,[t("div",Lt,[s[3]||(s[3]=t("img",{src:xt,class:"avatar"},null,-1)),t("div",Rt,[t("div",Nt,[t("span",Ut,Q(c.code),1),t("span",Xt,Q(c.time),1)]),((y=c.message)==null?void 0:y.type)==="ModbusRTUS"?(e(),i("div",Zt,[t("span",null,Q((I=(x=c.message)==null?void 0:x.data)==null?void 0:I.value),1)])):((k=c.message)==null?void 0:k.type)==="Customize"?(e(),i("div",Gt,[t("span",null,Q((b=(w=c.message)==null?void 0:w.data)==null?void 0:b.val),1)])):(e(),i("div",Ot,Q(c.message),1))])])])):f("",!0),c.type==="user"?(e(),i("div",Ft,[t("div",Wt,[t("div",Vt,[t("div",jt,[t("span",qt,Q(c.time),1),t("span",Pt,Q(c.code),1)]),t("div",zt,Q(c.message),1)]),s[4]||(s[4]=t("img",{src:bt,class:"avatar"},null,-1))])])):f("",!0)],64)}),128))])]),t("div",Tt,[t("div",Ht,[a(C,{modelValue:g.form.message,"onUpdate:modelValue":s[0]||(s[0]=c=>g.form.message=c),placeholder:"请输入",style:{height:"100px"}},null,8,["modelValue"])]),t("div",Jt,[a(E,{type:"primary",class:"w100",onClick:u},{default:l(()=>s[5]||(s[5]=[m("发送")])),_:1,__:[5]})])]),t("div",Kt,[a(A,{modelValue:g.form.type,"onUpdate:modelValue":s[1]||(s[1]=c=>g.form.type=c)},{default:l(()=>[a(p,{value:"0"},{default:l(()=>s[6]||(s[6]=[m("ASCII")])),_:1,__:[6]}),a(p,{value:"1"},{default:l(()=>s[7]||(s[7]=[m("HEX")])),_:1,__:[7]}),a(p,{value:"2"},{default:l(()=>s[8]||(s[8]=[m("GB2312")])),_:1,__:[8]})]),_:1},8,["modelValue"]),a(h,{modelValue:g.form.eol,"onUpdate:modelValue":s[2]||(s[2]=c=>g.form.eol=c)},{default:l(()=>s[9]||(s[9]=[m("末尾加换行")])),_:1,__:[9]},8,["modelValue"])])])}}},tA=Y($t,[["__scopeId","data-v-8e532b82"]]),AA={class:"kd-content"},sA={key:0},eA={key:0},cA={__name:"detail",setup(v){const _=W().query,n=M({loading:!1,active:"detail",info:null});L(()=>{g()});function g(){n.loading=!0,V({id:_.id}).then(d=>{n.loading=!1,n.info=d.data}).catch(()=>{n.loading=!1})}return(d,u)=>{const o=r("a-tab-pane"),s=r("a-tabs"),C=r("kd-page-box");return e(),D(C,{loading:n.loading},{default:l(()=>[t("div",AA,[a(s,{"active-key":n.active,"onUpdate:activeKey":u[0]||(u[0]=E=>n.active=E)},{default:l(()=>[a(o,{key:"detail",title:"网关详情"},{default:l(()=>[n.info?(e(),i("div",sA,[a(mt,{info:n.info,onRefresh:g},null,8,["info"]),a(yt,{info:n.info},null,8,["info"])])):f("",!0)]),_:1}),a(o,{key:"net",title:"网络调试"},{default:l(()=>[n.info?(e(),i("div",eA,[a(tA,{deviceCode:n.info.code},null,8,["deviceCode"])])):f("",!0)]),_:1})]),_:1},8,["active-key"])])]),_:1},8,["loading"])}}};export{cA as default};
