import{r as H,d as i,c,o as f,b as l,w as o,f as u,a as s,t as b,u as M,i as j,e as I,p as w,F as U,l as E,M as L,_ as X,m as Y,j as Z,C as h,n as ee,g as te}from"./index-BIwpTUVt.js";import{c as B}from"./constantData-DLrCubd0.js";import{e as le,i as oe,j as ae,k as re}from"./kdDevice-BExDw8cT.js";import{g as G}from"./util-paQHCjrE.js";const de={class:"add-mould-box"},se={__name:"KdAddMouldData",props:{index:{type:Number,default:0},list:{type:Array,default:[]}},emits:["edit","delete","deleteBatch"],setup(J,{emit:$}){const q=$,N=J,a=H({loading:!1,selectId:[]}),r=g=>q("edit",g),R=g=>q("delete",g),O=g=>q("deleteBatch",g);return(g,v)=>{const e=i("a-button"),C=i("a-popconfirm"),d=i("a-table");return f(),c("div",de,[l(d,{class:"kd-small-table",pagination:!1,"row-key":"unique_key",bordered:!1,data:N.list,columns:[{title:"ID",dataIndex:"id"},{title:"变量名称",dataIndex:"name"},{title:"变量类型",slotName:"type"},{title:"数值类型",slotName:"data_format"},{title:"寄存器",slotName:"register"},{title:"读写",slotName:"read_write_mode"},{title:"存储方式",slotName:"storage_mode"},{title:"排序",dataIndex:"sort"},{title:"操作",slotName:"action"}],loading:a.loading,"row-selection":{type:"checkbox",showCheckedAll:!0,width:50},selectedKeys:a.selectId,"onUpdate:selectedKeys":v[0]||(v[0]=t=>a.selectId=t),onSelect:O,onSelectAll:O},{type:o(({record:t})=>[s("span",null,b(M(B).dataType[t.type]),1)]),data_format:o(({record:t})=>[s("span",null,b(M(B).dataFormat[t.data_format]),1)]),register:o(({record:t})=>[s("span",null,b(t.register_mark)+b(t.register_address),1)]),read_write_mode:o(({record:t})=>[s("span",null,b(t.read_write_mode===1?"只读":"读写"),1)]),storage_mode:o(({record:t})=>[s("span",null,b(t.storage_mode===1?"变化存储":"全部存储"),1)]),action:o(({record:t,rowIndex:_})=>[l(e,{type:"text",size:"mini",class:"ml-12",onClick:k=>r(_)},{default:o(()=>v[1]||(v[1]=[u("编辑")])),_:2,__:[1]},1032,["onClick"]),l(C,{content:"确认删除变量数据吗?",onOk:k=>R(_)},{default:o(()=>[l(e,{type:"text",size:"mini"},{default:o(()=>v[2]||(v[2]=[u("删除")])),_:1,__:[2]})]),_:2},1032,["onOk"])]),_:1},8,["data","loading","selectedKeys"])])}}},ne={key:0},ue={key:0},ie={class:"flex-c"},me={class:"ml20",style:{color:"#00CC66"}},fe={key:0},_e={key:1},pe={key:2},ce={key:3},ve={key:1},ge={class:"flex-c"},be={class:"ml20 f12",style:{color:"#00CC66"}},ke={__name:"KdDataAdd",emits:["success"],setup(J,{expose:$,emit:q}){const N=q,a=j(),r=H({show:!1,title:"新增变量",form:{id:0,name:"",unit:"",sort:99,type:1,register_mark:"0",register_address:"",data_format:1,collect_frequency:3,fraction:0,storage_mode:2,read_write_mode:1,collect_formula:"",contro_formula:""},register_value:"",register_address:"",more:!1,protocol:1});function R(v,e){r.show=!0,r.title=v?"编辑变量":"新增变量",r.protocol=e||1,v?(r.form={...v},r.register_address=v.register_address,r.form.register_address=parseInt(v.register_address)):r.form={id:0,name:"",unit:"",type:1,register_mark:"0",register_address:"",data_format:1,collect_frequency:3,fraction:0,storage_mode:2,read_write_mode:1,collect_formula:"",contro_formula:""},r.protocol===2&&(r.form.data_format=33,r.form.register_mark="do"),g()}async function O(){if(await a.value.validate())return!1;let e=JSON.parse(JSON.stringify(r.form));return e.id||delete e.id,e.register_address=r.register_address,parseInt(r.register_value)>65536?(L.warning("寄存器地址错误"),!1):(N("success",e),!0)}function g(){let{register_mark:v,register_address:e}=r.form;if(r.protocol===1){let d=4-e.length,t="";if(d>0)for(var C=0;C<d;C++)t+="0";r.register_value=r.form.register_mark+t+e,r.register_address=t+e}else r.register_value=e}return $({show:R}),(v,e)=>{const C=i("a-input-number"),d=i("a-form-item"),t=i("a-input"),_=i("a-radio"),k=i("a-radio-group"),m=i("a-option"),p=i("a-select"),z=i("a-tooltip"),A=i("icon-down"),F=i("icon-up"),T=i("icon-question-circle-fill"),K=i("a-popover"),S=i("a-form"),P=i("a-modal");return r.show?(f(),c("div",ne,[l(P,{title:r.title,visible:r.show,"onUpdate:visible":e[17]||(e[17]=n=>r.show=n),width:"700px","on-before-ok":O},{default:o(()=>[l(S,{ref_key:"formRef",ref:a,model:r.form,"label-col-props":{flex:"100px"},"wrapper-col-props":{flex:1}},{default:o(()=>[l(d,{label:"变量排序"},{default:o(()=>[l(C,{placeholder:"请输入变量排序",modelValue:r.form.sort,"onUpdate:modelValue":e[0]||(e[0]=n=>r.form.sort=n)},null,8,["modelValue"])]),_:1}),l(d,{label:"变量名称",field:"name",rules:[{required:!0,message:"变量名称必填"}]},{default:o(()=>[l(t,{placeholder:"请输入变量名称",modelValue:r.form.name,"onUpdate:modelValue":e[1]||(e[1]=n=>r.form.name=n)},null,8,["modelValue"])]),_:1}),l(d,{label:"变量单位"},{default:o(()=>[l(t,{placeholder:"请输入变量单位",modelValue:r.form.unit,"onUpdate:modelValue":e[2]||(e[2]=n=>r.form.unit=n)},null,8,["modelValue"])]),_:1}),l(d,{label:"变量类型",field:"type",rules:[{required:!0,message:"变量类型必选"}]},{default:o(()=>[l(k,{modelValue:r.form.type,"onUpdate:modelValue":e[3]||(e[3]=n=>r.form.type=n)},{default:o(()=>[(f(!0),c(U,null,E(M(B).dataType,(n,x)=>(f(),w(_,{value:parseInt(x),disabled:r.form.id},{default:o(()=>[u(b(n),1)]),_:2},1032,["value","disabled"]))),256))]),_:1},8,["modelValue"])]),_:1}),r.protocol===2?(f(),c("div",ue,[l(d,{label:"寄存器"},{default:o(()=>[s("div",null,[s("div",ie,[l(p,{placeholder:"请选择寄存器",class:"w160",modelValue:r.form.register_mark,"onUpdate:modelValue":e[4]||(e[4]=n=>r.form.register_mark=n),onChange:g},{default:o(()=>[l(m,{value:"do"},{default:o(()=>e[18]||(e[18]=[u("DO(Coils Status)")])),_:1,__:[18]}),l(m,{value:"di"},{default:o(()=>e[19]||(e[19]=[u("DI(Discrete Inputs)")])),_:1,__:[19]}),l(m,{value:"ai"},{default:o(()=>e[20]||(e[20]=[u("AI(Analog input)")])),_:1,__:[20]}),l(m,{value:"ao"},{default:o(()=>e[21]||(e[21]=[u("AO(Analog output)")])),_:1,__:[21]})]),_:1},8,["modelValue"]),s("div",null,[l(t,{placeholder:"寄存器地址",modelValue:r.form.register_address,"onUpdate:modelValue":e[5]||(e[5]=n=>r.form.register_address=n),class:"w160 ml20",onChange:g},null,8,["modelValue"]),s("span",me,[r.form.register_mark===0?(f(),c("span",fe,"DO")):I("",!0),r.form.register_mark===1?(f(),c("span",_e,"DI")):I("",!0),r.form.register_mark===3?(f(),c("span",pe,"AI")):I("",!0),r.form.register_mark===4?(f(),c("span",ce,"AO")):I("",!0),u(" 00"+b(r.register_value)+"(位) ",1)])])]),e[22]||(e[22]=s("div",{class:"tips mt5",style:{"padding-left":"180px"}}," 寄存器地址范围1-50 ",-1))])]),_:1}),l(d,{label:"数据格式",field:"data_format",rules:[{required:!0,message:"数据格式必填"}]},{default:o(()=>[l(p,{placeholder:"请选择数据格式",modelValue:r.form.data_format,"onUpdate:modelValue":e[6]||(e[6]=n=>r.form.data_format=n)},{default:o(()=>[l(m,{value:33},{default:o(()=>e[23]||(e[23]=[u("位")])),_:1,__:[23]})]),_:1},8,["modelValue"])]),_:1})])):(f(),c("div",ve,[l(d,{label:"寄存器"},{default:o(()=>[s("div",null,[s("div",ge,[l(p,{placeholder:"请选择寄存器",class:"w160",modelValue:r.form.register_mark,"onUpdate:modelValue":e[7]||(e[7]=n=>r.form.register_mark=n),onChange:g},{default:o(()=>[l(m,{value:"0"},{default:o(()=>e[24]||(e[24]=[u("0(Coils Status)")])),_:1,__:[24]}),l(m,{value:"1"},{default:o(()=>e[25]||(e[25]=[u("1(Discrete Inputs)")])),_:1,__:[25]}),l(m,{value:"3"},{default:o(()=>e[26]||(e[26]=[u("3(Input Registers)")])),_:1,__:[26]}),l(m,{value:"4"},{default:o(()=>e[27]||(e[27]=[u("4(Holding Registers)")])),_:1,__:[27]})]),_:1},8,["modelValue"]),s("div",null,[l(t,{placeholder:"寄存器地址",modelValue:r.form.register_address,"onUpdate:modelValue":e[8]||(e[8]=n=>r.form.register_address=n),class:"w160 ml20",onChange:g},null,8,["modelValue"]),s("span",be,b(r.register_value)+"("+b(M(B).dataFormat[r.form.data_format])+") ",1)])]),e[28]||(e[28]=s("div",{class:"tips mt5",style:{"padding-left":"180px"}}," 寄存器地址范围1-65536 ",-1))])]),_:1}),l(d,{label:"数据格式",field:"data_format",rules:[{required:!0,message:"数据格式必填"}]},{default:o(()=>[l(p,{placeholder:"请选择数据格式",modelValue:r.form.data_format,"onUpdate:modelValue":e[9]||(e[9]=n=>r.form.data_format=n)},{default:o(()=>[(f(!0),c(U,null,E(M(B).dataFormat,(n,x)=>(f(),w(m,{value:parseInt(x),key:x},{default:o(()=>[u(b(n),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})])),l(d,{label:"采集频率",field:"collect_frequency",rules:[{required:!0,message:"采集频率必填"}]},{default:o(()=>[l(p,{placeholder:"请选择采集频率",modelValue:r.form.collect_frequency,"onUpdate:modelValue":e[10]||(e[10]=n=>r.form.collect_frequency=n)},{default:o(()=>[(f(!0),c(U,null,E(M(B).collectFrequency,(n,x)=>(f(),w(m,{value:parseInt(x),key:x},{default:o(()=>[u(b(n),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),r.form.dataType!=="bit"?(f(),w(d,{key:2,label:"数字格式",field:"fraction",rules:[{required:!0,message:"数字格式必填"}]},{default:o(()=>[l(p,{placeholder:"请选择数字格式",modelValue:r.form.fraction,"onUpdate:modelValue":e[11]||(e[11]=n=>r.form.fraction=n)},{default:o(()=>[l(m,{value:0},{default:o(()=>e[29]||(e[29]=[u("整数")])),_:1,__:[29]}),l(m,{value:1},{default:o(()=>e[30]||(e[30]=[u("保留1位小数")])),_:1,__:[30]}),l(m,{value:2},{default:o(()=>e[31]||(e[31]=[u("保留2位小数")])),_:1,__:[31]}),l(m,{value:3},{default:o(()=>e[32]||(e[32]=[u("保留3位小数")])),_:1,__:[32]}),l(m,{value:4},{default:o(()=>e[33]||(e[33]=[u("保留4位小数")])),_:1,__:[33]})]),_:1},8,["modelValue"])]),_:1})):I("",!0),l(d,{label:"存储方式",field:"storage_mode",rules:[{required:!0,message:"存储方式必填"}]},{default:o(()=>[l(k,{modelValue:r.form.storage_mode,"onUpdate:modelValue":e[12]||(e[12]=n=>r.form.storage_mode=n)},{default:o(()=>[l(_,{value:2},{default:o(()=>e[34]||(e[34]=[u("全部存储")])),_:1,__:[34]}),l(_,{value:1},{default:o(()=>[e[36]||(e[36]=u("变化存储 ")),l(z,{content:"数据有变化的时候存储 。"},{default:o(()=>e[35]||(e[35]=[s("i",{class:"ri-question-line ri-top2"},null,-1)])),_:1,__:[35]})]),_:1,__:[36]})]),_:1},8,["modelValue"])]),_:1}),l(d,{label:"读写方式",field:"read_write_mode"},{default:o(()=>[l(k,{modelValue:r.form.read_write_mode,"onUpdate:modelValue":e[13]||(e[13]=n=>r.form.read_write_mode=n)},{default:o(()=>[l(_,{value:1},{default:o(()=>e[37]||(e[37]=[u("只读")])),_:1,__:[37]}),l(_,{value:2,disabled:["1","3"].includes(r.form.register_mark)},{default:o(()=>e[38]||(e[38]=[u("读写")])),_:1,__:[38]},8,["disabled"])]),_:1},8,["modelValue"])]),_:1}),l(d,null,{default:o(()=>[s("span",{class:"kd-link f13",onClick:e[14]||(e[14]=n=>r.more=!r.more)},[e[39]||(e[39]=u(" 高级选项 ")),r.more?(f(),w(F,{key:1})):(f(),w(A,{key:0}))])]),_:1}),r.more?(f(),c(U,{key:3},[l(d,null,{label:o(()=>[e[41]||(e[41]=s("span",null,"采集公式",-1)),l(K,null,{content:o(()=>e[40]||(e[40]=[s("div",{class:"f12"},[s("div",null,"设备上行数据经采集公式计算后显示 。"),s("div",null,"公式中的%s为占位符，是固定字段 。"),s("div",null,"如： "),s("div",null,"加：%s+10"),s("div",null,"减：%s-10"),s("div",null,"乘：%s*10"),s("div",null,"除：%s/10"),s("div",null,"余数：%s%10")],-1)])),default:o(()=>[l(T)]),_:1})]),default:o(()=>[l(t,{placeholder:"请输入采集公式",modelValue:r.form.collect_formula,"onUpdate:modelValue":e[15]||(e[15]=n=>r.form.collect_formula=n)},null,8,["modelValue"])]),_:1}),l(d,null,{label:o(()=>[e[43]||(e[43]=s("span",null,"控制公式",-1)),l(K,null,{content:o(()=>e[42]||(e[42]=[s("div",{class:"f12"},[s("div",null,"主动向设备写数据经控制公式计算后下发 。"),s("div",null,"公式中的%s为占位符，是固定字段 。"),s("div",null,"如： "),s("div",null,"加：%s+10"),s("div",null,"减：%s-10"),s("div",null,"乘：%s*10"),s("div",null,"除：%s/10"),s("div",null,"余数：%s%10")],-1)])),default:o(()=>[l(T)]),_:1})]),default:o(()=>[l(t,{placeholder:"请输入控制公式",modelValue:r.form.contro_formula,"onUpdate:modelValue":e[16]||(e[16]=n=>r.form.contro_formula=n)},null,8,["modelValue"])]),_:1})],64)):I("",!0)]),_:1},8,["model"])]),_:1},8,["title","visible"])])):I("",!0)}}},ye={class:"kd-content"},Ve={class:"flex-c"},xe={class:"data-box mb20"},Ie={class:"single-box mt20"},we={class:"s-index-box flex"},qe={class:"flex"},Ce=["onClick"],De={class:"mr10"},Ue={key:0},$e={__name:"mouldAdd",setup(J){const $=j(),q=j(),N=Y().query,a=H({loading:!1,form:{id:0,name:"",collect:1,status_config:1,space_time:"",subordinate:[{template_id:"",name:"从机名称",protocol:"",product_id:null,variable:[]}]},currentIndex:0,dataIndex:0,saving:!1,productList:[],selectId:[]});Z(async()=>{a.loading=!0;let d=null;if(N.id){let t=await le({id:N.id});t.data&&t.data.id&&(d=t.data)}d&&d.subordinate&&d.subordinate.forEach(t=>{t.variable&&t.variable.forEach(_=>{_.unique_key=_.id})}),a.form={id:d?d.id:0,name:d?d.name:"",collect:d?d.collect:1,status_config:d?d.status_config:1,space_time:d?d.space_time||null:"",subordinate:d?d.subordinate:[{template_id:"",name:"从机名称",protocol:"",product_id:null,variable:[]}]},a.form.subordinate.forEach(t=>{!t.product_id&&t.protocol&&(t.protocol===2&&(t.product_id=-2),t.protocol===1&&(t.product_id=-1))}),a.loading=!1,oe({page:1,limit:99,status:1}).then(t=>{a.productList=[{id:-1,name:"Modbus RTU",protocol:1},{id:-2,name:"自定义协议",protocol:2},...t.data.list]})});function r(d){d===-1?a.form.subordinate.push({template_id:"",name:"从机名称",protocol:"",variable:[]}):a.form.subordinate.splice(d,1)}function R(d){let t=a.form.subordinate[a.currentIndex].protocol;if(!t)return L.warning("请先选择从机协议和产品"),!1;d===null?(a.dataIndex=-1,$.value.show(null,t)):(a.dataIndex=d,$.value.show(a.form.subordinate[a.currentIndex].variable[d]))}function O(d){let t=a.currentIndex;if(a.dataIndex>=0)return a.form.subordinate[t].variable[a.dataIndex]=d,!1;if(!d.id)a.form.subordinate[t].variable.push({...d,unique_key:G(6)});else{let _=a.form.subordinate[t].variable.findIndex(k=>k.id==d.id);a.form.subordinate[t].variable[_]=d}}function g(d){a.form.subordinate[a.currentIndex].variable.splice(d,1)}function v(){if(!a.selectId)return!1;if(a.selectId===!0){a.selectId=[],a.form.subordinate[a.currentIndex].variable=[];return}for(var d=0;d<a.selectId.length;d++){let t=a.form.subordinate[a.currentIndex].variable.findIndex(_=>_.unique_key===a.selectId[d]);t>=0&&g(t)}a.selectId=[]}function e(d){d>0?ae({id:d}).then(t=>{var m;a.form.subordinate[a.currentIndex].protocol=t.data.protocol;let _=[];(((m=t.data)==null?void 0:m.variable)||[]).forEach(p=>{_.push({unique_key:G(6),name:p.name,unit:p.unit,type:p.type,register_mark:p.register_mark,register_address:p.register_address,data_format:p.data_format,collect_frequency:p.collect_frequency,fraction:p.fraction,storage_mode:p.storage_mode,read_write_mode:p.read_write_mode,collect_formula:p.collect_formula,contro_formula:p.contro_formula})}),a.form.subordinate[a.currentIndex].variable=_}):(d===-1&&(a.form.subordinate[a.currentIndex].protocol=1),d===-2&&(a.form.subordinate[a.currentIndex].protocol=2))}async function C(){if(await q.value.validate())return!1;let t=JSON.parse(JSON.stringify(a.form));a.saving=!0,t.subordinate.forEach(k=>{k.variable.forEach(m=>{m.unique_key&&delete m.unique_key})});let _=await re(t);if(a.saving=!1,_.code===200){L.success("保存成功"),setTimeout(function(){te.go(-1)},500);return}L.error(_.msg)}return(d,t)=>{const _=i("kd-back"),k=i("a-input"),m=i("a-form-item"),p=i("a-radio"),z=i("a-radio-group"),A=i("a-option"),F=i("a-select"),T=i("icon-close"),K=i("icon-plus"),S=i("a-button"),P=i("a-popconfirm"),n=i("a-space"),x=i("a-form"),Q=i("kd-page-box");return f(),w(Q,{loading:a.loading},{default:o(()=>[s("div",ye,[l(_,{title:"新增/编辑设备模板"}),l(x,{ref_key:"formRef",ref:q,model:a.form,"label-col-props":{flex:"130px"},"wrapper-col-props":{flex:1}},{default:o(()=>[l(m,{label:"模板名称",field:"name",rules:[{required:!0,message:"模板名称必填"}]},{default:o(()=>[l(k,{placeholder:"请输入模板名称",modelValue:a.form.name,"onUpdate:modelValue":t[0]||(t[0]=V=>a.form.name=V),class:"w600"},null,8,["modelValue"])]),_:1}),l(m,{label:"采集方式"},{default:o(()=>t[8]||(t[8]=[s("span",null,"云端轮询",-1)])),_:1,__:[8]}),l(m,{label:"状态配置"},{default:o(()=>[l(z,{modelValue:a.form.status_config,"onUpdate:modelValue":t[1]||(t[1]=V=>a.form.status_config=V)},{default:o(()=>[l(p,{value:1},{default:o(()=>t[9]||(t[9]=[u("网关")])),_:1,__:[9]}),l(p,{value:2},{default:o(()=>t[10]||(t[10]=[u("设备数据")])),_:1,__:[10]})]),_:1},8,["modelValue"])]),_:1}),a.form.status_config===2?(f(),w(m,{key:0,label:"选择时长"},{default:o(()=>[s("div",Ve,[t[15]||(t[15]=s("span",{class:"mr10"},"设备下",-1)),l(F,{placeholder:"请选择时长",class:"w160",modelValue:a.form.space_time,"onUpdate:modelValue":t[2]||(t[2]=V=>a.form.space_time=V)},{default:o(()=>[l(A,{value:3},{default:o(()=>t[11]||(t[11]=[u("3分钟")])),_:1,__:[11]}),l(A,{value:5},{default:o(()=>t[12]||(t[12]=[u("5分钟")])),_:1,__:[12]}),l(A,{value:10},{default:o(()=>t[13]||(t[13]=[u("10分钟")])),_:1,__:[13]}),l(A,{value:60},{default:o(()=>t[14]||(t[14]=[u("1小时")])),_:1,__:[14]})]),_:1},8,["modelValue"]),t[16]||(t[16]=s("span",{class:"ml10"},"无数据时则判断该设备离线",-1))])]),_:1})):I("",!0),s("div",xe,[t[20]||(t[20]=s("div",{class:"f15"},[s("span",{class:"fb"},"设备变量")],-1)),s("div",Ie,[s("div",we,[s("div",qe,[(f(!0),c(U,null,E(a.form.subordinate,(V,D)=>(f(),c("div",{class:ee(["s-index-item",{active:a.currentIndex===D}]),key:D,onClick:h(y=>a.currentIndex=D,["stop"])},[s("span",De,b(V.name||"从机名称"),1),l(T,{onClick:y=>r(D)},null,8,["onClick"])],10,Ce))),128))]),l(S,{type:"text",class:"ml10",onClick:t[3]||(t[3]=V=>r(-1))},{default:o(()=>[l(K),t[17]||(t[17]=u("添加从机"))]),_:1,__:[17]})]),(f(!0),c(U,null,E(a.form.subordinate,(V,D)=>(f(),c(U,{key:D},[D===a.currentIndex?(f(),c("div",Ue,[l(m,{label:"从机名称",required:""},{default:o(()=>[l(k,{modelValue:a.form.subordinate[a.currentIndex].name,"onUpdate:modelValue":t[4]||(t[4]=y=>a.form.subordinate[a.currentIndex].name=y),placeholder:"请输入从机名称",class:"w600"},null,8,["modelValue"])]),_:1}),l(m,{label:"协议和产品",required:""},{default:o(()=>[l(F,{placeholder:"请选择协议和产品",class:"w600",modelValue:a.form.subordinate[a.currentIndex].product_id,"onUpdate:modelValue":t[5]||(t[5]=y=>a.form.subordinate[a.currentIndex].product_id=y),disabled:!!a.form.subordinate[a.currentIndex].variable.length,onChange:e},{default:o(()=>[(f(!0),c(U,null,E(a.productList,(y,W)=>(f(),w(A,{value:y.id,key:W},{default:o(()=>[u(b(y.name),1)]),_:2},1032,["value"]))),128))]),_:2},1032,["modelValue","disabled"])]),_:2},1024),l(n,{class:"mb20"},{default:o(()=>[l(S,{type:"primary",class:"w120",onClick:t[6]||(t[6]=y=>R(null))},{default:o(()=>t[18]||(t[18]=[u("添加变量")])),_:1,__:[18]}),l(P,{content:"确认删除选择的变量数据吗?",onOk:v},{default:o(()=>[l(S,{type:"primary",class:"w120"},{default:o(()=>t[19]||(t[19]=[u("批量删除")])),_:1,__:[19]})]),_:1})]),_:1}),l(se,{index:D,list:V.variable,onEdit:R,onDeleteBatch:t[7]||(t[7]=y=>a.selectId=y),onDelete:g},null,8,["index","list"])])):I("",!0)],64))),128))])]),l(m,null,{default:o(()=>[l(S,{type:"primary",class:"w120",loading:a.saving,onClick:C},{default:o(()=>t[21]||(t[21]=[u("保存")])),_:1,__:[21]},8,["loading"])]),_:1})]),_:1},8,["model"]),l(ke,{ref_key:"addRef",ref:$,onSuccess:O},null,512)])]),_:1},8,["loading"])}}},Se=X($e,[["__scopeId","data-v-4d40ff45"]]);export{Se as default};
