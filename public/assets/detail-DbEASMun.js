import{h as It,r as H,d,c as y,e as w,o as _,b as a,w as l,M as Y,_ as R,i as z,a as o,t as b,f as m,p as I,F as N,l as P,n as lt,x as ot,I as g,j as A,E as Dt,u as h,B as Ct,N as St,q as at,m as Yt}from"./index-3_WCOcxA.js";import{a as Ht,g as Mt,h as zt,i as ht,j as $t,k as Vt,u as Tt,l as Ut,m as Lt,n as Rt,c as Nt,o as Pt,b as At,s as Bt,p as Ft,q as Et,r as Wt,t as Kt,v as jt}from"./kdLive-G86hqvIb.js";import{f as F,p as xt,l as Qt}from"./util-S-QMnavk.js";import{K as st}from"./KdMarkerAddress-DQVdprfo.js";import{C as Zt,a as Ot}from"./CqkdPlayJessibuca-CxjaCgz4.js";import{c as Gt}from"./constantData-DLrCubd0.js";import{C as Jt}from"./CqkdPreviewLocalLive-C9tZQbtQ.js";import"./TianDiMap-3SN5_Mvs.js";const E=It("monitor",()=>{const V=H({live_id:0,info:null,loading:!1,detail:null,qnDetail:null,gateway:null,channelList:[],channelTotal:{all:0,online:0,offline:0},channel_id:null,webrtc:"",flv:"",fls:""});async function u(i){var t,s,r,n;V.loading=!0;try{V.live_id=i;let f=await Ht({id:i});V.loading=!1,f.code===200&&(V.info=f.data,V.info=f.data,V.detail=((s=(t=f.data)==null?void 0:t.details)==null?void 0:s.device)||null,V.qnDetail=((n=(r=f.data)==null?void 0:r.details)==null?void 0:n.qiniu_device)||null)}catch{}}async function e(){var t,s,r,n;let i=await Mt({id:V.live_id});i.code===200&&(V.channelList=((t=i.data)==null?void 0:t.items)||[],V.channelTotal.all=((s=i.data)==null?void 0:s.total)||0,V.channelTotal.online=((r=i.data)==null?void 0:r.onlineCount)||0,V.channelTotal.offline=((n=i.data)==null?void 0:n.offlineCount)||0,V.channelList.length&&(V.channel_id=V.channelList[0].channelId))}function p(){let i=V.detail.webrtc,t=V.detail.flv,s=V.detail.hls;if(V.detail.type===2)for(let r=0;r<V.channelList.length;r++)V.channelList[r].channelId===V.channel_id&&(i=V.channelList[r].webrtc,t=V.channelList[r].flv,s=V.channelList[r].m3u8);V.webrtc=i,V.flv=t,V.hls=s}return{state:V,getInfo:u,getChannel:e,getPlayUrl:p}}),Xt={key:0},nt={__name:"CqkdUpdateDeviceName",emits:["success"],setup(V,{expose:u,emit:e}){const p=e,i=H({show:!1,desc:"",id:0});function t(r){i.show=!0,i.desc=r.desc||"",i.id=r.id||""}async function s(){if(!i.desc)return Y.warning("请输入设备名称"),!1;let r={id:i.id,desc:i.desc,name:i.desc},n=await zt(r);return n.code===200?(Y.success("修改成功"),p("success"),!0):(Y.error(n.msg),!1)}return u({show:t}),(r,n)=>{const f=d("a-input"),c=d("a-modal");return i.show?(_(),y("div",Xt,[a(c,{title:"修改设备名称",visible:i.show,"onUpdate:visible":n[1]||(n[1]=v=>i.show=v),width:"400px","on-before-ok":s},{default:l(()=>[a(f,{modelValue:i.desc,"onUpdate:modelValue":n[0]||(n[0]=v=>i.desc=v),placeholder:"请输入设备名称"},null,8,["modelValue"])]),_:1},8,["visible"])])):w("",!0)}}},te={class:"hk-box"},ee={class:"hk-info"},ae={class:"hk-item flex-c"},le={class:"hk-value"},oe={class:"hk-item flex-c"},se={class:"hk-value"},ne={class:"hk-item flex-c"},ie={class:"hk-value"},de={class:"hk-item flex-c"},re={class:"hk-value"},ue={key:0},me={key:1},_e={key:2},fe={key:3},pe={class:"hk-item flex-c"},ce={class:"hk-value"},ve={class:"hk-item flex-c"},ye={class:"hk-value"},ke={class:"hk-item flex-c"},be={class:"hk-value"},ge={key:0},we={key:1},xe={class:"hk-item flex-c"},he={class:"hk-value"},$e={class:"hk-item flex-c"},Ve={class:"hk-value"},qe={class:"hk-item flex-c"},Ie={class:"hk-value"},De={class:"hk-item flex-c"},Ce={class:"hk-value"},Se={class:"hk-item flex-c"},Ye={class:"hk-value"},He={class:"hk-address"},Me={class:"hk-status flex mt10"},ze={class:"si-val"},Te={class:"si-title"},Ue={__name:"HaiKangInfo",props:{info:{type:Object,default:null},statusList:{type:Array,default:[]}},setup(V){const u=z(),e=V;H({});const p=()=>u.value.show();return(i,t)=>{const s=d("a-button"),r=d("a-tag");return _(),y("div",null,[o("div",te,[o("div",ee,[t[15]||(t[15]=o("div",{class:"f16 fb"},"设备基本信息",-1)),o("div",ae,[t[1]||(t[1]=o("div",{class:"hk-title"},"设备名称",-1)),o("div",le,[o("span",null,b(e.info.displayName),1),a(s,{type:"text",size:"mini",onClick:p},{default:l(()=>t[0]||(t[0]=[m("修改")])),_:1,__:[0]})])]),o("div",oe,[t[2]||(t[2]=o("div",{class:"hk-title"},"设备序列号",-1)),o("div",se,b(e.info.fullSerial),1)]),o("div",ne,[t[5]||(t[5]=o("div",{class:"hk-title"},"设备在线状态",-1)),o("div",ie,[e.info.status===1?(_(),I(r,{key:0,color:"#00CC66",size:"mini"},{default:l(()=>t[3]||(t[3]=[m("在线")])),_:1,__:[3]})):(_(),I(r,{key:1,color:"#999",size:"mini"},{default:l(()=>t[4]||(t[4]=[m("离线")])),_:1,__:[4]}))])]),o("div",de,[t[6]||(t[6]=o("div",{class:"hk-title"},"是否支持wifi",-1)),o("div",re,[e.info.supportWifi===0?(_(),y("span",ue,"不支持")):w("",!0),e.info.supportWifi===1?(_(),y("span",me,"支持")):w("",!0),e.info.supportWifi===2?(_(),y("span",_e,"支持带userId的新的wifi配置方式")):w("",!0),e.info.supportWifi===3?(_(),y("span",fe,"支持smartwifi")):w("",!0)])]),o("div",pe,[t[7]||(t[7]=o("div",{class:"hk-title"},"设备协议版本",-1)),o("div",ce,b(e.info.releaseVersion),1)]),o("div",ve,[t[8]||(t[8]=o("div",{class:"hk-title"},"设备真实版本号",-1)),o("div",ye,b(e.info.version),1)]),o("div",ke,[t[9]||(t[9]=o("div",{class:"hk-title"},"是否支持云存储",-1)),o("div",be,[e.info.supportCloud===0?(_(),y("span",ge,"不支持")):w("",!0),e.info.supportCloud===1?(_(),y("span",we,"支持")):w("",!0)])]),o("div",xe,[t[10]||(t[10]=o("div",{class:"hk-title"},"设备首次上线时间",-1)),o("div",he,b(e.info.createTime),1)]),o("div",$e,[t[11]||(t[11]=o("div",{class:"hk-title"},"设备位置",-1)),o("div",Ve,b(e.info.address||"-"),1)]),o("div",qe,[t[12]||(t[12]=o("div",{class:"hk-title"},"信号强度(%)",-1)),o("div",Ie,b(e.info.signal),1)]),o("div",De,[t[13]||(t[13]=o("div",{class:"hk-title"},"设备IP地址",-1)),o("div",Ce,b(e.info.netAddress),1)]),o("div",Se,[t[14]||(t[14]=o("div",{class:"hk-title"},"网络类型",-1)),o("div",Ye,b(e.info.netType),1)])]),o("div",He,[a(st)])]),t[16]||(t[16]=o("div",{class:"f16 fb mt10"},"设备状态信息",-1)),o("div",Me,[(_(!0),y(N,null,P(e.statusList,(n,f)=>(_(),y("div",{class:"hk-status-item",key:f},[o("div",ze,b(n.value_txt),1),o("div",Te,b(n.name),1)]))),128))]),a(nt,{ref_key:"nameRef",ref:u},null,512)])}}},Le=R(Ue,[["__scopeId","data-v-cebc8424"]]),Re={class:"hk-channel"},Ne={key:0},Pe={key:1},Ae={key:2},Be={key:3},Fe={key:0},Ee={__name:"HaiKangChannel",setup(V){const u=H({loading:!1,list:[{deviceSerial:"427734222",ipcSerial:"427734222",channelNo:1,deviceName:"My(427734222)427734222",channelName:"My(427734222)427734222",status:1,isShared:"0",isEncrypt:0,videoLevel:2},{deviceSerial:"427734222",ipcSerial:"427734222",channelNo:2,deviceName:"My(427734222)427734222",channelName:"My(427734222)427734222",status:1,isShared:"0",isEncrypt:0,videoLevel:2}],form:{show:!1,name:""}});return(e,p)=>{const i=d("a-tag"),t=d("a-table"),s=d("a-input"),r=d("a-modal");return _(),y("div",Re,[a(t,{class:"kd-small-table",pagination:!1,bordered:!1,data:u.list,columns:[{title:"备序列号",dataIndex:"deviceSerial"},{title:"通道名",slotName:"channelName"},{title:"通道号",dataIndex:"channelNo"},{title:"在线状态",slotName:"status"},{title:"视频质量",slotName:"videoLevel"}],loading:u.loading},{channelName:l(({record:n})=>[o("span",null,b(n.channelName),1),o("span",{class:"kd-link ml10",onClick:p[0]||(p[0]=f=>u.form.show=!0)},p[3]||(p[3]=[o("i",{class:"ri-edit-line"},null,-1)]))]),status:l(({record:n})=>[n.status===1?(_(),I(i,{key:0,color:"#00CC66",size:"mini"},{default:l(()=>p[4]||(p[4]=[m("在线")])),_:1,__:[4]})):(_(),I(i,{key:1,color:"#999",size:"mini"},{default:l(()=>p[5]||(p[5]=[m("离线")])),_:1,__:[5]}))]),videoLevel:l(({record:n})=>[n.videoLevel===0?(_(),y("span",Ne,"流畅")):w("",!0),n.videoLevel===1?(_(),y("span",Pe,"均衡")):w("",!0),n.videoLevel===2?(_(),y("span",Ae,"高清")):w("",!0),n.videoLevel===3?(_(),y("span",Be,"超清")):w("",!0)]),_:1},8,["data","loading"]),u.form.show?(_(),y("div",Fe,[a(r,{title:"修改通道名称",visible:u.form.show,"onUpdate:visible":p[2]||(p[2]=n=>u.form.show=n),width:"400px","on-before-ok":e.saveData},{default:l(()=>[a(s,{modelValue:u.form.name,"onUpdate:modelValue":p[1]||(p[1]=n=>u.form.name=n),placeholder:"请输入通道名称"},null,8,["modelValue"])]),_:1},8,["visible","on-before-ok"])])):w("",!0)])}}},We={key:0},it={__name:"CqkdAddPreset",emits:["success"],setup(V,{expose:u,emit:e}){const p=e,i=H({show:!1,name:"",form:{id:0,cmd:"set",name:"",channels:"",presetId:null}});function t(r,n=""){i.show=!0,i.form={id:r,cmd:"set",name:"",channels:n,presetId:null}}async function s(){if(!i.form.name)return Y.warning("请输入预置位名称"),!1;let r=JSON.parse(JSON.stringify(i.form));r.channels||delete r.channels;let n=await ht(r);return n.code===200?(Y.success("保存成功"),p("success"),!0):(Y.error(n.msg),!1)}return u({show:t}),(r,n)=>{const f=d("a-input"),c=d("a-modal");return i.show?(_(),y("div",We,[a(c,{title:"新增预置位",visible:i.show,"onUpdate:visible":n[1]||(n[1]=v=>i.show=v),width:"400px","on-before-ok":s},{default:l(()=>[a(f,{modelValue:i.form.name,"onUpdate:modelValue":n[0]||(n[0]=v=>i.form.name=v),placeholder:"请输入预置位名称"},null,8,["modelValue"])]),_:1},8,["visible"])])):w("",!0)}}},Ke={class:"hk-ptz"},je={class:"hk-header flex"},Qe={class:"hk-ptz-box flex mt15"},Ze={class:"control-board flex"},Oe={key:1},Ge={class:"preset-box mt15"},Je={class:"f14 fb flex-c mb10"},Xe={__name:"HaiKangPtz",setup(V){const u=z(),e=H({play_type:1,controlBtn:[{icon:"ri-arrow-left-up-fill",at:"leftup"},{icon:"ri-arrow-up-fill",at:"up"},{icon:"ri-arrow-right-up-fill",at:"rightup"},{icon:"ri-arrow-left-fill",at:"left"},{icon:"",at:-1},{icon:"ri-arrow-right-fill",at:"right"},{icon:"ri-arrow-left-down-fill",at:"leftdown"},{icon:"ri-arrow-down-fill",at:"down"},{icon:"ri-arrow-right-down-fill",at:"rightdown"},{icon:"ri-subtract-line",at:"zoomout"},{icon:"",at:-1,text:"变倍"},{icon:"ri-add-line",at:"zoomin"},{icon:"ri-subtract-line",at:"focusfar"},{icon:"",at:-1,text:"变焦"},{icon:"ri-add-line",at:"focusnear"}],presetData:[{id:1,name:"前方",channelNo:1},{id:2,name:"前方2",channelNo:1}]}),p=()=>u.value.show();return(i,t)=>{const s=d("a-option"),r=d("a-select"),n=d("a-button"),f=d("a-radio"),c=d("a-radio-group"),v=d("a-space"),$=d("a-popconfirm"),C=d("a-table");return _(),y("div",Ke,[o("div",je,[a(r,{placeholder:"选择通道",class:"w240"},{default:l(()=>[a(s,null,{default:l(()=>t[1]||(t[1]=[m("My(427734222)427734222")])),_:1,__:[1]}),a(s,null,{default:l(()=>t[2]||(t[2]=[m("My(427734222)427734221")])),_:1,__:[2]})]),_:1}),a(v,null,{default:l(()=>[a(n,{type:"primary"},{default:l(()=>t[3]||(t[3]=[m("截取当前画面")])),_:1,__:[3]}),a(c,{modelValue:e.play_type,"onUpdate:modelValue":t[0]||(t[0]=q=>e.play_type=q),type:"button"},{default:l(()=>[a(f,{value:1},{default:l(()=>t[4]||(t[4]=[m("webrtc")])),_:1,__:[4]}),a(f,{value:2},{default:l(()=>t[5]||(t[5]=[m("flv直播流")])),_:1,__:[5]})]),_:1},8,["modelValue"])]),_:1})]),o("div",Qe,[t[6]||(t[6]=o("div",{class:"play-box"},null,-1)),o("div",Ze,[(_(!0),y(N,null,P(e.controlBtn,(q,M)=>(_(),y("div",{class:"cb-item",key:M},[q.icon?(_(),y("i",{key:0,class:lt(["ri-icon",q.icon])},null,2)):w("",!0),q.text?(_(),y("span",Oe,b(q.text),1)):w("",!0)]))),128))])]),o("div",Ge,[o("div",Je,[t[8]||(t[8]=o("span",{class:"mr10"},"预置位",-1)),a(n,{size:"mini",onClick:p},{default:l(()=>t[7]||(t[7]=[o("i",{class:"ri-add-line"},null,-1),m("新增预置位")])),_:1,__:[7]})]),a(C,{class:"kd-small-table",pagination:!1,bordered:!1,data:e.presetData,columns:[{title:"ID",dataIndex:"id",width:100},{title:"预置位名称",dataIndex:"name"},{title:"通道",dataIndex:"channelNo"},{title:"操作",slotName:"action"}]},{action:l(({record:q})=>[a(n,{type:"text",size:"mini",class:"ml-10"},{default:l(()=>t[9]||(t[9]=[m("调用")])),_:1,__:[9]}),a($,{content:"确认删除预置位吗？"},{default:l(()=>[a(n,{type:"text",size:"mini"},{default:l(()=>t[10]||(t[10]=[m("删除")])),_:1,__:[10]})]),_:1})]),_:1},8,["data"])]),a(it,{ref_key:"presetRef",ref:u},null,512)])}}},ta=R(Xe,[["__scopeId","data-v-6ae19e24"]]),ea={key:0},aa={class:"tips mt5"},la={class:"tips mt5"},oa={class:"tips mt5"},dt={__name:"CqkdSetAutoScreenshot",setup(V,{expose:u}){const e=H({show:!1,form:{type:1,monitor_id:0,channels:"",op_type:1,day:null,week:"",date:"",time:"",status:0}});async function p(t,s,r){e.show=!0;let n={monitor_id:t,channels:s||"",type:r},f=null,c=await $t(n);c.code===200&&c.data&&(f=c.data);let v=null,$="",C="",q="";if(f){if(f.op_type===1){let M=f.op_value.split(",");v=parseInt(M[0]),q=M[1]}if(f.op_type===2){let M=f.op_value.split(",");$=parseInt(M[0]),q=M[1]}f.op_type===3&&(C=f.op_value)}e.form={type:r,monitor_id:t,channels:s||"",op_type:f?f.op_type:1,day:v,week:$,date:C,time:q,status:f?f.status:0}}async function i(){let{op_type:t,day:s,week:r,date:n,time:f}=e.form,c={type:e.form.type,monitor_id:e.form.monitor_id,channels:e.form.channels,op_type:t,status:e.form.status,op_value:""};if(t===1){if(!s||!f)return Y.warning("请输入截图时间"),!1;c.op_value=`${s},${f}`}if(t===2){if(!r||!f)return Y.warning("请选择截图时间"),!1;c.op_value=`${r},${f}`}if(t===3){if(!n)return Y.warning("请选择截图时间"),!1;c.op_value=n}let v=await Vt(c);return v.code===200?(Y.success("配置保存成功"),!0):(Y.error(v.msg),!1)}return u({show:p}),(t,s)=>{const r=d("a-radio"),n=d("a-radio-group"),f=d("a-form-item"),c=d("a-input-number"),v=d("a-time-picker"),$=d("a-space"),C=d("a-option"),q=d("a-select"),M=d("a-date-picker"),L=d("a-switch"),S=d("a-form"),x=d("a-modal");return e.show?(_(),y("div",ea,[a(x,{title:"自动截图配置",visible:e.show,"onUpdate:visible":s[7]||(s[7]=k=>e.show=k),width:"500px","on-before-ok":i},{default:l(()=>[a(S,{model:e.form,ref:"formRef","label-col-props":{flex:"100px"},"wrapper-col-props":{flex:1}},{default:l(()=>[a(f,{label:"截图周期"},{default:l(()=>[a(n,{modelValue:e.form.op_type,"onUpdate:modelValue":s[0]||(s[0]=k=>e.form.op_type=k)},{default:l(()=>[a(r,{value:1},{default:l(()=>s[8]||(s[8]=[m("每天")])),_:1,__:[8]}),a(r,{value:2},{default:l(()=>s[9]||(s[9]=[m("每周")])),_:1,__:[9]}),a(r,{value:3},{default:l(()=>s[10]||(s[10]=[m("固定时间点")])),_:1,__:[10]})]),_:1},8,["modelValue"])]),_:1}),e.form.op_type===1?(_(),I(f,{key:0,label:"每天截图",required:""},{default:l(()=>[o("div",null,[a($,null,{default:l(()=>[a(c,{modelValue:e.form.day,"onUpdate:modelValue":s[1]||(s[1]=k=>e.form.day=k),placeholder:"请输入"},{prepend:l(()=>s[11]||(s[11]=[m("每")])),append:l(()=>s[12]||(s[12]=[m("天")])),_:1},8,["modelValue"]),a(v,{modelValue:e.form.time,"onUpdate:modelValue":s[2]||(s[2]=k=>e.form.time=k),class:"w160",format:"HH:mm"},null,8,["modelValue"])]),_:1}),o("div",aa,"每"+b(e.form.day)+"天 "+b(e.form.time)+"截图一次",1)])]),_:1})):w("",!0),e.form.op_type===2?(_(),I(f,{key:1,label:"每周截图",required:""},{default:l(()=>[o("div",null,[a($,null,{default:l(()=>[a(q,{placeholder:"请选择",modelValue:e.form.week,"onUpdate:modelValue":s[3]||(s[3]=k=>e.form.week=k),class:"w120"},{default:l(()=>[a(C,{value:1},{default:l(()=>s[13]||(s[13]=[m("周一")])),_:1,__:[13]}),a(C,{value:2},{default:l(()=>s[14]||(s[14]=[m("周二")])),_:1,__:[14]}),a(C,{value:3},{default:l(()=>s[15]||(s[15]=[m("周三")])),_:1,__:[15]}),a(C,{value:4},{default:l(()=>s[16]||(s[16]=[m("周四")])),_:1,__:[16]}),a(C,{value:5},{default:l(()=>s[17]||(s[17]=[m("周五")])),_:1,__:[17]}),a(C,{value:6},{default:l(()=>s[18]||(s[18]=[m("周六")])),_:1,__:[18]}),a(C,{value:7},{default:l(()=>s[19]||(s[19]=[m("周日")])),_:1,__:[19]})]),_:1},8,["modelValue"]),a(v,{modelValue:e.form.time,"onUpdate:modelValue":s[4]||(s[4]=k=>e.form.time=k),class:"w160",format:"HH:mm"},null,8,["modelValue"])]),_:1}),o("div",la,"每周"+b(e.form.week)+b(e.form.time)+"截图一次",1)])]),_:1})):w("",!0),e.form.op_type===3?(_(),I(f,{key:2,label:"固定时间",required:""},{default:l(()=>[o("div",null,[a(M,{modelValue:e.form.date,"onUpdate:modelValue":s[5]||(s[5]=k=>e.form.date=k),"show-time":"",format:"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"]),o("div",oa,b(e.form.date)+"截图一次",1)])]),_:1})):w("",!0),a(f,{label:"是否启用"},{default:l(()=>[a(L,{modelValue:e.form.status,"onUpdate:modelValue":s[6]||(s[6]=k=>e.form.status=k),"checked-value":1,"unchecked-value":0,"checked-text":"启用","unchecked-text":"禁用"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])])):w("",!0)}}},sa={class:"hk-screenshot"},na={class:"screenshot-list flex mt15"},ia={class:"time flex-cb mt5"},da={__name:"HaiKangScreenshot",setup(V){ot();const u=z(),e=H({search:{time:[]},rangeShortcuts:[{label:"最近七日",value:()=>[g().subtract(7,"day"),g()]},{label:"最近一个月",value:()=>[g().subtract(1,"month"),g()]},{label:"最近三个月",value:()=>[g().subtract(3,"month"),g()]},{label:"最近一年",value:()=>[g().subtract(1,"year"),g()]}],info:{page:1,count:0,list:[],limit:20}});A(()=>{e.info.limit=Math.floor((window.innerWidth-250)/230)*3,e.search.time=[g().subtract(1,"day").format("YYYY-MM-DD HH:mm"),g().format("YYYY-MM-DD HH:mm")]});const p=()=>u.value.show();return(i,t)=>{const s=d("a-range-picker"),r=d("a-button"),n=d("a-space"),f=d("a-image"),c=d("kd-pager");return _(),y("div",sa,[a(n,null,{default:l(()=>[a(s,{showTime:"",class:"w360","shortcuts-position":"left",format:"YYYY-MM-DD HH:mm",modelValue:e.search.time,"onUpdate:modelValue":t[0]||(t[0]=v=>e.search.time=v),"allow-clear":!1,shortcuts:e.rangeShortcuts},null,8,["modelValue","shortcuts"]),a(r,{type:"primary"},{default:l(()=>t[1]||(t[1]=[m("查询")])),_:1,__:[1]}),a(r,null,{default:l(()=>t[2]||(t[2]=[m("重置")])),_:1,__:[2]}),a(r,{onClick:p},{default:l(()=>t[3]||(t[3]=[m("配置自动截图")])),_:1,__:[3]})]),_:1}),o("div",na,[(_(!0),y(N,null,P(e.info.limit,(v,$)=>(_(),y("div",{class:"screent-item",key:$},[a(f,{class:"img",width:"220",src:"http://img.farmkd.com/snapshot/jpg/3nm4x0wdhtsas/31011500991320065283/ondemand/1752541717791.jpg?e=1752648066&token=d8BDvxRsw76vxrUHxZ5k1tPXva_TpO2h1BdrZU4z:49zBsQC5-rZqnSvZ5Dez0G7LH20"}),o("div",ia,[t[5]||(t[5]=o("span",{class:"f12"},"2025-07-15 09:08:37",-1)),a(r,{type:"text",size:"mini"},{default:l(()=>t[4]||(t[4]=[m("删除")])),_:1,__:[4]})])]))),128))]),a(c,{"page-data":e.info,"show-size":!1},null,8,["page-data"]),a(dt,{ref_key:"autoRef",ref:u},null,512)])}}},ra=R(da,[["__scopeId","data-v-3d9d9d86"]]),ua={class:"hk-recording"},ma={key:0},_a={key:1},fa={key:2},pa={__name:"HaiKangRecording",setup(V){const u=H({search:{time:[]},rangeShortcuts:[{label:"最近七日",value:()=>[g().subtract(7,"day"),g()]},{label:"最近一个月",value:()=>[g().subtract(1,"month"),g()]},{label:"最近三个月",value:()=>[g().subtract(3,"month"),g()]},{label:"最近一年",value:()=>[g().subtract(1,"year"),g()]}],info:{page:1,count:0,list:[],limit:20}});return A(()=>{u.info.limit=Math.floor((window.innerWidth-250)/230)*3,u.search.time=[g().subtract(1,"day").format("YYYY-MM-DD HH:mm"),g().format("YYYY-MM-DD HH:mm")],u.info.list=[{recType:1,channelNo:1,startTime:"2025-01-01 12:00",endTime:"2025-01-01 12:30",localType:"ALLEVENT",id:20432171600,fileId:"20432171600",fileSize:4011828,createTime:"2016-08-22 13:59:13"},{recType:2,channelNo:1,startTime:"2025-01-01 12:00",endTime:"2025-01-01 12:30",localType:"ALLEVENT",id:20432171600,fileId:"20432171600",fileSize:4011828,createTime:"2016-08-22 13:59:13"}]}),(e,p)=>{const i=d("a-range-picker"),t=d("a-button"),s=d("a-space"),r=d("a-table"),n=d("kd-pager");return _(),y("div",ua,[a(s,null,{default:l(()=>[a(i,{showTime:"",class:"w360","shortcuts-position":"left",format:"YYYY-MM-DD HH:mm",modelValue:u.search.time,"onUpdate:modelValue":p[0]||(p[0]=f=>u.search.time=f),"allow-clear":!1,shortcuts:u.rangeShortcuts},null,8,["modelValue","shortcuts"]),a(t,{type:"primary"},{default:l(()=>p[1]||(p[1]=[m("查询")])),_:1,__:[1]}),a(t,null,{default:l(()=>p[2]||(p[2]=[m("重置")])),_:1,__:[2]})]),_:1}),a(r,{class:"mt15",pagination:!1,bordered:!1,data:u.info.list,columns:[{title:"设备通道号",dataIndex:"channelNo",width:200},{title:"录像时间",slotName:"time"},{title:"回放源",slotName:"recType"},{title:"文件类型",dataIndex:"localType"},{title:"操作",slotName:"action"}]},{recType:l(({record:f})=>[f.recType===0?(_(),y("span",ma,"-")):w("",!0),f.recType===1?(_(),y("span",_a,"云存储")):w("",!0),f.recType===2?(_(),y("span",fa,"本地录像")):w("",!0)]),time:l(({record:f})=>[o("span",null,b(f.startTime)+"~"+b(f.endTime),1)]),action:l(({record:f})=>[a(t,{type:"text",size:"mini",class:"ml-10"},{default:l(()=>p[3]||(p[3]=[m("回放")])),_:1,__:[3]})]),_:1},8,["data"]),a(n,{"page-data":u.info,"show-size":!1},null,8,["page-data"])])}}},ca={__name:"CqkdHaiKangDetail",setup(V){const u=H({info:{displayName:"DS-3E1518P-E-230W(K96719611)",fullSerial:"K96719611",model:"DS-3E1500",category:"UNKNOWN",status:1,supportWifi:0,releaseVersion:"1.7.0",version:"V1.0.0 build 221213",availableChannelCount:1,relatedDeviceCount:0,supportCloud:"0",supportExt:'{"support_device_light":"1"}',parentCategory:"COMMON",netAddress:"47.98.160.100",signal:"100%",netType:"wire"},deviceStatus:[{name:"隐私状态",value:0,value_txt:"打开"},{name:"红外状态",value:0,value_txt:"启用"},{name:"告警声音模式",value:0,value_txt:"短叫"},{name:"电池电量",value:0,value_txt:"100%"},{name:"云存储状态",value:0,value_txt:"激活"},{name:"信号强度",value:0,value_txt:"100%"},{name:"休眠状态",value:0,value_txt:"休眠"},{name:"sd硬盘状态",value:0,value_txt:"正常"}]});return(e,p)=>{const i=d("a-tab-pane"),t=d("a-tabs");return _(),y("div",null,[a(t,{"default-active-key":"1"},{default:l(()=>[a(i,{key:"1",title:"基本信息"},{default:l(()=>[a(Le,{info:u.info,statusList:u.deviceStatus},null,8,["info","statusList"])]),_:1}),a(i,{key:"2",title:"通道列表"},{default:l(()=>[a(Ee)]),_:1}),a(i,{key:"3",title:"云台控制"},{default:l(()=>[a(ta)]),_:1}),a(i,{key:"4",title:"截图管理"},{default:l(()=>[a(ra)]),_:1}),a(i,{key:"5",title:"本地录像"},{default:l(()=>[a(pa)]),_:1})]),_:1})])}}},va={key:0},ut={__name:"CqkdUpdateDevicePwd",emits:["success"],setup(V,{expose:u,emit:e}){const p=e,i=z(),t=H({show:!1,form:{id:0,password:"",re_password:""}});function s(n){t.show=!0,t.form={id:n,password:""}}async function r(){if(await i.value.validate())return!1;let f={id:t.form.id,data:{password:t.form.password}},c=await Tt(f);return c.code===200?(Y.success("密码修改成功"),p("success"),!0):(Y.error(c.msg),!1)}return u({show:s}),(n,f)=>{const c=d("a-input"),v=d("a-form-item"),$=d("a-form"),C=d("a-modal");return t.show?(_(),y("div",va,[a(C,{title:"修改设备密码",visible:t.show,"onUpdate:visible":f[1]||(f[1]=q=>t.show=q),width:"500px","on-before-ok":r},{default:l(()=>[a($,{model:t.form,ref_key:"formRef",ref:i,"label-col-props":{flex:"120px"},"wrapper-col-props":{flex:1}},{default:l(()=>[a(v,{label:"新密码",field:"password",rules:[{required:!0,message:"新密码必填"}]},{default:l(()=>[a(c,{modelValue:t.form.password,"onUpdate:modelValue":f[0]||(f[0]=q=>t.form.password=q),placeholder:"请输入新密码"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])])):w("",!0)}}},ya={class:"qn-page"},ka={class:"qn-box flex"},ba={class:"qn-info"},ga={class:"qn-info-item flex-c"},wa={class:"qn-value"},xa={class:"qn-info-item flex-c"},ha={class:"qn-value"},$a={class:"qn-info-item flex-c"},Va={class:"qn-value"},qa={class:"qn-info-item flex-c"},Ia={class:"qn-value"},Da={class:"qn-info-item flex-c"},Ca={class:"qn-value"},Sa={class:"qn-info-item flex-c"},Ya={class:"qn-value"},Ha={class:"qn-info-item flex-c"},Ma={class:"qn-value"},za={class:"qn-info-item flex-c"},Ta={class:"qn-value"},Ua={class:"qn-info-item flex-c"},La={class:"qn-value"},Ra={class:"qn-info-item flex-c"},Na={class:"qn-value"},Pa={class:"qn-info-item flex-c"},Aa={class:"qn-value"},Ba={class:"qn-info-item flex-c"},Fa={class:"qn-value"},Ea={class:"qn-info-item flex-c"},Wa={class:"qn-value"},Ka={class:"qn-info-item flex-c"},ja={class:"qn-value"},Qa={class:"qn-info-item flex-c"},Za={class:"qn-value"},Oa={class:"hk-address"},Ga={class:"qn-status-box"},Ja={class:"qn-status flex mt10"},Xa={class:"si-val"},tl={class:"si-title"},el={__name:"QiniuBaseInfo",setup(V){const u=E(),e=z(),p=z();H({}),A(()=>{});const i=Dt(()=>{var n;let r=u.state.qnDetail;return[{name:"国标报警",value:0,value_txt:r!=null&&r.alarmEnable?"开启":"关闭"},{name:"本地录像",value:0,value_txt:r!=null&&r.localRecordPushEnable?"开启":"关闭"},{name:"地理位置",value:0,value_txt:(n=r==null?void 0:r.location)!=null&&n.enable?"开启":"关闭"},{name:"音频",value:0,value_txt:r!=null&&r.rtpAudio?"开启":"关闭"},{name:"音频转码",value:0,value_txt:r!=null&&r.rtpAudioTranscode?"开启":"关闭"},{name:"按需拉流",value:0,value_txt:r!=null&&r.onDemandPull?"开启":"关闭"},{name:"注册成功后启动拉流",value:0,value_txt:r!=null&&r.pullIfRegister?"开启":"关闭"}]}),t=()=>e.value.show(u.state.info),s=()=>p.value.show(u.state.info.id);return(r,n)=>{var $,C,q,M,L,S,x,k,D,U,Q,Z,O,W,G,K,J,X,j,T,B,tt,mt,_t,ft,pt,ct,vt,yt,kt,bt,gt,wt;const f=d("kd-copy"),c=d("a-tag"),v=d("a-button");return _(),y("div",ya,[o("div",ka,[o("div",ba,[n[23]||(n[23]=o("div",{class:"f16 fb"},"接入网关",-1)),o("div",ga,[n[2]||(n[2]=o("div",{class:"qn-title"},"SIP 服务器 ID",-1)),o("div",wa,[m(b((($=h(u).state.gateway)==null?void 0:$.sipServerId)||"-")+" ",1),(C=h(u).state.gateway)!=null&&C.sipServerId?(_(),I(f,{key:0,value:(q=h(u).state.gateway)==null?void 0:q.sipServerId},null,8,["value"])):w("",!0)])]),o("div",xa,[n[3]||(n[3]=o("div",{class:"qn-title"},"SIP 服务器 IP",-1)),o("div",ha,[m(b(((M=h(u).state.gateway)==null?void 0:M.sipServerIP)||"-")+" ",1),(L=h(u).state.gateway)!=null&&L.sipServerIP?(_(),I(f,{key:0,value:(S=h(u).state.gateway)==null?void 0:S.sipServerIP},null,8,["value"])):w("",!0)])]),o("div",$a,[n[4]||(n[4]=o("div",{class:"qn-title"},"SIP 服务器端口号（UDP）",-1)),o("div",Va,[m(b(((k=(x=h(u).state.gateway)==null?void 0:x.sipServerPort)==null?void 0:k[0])||"-")+" ",1),(U=(D=h(u).state.gateway)==null?void 0:D.sipServerPort)!=null&&U[0]?(_(),I(f,{key:0,value:(Z=(Q=h(u).state.gateway)==null?void 0:Q.sipServerPort)==null?void 0:Z[0]},null,8,["value"])):w("",!0)])]),n[24]||(n[24]=o("div",{class:"f16 fb mt10"},"设备基本信息",-1)),o("div",qa,[n[9]||(n[9]=o("div",{class:"qn-title"},"设备状态",-1)),o("div",Ia,[((O=h(u).state.qnDetail)==null?void 0:O.state)==="offline"?(_(),I(c,{key:0,color:"#999"},{default:l(()=>n[5]||(n[5]=[m("离线")])),_:1,__:[5]})):w("",!0),((W=h(u).state.qnDetail)==null?void 0:W.state)==="online"?(_(),I(c,{key:1,color:"#00CC66"},{default:l(()=>n[6]||(n[6]=[m("在线")])),_:1,__:[6]})):w("",!0),((G=h(u).state.qnDetail)==null?void 0:G.state)==="notReg"?(_(),I(c,{key:2,color:"#FF9900"},{default:l(()=>n[7]||(n[7]=[m("未注册")])),_:1,__:[7]})):w("",!0),((K=h(u).state.qnDetail)==null?void 0:K.state)==="locked"?(_(),I(c,{key:3,color:"#FF0066"},{default:l(()=>n[8]||(n[8]=[m("锁定")])),_:1,__:[8]})):w("",!0)])]),o("div",Da,[n[11]||(n[11]=o("div",{class:"qn-title"},"设备名称",-1)),o("div",Ca,[m(b(((J=h(u).state.info)==null?void 0:J.desc)||"-")+" ",1),a(v,{type:"text",size:"mini",onClick:t},{default:l(()=>n[10]||(n[10]=[m("修改")])),_:1,__:[10]})])]),o("div",Sa,[n[12]||(n[12]=o("div",{class:"qn-title"},"设备类型",-1)),o("div",Ya,b(((X=h(u).state.detail)==null?void 0:X.type)===1?"摄像头":"平台"),1)]),o("div",Ha,[n[13]||(n[13]=o("div",{class:"qn-title"},"所属空间",-1)),o("div",Ma,b(((j=h(u).state.detail)==null?void 0:j.space_id)||"-"),1)]),o("div",za,[n[14]||(n[14]=o("div",{class:"qn-title"},"设备国标ID",-1)),o("div",Ta,[m(b(((T=h(u).state.detail)==null?void 0:T.gbId)||"-")+" ",1),(B=h(u).state.detail)!=null&&B.gbId?(_(),I(f,{key:0,value:(tt=h(u).state.detail)==null?void 0:tt.gbId},null,8,["value"])):w("",!0)])]),o("div",Ua,[n[15]||(n[15]=o("div",{class:"qn-title"},"用户名",-1)),o("div",La,[m(b(((mt=h(u).state.qnDetail)==null?void 0:mt.username)||"-")+" ",1),(_t=h(u).state.qnDetail)!=null&&_t.username?(_(),I(f,{key:0,value:(ft=h(u).state.qnDetail)==null?void 0:ft.username},null,8,["value"])):w("",!0)])]),o("div",Ra,[n[17]||(n[17]=o("div",{class:"qn-title"},"密码",-1)),o("div",Na,[o("span",null,b(((pt=h(u).state.qnDetail)==null?void 0:pt.password)||"-"),1),a(v,{type:"text",size:"mini",onClick:s},{default:l(()=>n[16]||(n[16]=[m("修改")])),_:1,__:[16]})])]),o("div",Pa,[n[18]||(n[18]=o("div",{class:"qn-title"},"厂商",-1)),o("div",Aa,b(((ct=h(u).state.detail)==null?void 0:ct.vendor)||"-"),1)]),o("div",Ba,[n[19]||(n[19]=o("div",{class:"qn-title"},"创建时间",-1)),o("div",Fa,b(h(F)(((vt=h(u).state.qnDetail)==null?void 0:vt.createdAt)*1e3)),1)]),o("div",Ea,[n[20]||(n[20]=o("div",{class:"qn-title"},"最近心跳时间",-1)),o("div",Wa,b(h(F)(((yt=h(u).state.qnDetail)==null?void 0:yt.lastKeepaliveAt)*1e3)),1)]),o("div",Ka,[n[21]||(n[21]=o("div",{class:"qn-title"},"最近注册时间",-1)),o("div",ja,b(h(F)(((kt=h(u).state.qnDetail)==null?void 0:kt.lastRegisterAt)*1e3)),1)]),o("div",Qa,[n[22]||(n[22]=o("div",{class:"qn-title"},"设备位置",-1)),o("div",Za,b((bt=h(u).state.info)==null?void 0:bt.address_format),1)])]),o("div",Oa,[a(st,{longitude:(gt=h(u).state.info)==null?void 0:gt.longitude,latitude:(wt=h(u).state.info)==null?void 0:wt.latitude},null,8,["longitude","latitude"])])]),o("div",Ga,[n[25]||(n[25]=o("div",{class:"f16 fb mt10"},"设备配置状态",-1)),o("div",Ja,[(_(!0),y(N,null,P(i.value,(et,qt)=>(_(),y("div",{class:"qn-status-item",key:qt},[o("div",Xa,b(et.value_txt),1),o("div",tl,b(et.name),1)]))),128))])]),a(nt,{ref_key:"nameRef",ref:e,onSuccess:n[0]||(n[0]=et=>h(u).getInfo(h(u).state.live_id))},null,512),a(ut,{ref_key:"pwdRef",ref:p,onSuccess:n[1]||(n[1]=et=>h(u).getInfo(h(u).state.live_id))},null,512)])}}},al=R(el,[["__scopeId","data-v-72c8a53c"]]),ll={class:"qn-channel"},ol={class:"qn-total flex-c mt15"},sl={class:"count"},nl={class:"online"},il={class:"count"},dl={class:"offline"},rl={class:"count"},ul={__name:"QiniuChannel",emits:["preview"],setup(V,{emit:u}){const e=E(),p=u;function i(t){p("preview",t)}return(t,s)=>{const r=d("a-tag"),n=d("a-button"),f=d("a-table");return _(),y("div",ll,[a(f,{class:"kd-small-table",bordered:!1,data:h(e).state.channelList,columns:[{title:"通道国标ID",dataIndex:"gbId"},{title:"通道名称",dataIndex:"name"},{title:"通道状态",slotName:"state"},{title:"厂家",dataIndex:"vendor"},{title:"最近同步时间",slotName:"lastSyncAt"},{title:"操作",slotName:"action"}]},{state:l(({record:c})=>[c.state==="online"?(_(),I(r,{key:0,color:"#00CC66",size:"mini"},{default:l(()=>s[0]||(s[0]=[m("在线")])),_:1,__:[0]})):w("",!0),c.state==="offline"?(_(),I(r,{key:1,color:"gray",size:"mini"},{default:l(()=>s[1]||(s[1]=[m("离线")])),_:1,__:[1]})):w("",!0),c.state===""?(_(),I(r,{key:2,color:"gray",size:"mini"},{default:l(()=>s[2]||(s[2]=[m("未知")])),_:1,__:[2]})):w("",!0),c.state==="notReg"?(_(),I(r,{key:3,color:"#FF9933",size:"mini"},{default:l(()=>s[3]||(s[3]=[m("未注册")])),_:1,__:[3]})):w("",!0),c.state==="locked"?(_(),I(r,{key:4,color:"#FF3333",size:"mini"},{default:l(()=>s[4]||(s[4]=[m("锁定")])),_:1,__:[4]})):w("",!0)]),lastSyncAt:l(({record:c})=>[o("span",null,b(h(F)(c.lastSyncAt*1e3)),1)]),action:l(({record:c})=>[a(n,{type:"text",size:"mini",class:"ml-10",onClick:v=>i(c.gbId)},{default:l(()=>s[5]||(s[5]=[m("预览")])),_:2,__:[5]},1032,["onClick"])]),_:1},8,["data"]),o("div",ol,[o("span",null,[s[6]||(s[6]=m("通道总数：")),o("span",sl,b(h(e).state.channelTotal.all),1)]),o("span",nl,[s[7]||(s[7]=m("● 在线：")),o("span",il,b(h(e).state.channelTotal.online),1)]),o("span",dl,[s[8]||(s[8]=m("● 离线：")),o("span",rl,b(h(e).state.channelTotal.offline),1)])])])}}},ml=R(ul,[["__scopeId","data-v-38863db3"]]),_l={key:0,class:"preview-live-box"},fl={__name:"CqkdPreviewLive",props:{id:{type:String,default:"livePlayBox"},src:{type:String,default:""},autoplay:{type:Boolean,default:!1}},setup(V){const u=V,e=H({playType:""});return Ct(()=>u.src,p=>{if(e.playType="",!p)return"";p.includes(".m3u8")&&(e.playType="m3u8"),p.includes(".flv")&&(e.playType="flv")},{deep:!0,immediate:!0}),(p,i)=>e.playType?(_(),y("div",_l,[e.playType==="m3u8"?(_(),I(Zt,{key:0,autoplay:u.autoplay,id:u.id,src:u.src},null,8,["autoplay","id","src"])):w("",!0),e.playType==="flv"?(_(),I(Ot,{key:1,id:u.id,src:u.src},null,8,["id","src"])):w("",!0)])):w("",!0)}},rt=R(fl,[["__scopeId","data-v-7929201f"]]),pl={class:"qn-ptz"},cl={class:"qn-header flex"},vl={class:"channel-num"},yl={key:0},kl={key:1},bl={key:0},gl={key:1},wl={class:"qn-ptz-box flex mt15"},xl={class:"play-box"},hl={key:0,style:{width:"100%",height:"100%"}},$l={class:"play-box-view",id:"playBoxView"},Vl={key:0,class:"pv-status"},ql={key:1,class:"pv-status pv-error"},Il={class:"control-board-view"},Dl={class:"control-board flex"},Cl=["onMousedown"],Sl={key:1},Yl={class:"qn-ptz-option"},Hl={class:"flex",style:{gap:"35px"}},Ml={class:"play-url-box"},zl={class:"url-item"},Tl={class:"url-txt"},Ul={class:"url-item"},Ll={class:"url-txt"},Rl={class:"url-item"},Nl={class:"url-txt"},Pl={class:"preset-box mt15"},Al={class:"f14 fb flex-c mb10"},Bl={__name:"QiniuPtz",setup(V,{expose:u}){const e=E(),p=z(),i=H({loading:!1,play_type:1,controlBtn:[{icon:"ri-arrow-left-up-fill",at:"leftup"},{icon:"ri-arrow-up-fill",at:"up"},{icon:"ri-arrow-right-up-fill",at:"rightup"},{icon:"ri-arrow-left-fill",at:"left"},{icon:"",at:-1},{icon:"ri-arrow-right-fill",at:"right"},{icon:"ri-arrow-left-down-fill",at:"leftdown"},{icon:"ri-arrow-down-fill",at:"down"},{icon:"ri-arrow-right-down-fill",at:"rightdown"},{icon:"ri-subtract-line",at:"zoomout"},{icon:"",at:-1,text:"变倍"},{icon:"ri-add-line",at:"zoomin"}],preset:{loading:!1,list:[]},player:null,flowStatus:!1,errorCode:null,play_channel:"",record:{loading:!1,saving:!1,count:0,timer:0}});function t(){let S={id:e.state.live_id};e.state.detail.type===2&&(S.channels=e.state.channel_id),i.preset.loading=!0,Pt(S).then(x=>{var k;i.preset.loading=!1,i.preset.list=((k=x.data)==null?void 0:k.items)||[],i.preset.list.length||Y.warning("暂无预置位数据")}).catch(()=>{i.preset.loading=!1})}function s(S,x){let k={id:e.state.live_id,cmd:x,presetId:S};e.state.detail.type===2&&(k.channels=e.state.channel_id),ht(k).then(D=>{if(D.code!==200){Y.error(D.msg);return}x==="remove"&&(Y.success("删除成功"),t())})}const r=()=>p.value.show(e.state.live_id,e.state.channel_id);function n(){if(i.player)return!1;let S={id:e.state.live_id},x=e.state.webrtc;if(e.state.detail.type===2){if(!e.state.channel_id)return Y.warning("请先选择通道");S.channels=e.state.channel_id,i.play_channel=S.channels}i.loading=!0,Bt(S).then(k=>{if(k.code!==200){Y.error(k.msg),i.loading=!1;return}setTimeout(function(){xt({el:"playBoxView",webrtc:x},D=>{i.loading=!1,i.player=D,i.flowStatus=!0,i.errorCode=null},D=>{i.loading=!1,i.errorCode=D.code})},1e3)}).catch(()=>{i.loading=!1})}function f(){if(!i.player)return!1;$();let S={id:e.state.live_id};e.state.channel_id&&(S.channels=i.play_channel),At(S).then(x=>{if(i.flowStatus=!1,x.code===200){Y.success("已停止拉流");return}Y.error(x.msg)})}function c(S){S===1&&i.flowStatus?(i.loading=!0,setTimeout(function(){let x=e.state.webrtc;xt({el:"playBoxView",webrtc:x},k=>{i.loading=!1,i.player=k,i.flowStatus=!0,i.errorCode=null},k=>{i.loading=!1,i.errorCode=k.code})},1e3)):$()}function v(){e.getPlayUrl(),i.flowStatus&&f(),i.preset.list=[]}function $(){i.player&&(i.player.stop(),i.player.release(),i.player=null,i.errorCode=null)}function C(S){let x={id:e.state.live_id,cmd:S,speed:5};e.state.detail.type===2&&(x.channels=e.state.channel_id),Nt(x).then(k=>{})}function q(){let S={id:e.state.live_id};e.state.detail.type===2&&(S.channels=e.state.channel_id),Ut(S).then(x=>{if(x.code===200){Y.success("截图成功");return}Y.error(x.msg)})}function M(){let S={id:e.state.live_id};e.state.detail.type===2&&(S.channels=e.state.channel_id),i.record.loading=!0,Lt(S).then(x=>{if(x.code===200){i.record.timer=setInterval(()=>{i.record.count++},1e3);return}Y.error(x.msg)})}function L(){let S={id:e.state.live_id};e.state.detail.type===2&&(S.channels=e.state.channel_id),i.record.saving=!0,Rt(S).then(x=>{if(i.record.saving=!1,x.code===200){Y.success("已结束录制"),i.record.loading=!1,clearInterval(i.record.timer),i.record.timer=0,i.record.count=0;return}Y.error(x.msg)}).catch(()=>{i.record.saving=!1})}return St(()=>{$()}),u({changeChannel:v}),(S,x)=>{var j;const k=d("a-option"),D=d("a-select"),U=d("a-button"),Q=d("a-space"),Z=d("a-spin"),O=d("a-alert"),W=d("a-radio"),G=d("a-radio-group"),K=d("kd-copy"),J=d("a-popconfirm"),X=d("a-table");return _(),y("div",pl,[o("div",cl,[((j=h(e).state.detail)==null?void 0:j.type)===2?(_(),I(D,{key:0,modelValue:h(e).state.channel_id,"onUpdate:modelValue":x[0]||(x[0]=T=>h(e).state.channel_id=T),placeholder:"通道id",class:"w360",onChange:v},{default:l(()=>[(_(!0),y(N,null,P(h(e).state.channelList,(T,B)=>(_(),I(k,{key:B,value:T.gbId},{default:l(()=>[m(b(T.name),1),o("span",vl,"("+b(T.gbId)+")",1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])):w("",!0),a(Q,null,{default:l(()=>[a(U,{type:"primary",onClick:q},{default:l(()=>x[3]||(x[3]=[m("截取当前画面")])),_:1,__:[3]}),a(U,{type:"primary",onClick:M,loading:i.record.loading},{default:l(()=>[i.record.loading?(_(),y("span",kl,"正在录制("+b(i.record.count)+"s)...",1)):(_(),y("span",yl,"开始录制"))]),_:1},8,["loading"]),i.record.loading?(_(),I(U,{key:0,type:"primary",onClick:L,loading:i.record.saving},{default:l(()=>[i.record.saving?(_(),y("span",gl,"结束中...")):(_(),y("span",bl,"结束录制"))]),_:1},8,["loading"])):w("",!0)]),_:1})]),o("div",wl,[o("div",xl,[i.play_type===1?(_(),y("div",hl,[a(Z,{loading:i.loading,style:{width:"100%",height:"100%"},tip:"监控加载中..."},{default:l(()=>[o("div",$l,[!i.loading&&!i.flowStatus?(_(),y("div",Vl,"离线")):w("",!0),i.errorCode?(_(),y("div",ql,b(h(Gt).qiuNiuSdkError[i.errorCode]),1)):w("",!0)])]),_:1},8,["loading"])])):i.play_type===3?(_(),I(rt,{key:1,src:h(e).state.hls,autoplay:!0},null,8,["src"])):(_(),I(rt,{key:2,src:h(e).state.flv},null,8,["src"]))]),o("div",Il,[a(O,{type:"warning"},{default:l(()=>x[4]||(x[4]=[o("div",null," PTZ操作使用WebRTC播放体验最佳，操作后预计延迟 5 秒左右可以看到操作后画面 ",-1),o("div",null," HLS和FLV播放PTZ操作延迟较高，不建议使用。 ",-1)])),_:1,__:[4]}),o("div",Dl,[(_(!0),y(N,null,P(i.controlBtn,(T,B)=>(_(),y("div",{class:"cb-item",key:B,onMousedown:tt=>C(T.at),onMouseup:x[1]||(x[1]=tt=>C("stop"))},[T.icon?(_(),y("i",{key:0,class:lt(["ri-icon",T.icon])},null,2)):w("",!0),T.text?(_(),y("span",Sl,b(T.text),1)):w("",!0)],40,Cl))),128))])])]),o("div",Yl,[a(G,{modelValue:i.play_type,"onUpdate:modelValue":x[2]||(x[2]=T=>i.play_type=T),type:"button",onChange:c},{default:l(()=>[a(W,{value:1},{default:l(()=>x[5]||(x[5]=[m("webrtc")])),_:1,__:[5]}),a(W,{value:3},{default:l(()=>x[6]||(x[6]=[m("HLS")])),_:1,__:[6]}),a(W,{value:2},{default:l(()=>x[7]||(x[7]=[m("FLV")])),_:1,__:[7]})]),_:1},8,["modelValue"]),i.flowStatus?w("",!0):(_(),I(U,{key:0,type:"primary",disabled:i.play_type===2,class:"ml10",onClick:n,loading:i.loading},{default:l(()=>x[8]||(x[8]=[m(" 启动拉流 ")])),_:1,__:[8]},8,["disabled","loading"])),i.flowStatus?(_(),I(U,{key:1,type:"primary",disabled:i.play_type===2,class:"ml10",onClick:f},{default:l(()=>x[9]||(x[9]=[m(" 停止拉流 ")])),_:1,__:[9]},8,["disabled"])):w("",!0)]),o("div",Hl,[o("div",Ml,[x[13]||(x[13]=o("div",{class:"f14 fb flex-c mb10"},[o("span",{class:"mr10"},"播放地址")],-1)),o("div",zl,[x[10]||(x[10]=o("div",null,"HLS：",-1)),o("div",Tl,[m(b(h(e).state.hls)+" ",1),a(K,{value:h(e).state.hls,class:"ml10"},null,8,["value"])])]),o("div",Ul,[x[11]||(x[11]=o("div",null,"FLV：",-1)),o("div",Ll,[m(b(h(e).state.flv)+" ",1),a(K,{value:h(e).state.flv,class:"ml10"},null,8,["value"])])]),o("div",Rl,[x[12]||(x[12]=o("div",null,"WebRTC：",-1)),o("div",Nl,[m(b(h(e).state.webrtc)+" ",1),a(K,{value:h(e).state.webrtc,class:"ml10"},null,8,["value"])])])]),o("div",Pl,[o("div",Al,[x[15]||(x[15]=o("span",{class:"mr10"},"预置位",-1)),a(U,{size:"mini",onClick:r},{default:l(()=>x[14]||(x[14]=[o("i",{class:"ri-add-line"},null,-1),m("新增预置位")])),_:1,__:[14]})]),a(X,{class:"kd-small-table",pagination:!1,bordered:!1,data:i.preset.list,columns:[{title:"ID",dataIndex:"id",width:100},{title:"预置位名称",dataIndex:"name"},{title:"操作",slotName:"action"}],loading:i.preset.loading},{action:l(({record:T})=>[a(U,{type:"text",size:"mini",class:"ml-10",onClick:B=>s(T.id,"goto")},{default:l(()=>x[16]||(x[16]=[m("调用")])),_:2,__:[16]},1032,["onClick"]),a(J,{content:"确认删除预置位吗？"},{default:l(()=>[a(U,{type:"text",size:"mini",onClick:B=>s(T.id,"remove")},{default:l(()=>x[17]||(x[17]=[m("删除")])),_:2,__:[17]},1032,["onClick"])]),_:2},1024)]),empty:l(()=>[o("div",{class:"preset-none"},[o("span",{onClick:t},"点击获取预置位")])]),_:1},8,["data","loading"])])]),a(it,{ref_key:"presetRef",ref:p,onSuccess:t},null,512)])}}},Fl=R(Bl,[["__scopeId","data-v-13367366"]]),El={class:"qn-screenshot"},Wl={class:"channel-num"},Kl={class:"screenshot-list flex mt15"},jl={class:"time flex-cb mt5"},Ql={class:"f12"},Zl={key:0,class:"get-more mt10"},Ol={key:1,class:"no-more"},Gl={__name:"QiniuScreenshot",setup(V,{expose:u}){const e=E();ot();const p=z(),i=H({loading:!1,search:{time:[]},rangeShortcuts:[{label:"最近七日",value:()=>[g().subtract(7,"day"),g()]},{label:"最近一个月",value:()=>[g().subtract(1,"month"),g()]},{label:"最近三个月",value:()=>[g().subtract(3,"month"),g()]},{label:"最近一年",value:()=>[g().subtract(1,"year"),g()]}],info:{page:1,count:0,list:[],limit:20,marker:""}});A(()=>{i.info.limit=Math.floor((window.innerWidth-250)/230)*3,i.search.time=[g().subtract(1,"day").format("YYYY-MM-DD HH:mm"),g().format("YYYY-MM-DD HH:mm")]});function t(n){let f={line:i.info.limit,type:2,id:e.state.live_id,start:new Date(i.search.time[0]).getTime()/1e3,end:new Date(i.search.time[1]).getTime()/1e3,marker:i.info.marker};e.state.channel_id&&(f.channels=e.state.channel_id),i.loading=!0,Ft(f).then(c=>{if(i.loading=!1,c.code===200){n===1?i.info.list=c.data.items||[]:i.info.list=i.info.list.concat(c.data.items||[]),i.info.marker=c.data.marker||"";return}Y.error(c.msg)}).catch(c=>{Y.error(c.msg),i.loading=!1})}function s(n,f){let c={id:e.state.live_id,file:n.file};e.state.channel_id&&(c.channels=e.state.channel_id),Et(c).then(v=>{if(v.code===200){Y.success("删除成功"),i.info.list.splice(f,1);return}Y.error(v.msg)})}const r=()=>p.value.show(e.state.live_id,e.state.channel_id,1);return u({getList:t}),(n,f)=>{const c=d("a-option"),v=d("a-select"),$=d("a-range-picker"),C=d("a-button"),q=d("a-space"),M=d("a-image"),L=d("a-popconfirm"),S=d("kd-empty"),x=d("a-spin");return _(),y("div",El,[a(q,null,{default:l(()=>{var k;return[((k=h(e).state.detail)==null?void 0:k.type)===2?(_(),I(v,{key:0,modelValue:h(e).state.channel_id,"onUpdate:modelValue":f[0]||(f[0]=D=>h(e).state.channel_id=D),placeholder:"通道id",class:"w320"},{default:l(()=>[(_(!0),y(N,null,P(h(e).state.channelList,(D,U)=>(_(),I(c,{key:U,value:D.gbId},{default:l(()=>[m(b(D.name),1),o("span",Wl,"("+b(D.gbId)+")",1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])):w("",!0),a($,{showTime:"",class:"w360","shortcuts-position":"left",format:"YYYY-MM-DD HH:mm",modelValue:i.search.time,"onUpdate:modelValue":f[1]||(f[1]=D=>i.search.time=D),"allow-clear":!1,shortcuts:i.rangeShortcuts},null,8,["modelValue","shortcuts"]),a(C,{type:"primary",onClick:f[2]||(f[2]=D=>t(1,i.info.limit))},{default:l(()=>f[4]||(f[4]=[m("查询")])),_:1,__:[4]}),a(C,{onClick:r},{default:l(()=>f[5]||(f[5]=[m("配置自动截图")])),_:1,__:[5]})]}),_:1}),a(x,{loading:i.loading,tip:"数据加载中...",style:{width:"100%"}},{default:l(()=>[o("div",Kl,[i.info.list.length?(_(!0),y(N,{key:0},P(i.info.list,(k,D)=>(_(),y("div",{class:"screent-item",key:D},[a(M,{class:"img",width:"220",src:k.snap},null,8,["src"]),o("div",jl,[o("span",Ql,b(h(F)(k.time*1e3)),1),a(L,{content:"确认删除截图吗？",onOk:U=>s(k,D)},{default:l(()=>[a(C,{type:"text",size:"mini"},{default:l(()=>f[6]||(f[6]=[m("删除")])),_:1,__:[6]})]),_:2},1032,["onOk"])])]))),128)):(_(),I(S,{key:1,height:300}))]),i.info.length>i.info.limit||i.info.marker?(_(),y("div",Zl,[i.info.marker?(_(),y("span",{key:0,onClick:f[3]||(f[3]=k=>t())},"加载更多")):(_(),y("span",Ol,"没有更多了"))])):w("",!0)]),_:1},8,["loading"]),a(dt,{ref_key:"autoRef",ref:p},null,512)])}}},Jl=R(Gl,[["__scopeId","data-v-71cd62cb"]]),Xl={key:0},to={class:"tips mt5"},eo={class:"tips mt5"},ao={class:"tips mt5"},lo={__name:"CqkdAutoRecording",setup(V,{expose:u}){const e=H({show:!1,form:{type:2,monitor_id:0,channels:"",op_type:1,day:null,week:"",date:"",time:"",recording_duration:null,status:0}});async function p(t,s){e.show=!0;let r={monitor_id:t,channels:s||"",type:2},n=null,f=await $t(r);f.code===200&&f.data&&(n=f.data);let c=null,v="",$="",C="";if(n){if(n.op_type===1){let q=n.op_value.split(",");c=parseInt(q[0]),C=q[1]}if(n.op_type===2){let q=n.op_value.split(",");v=parseInt(q[0]),C=q[1]}n.op_type===3&&($=n.op_value)}e.form={type:2,monitor_id:t,channels:s||"",op_type:n?n.op_type:1,day:c,week:v,date:$,time:C,status:n?n.status:0,recording_duration:n?n.recording_duration:null}}async function i(){let{op_type:t,day:s,week:r,date:n,time:f}=e.form,c={type:e.form.type,monitor_id:e.form.monitor_id,channels:e.form.channels,op_type:t,status:e.form.status,recording_duration:e.form.recording_duration,op_value:""};if(t===1){if(!s||!f)return Y.warning("请输入截图时间"),!1;c.op_value=`${s},${f}`}if(t===2){if(!r||!f)return Y.warning("请选择截图时间"),!1;c.op_value=`${r},${f}`}if(t===3){if(!n)return Y.warning("请选择截图时间"),!1;c.op_value=n}let v=await Vt(c);return v.code===200?(Y.success("配置保存成功"),!0):(Y.error(v.msg),!1)}return u({show:p}),(t,s)=>{const r=d("a-radio"),n=d("a-radio-group"),f=d("a-form-item"),c=d("a-input"),v=d("a-time-picker"),$=d("a-space"),C=d("a-option"),q=d("a-select"),M=d("a-date-picker"),L=d("a-input-number"),S=d("a-switch"),x=d("a-form"),k=d("a-modal");return e.show?(_(),y("div",Xl,[a(k,{title:"自动录制配置",visible:e.show,"onUpdate:visible":s[8]||(s[8]=D=>e.show=D),width:"500px","on-before-ok":i},{default:l(()=>[a(x,{model:e.form,ref:"formRef","label-col-props":{flex:"100px"},"wrapper-col-props":{flex:1}},{default:l(()=>[a(f,{label:"录制周期"},{default:l(()=>[a(n,{modelValue:e.form.op_type,"onUpdate:modelValue":s[0]||(s[0]=D=>e.form.op_type=D)},{default:l(()=>[a(r,{value:1},{default:l(()=>s[9]||(s[9]=[m("每天")])),_:1,__:[9]}),a(r,{value:2},{default:l(()=>s[10]||(s[10]=[m("每周")])),_:1,__:[10]}),a(r,{value:3},{default:l(()=>s[11]||(s[11]=[m("固定时间点")])),_:1,__:[11]})]),_:1},8,["modelValue"])]),_:1}),e.form.op_type===1?(_(),I(f,{key:0,label:"每天录制"},{default:l(()=>[o("div",null,[a($,null,{default:l(()=>[a(c,{modelValue:e.form.day,"onUpdate:modelValue":s[1]||(s[1]=D=>e.form.day=D),placeholder:"请输入"},{prepend:l(()=>s[12]||(s[12]=[m("每")])),append:l(()=>s[13]||(s[13]=[m("天")])),_:1},8,["modelValue"]),a(v,{modelValue:e.form.time,"onUpdate:modelValue":s[2]||(s[2]=D=>e.form.time=D),class:"w160",format:"HH:mm"},null,8,["modelValue"])]),_:1}),o("div",to,"每"+b(e.form.day)+"天 "+b(e.form.time)+"录制一次",1)])]),_:1})):w("",!0),e.form.op_type===2?(_(),I(f,{key:1,label:"每周录制"},{default:l(()=>[o("div",null,[a($,null,{default:l(()=>[a(q,{placeholder:"请选择",modelValue:e.form.week,"onUpdate:modelValue":s[3]||(s[3]=D=>e.form.week=D)},{default:l(()=>[a(C,{value:1},{default:l(()=>s[14]||(s[14]=[m("周一")])),_:1,__:[14]}),a(C,{value:2},{default:l(()=>s[15]||(s[15]=[m("周二")])),_:1,__:[15]}),a(C,{value:3},{default:l(()=>s[16]||(s[16]=[m("周三")])),_:1,__:[16]}),a(C,{value:4},{default:l(()=>s[17]||(s[17]=[m("周四")])),_:1,__:[17]}),a(C,{value:5},{default:l(()=>s[18]||(s[18]=[m("周五")])),_:1,__:[18]}),a(C,{value:6},{default:l(()=>s[19]||(s[19]=[m("周六")])),_:1,__:[19]}),a(C,{value:7},{default:l(()=>s[20]||(s[20]=[m("周日")])),_:1,__:[20]})]),_:1},8,["modelValue"]),a(v,{modelValue:e.form.time,"onUpdate:modelValue":s[4]||(s[4]=D=>e.form.time=D),class:"w160",format:"HH:mm"},null,8,["modelValue"])]),_:1}),o("div",eo,"每周"+b(e.form.week)+b(e.form.time)+"录制一次",1)])]),_:1})):w("",!0),e.form.op_type===3?(_(),I(f,{key:2,label:"固定时间"},{default:l(()=>[o("div",null,[a(M,{modelValue:e.form.date,"onUpdate:modelValue":s[5]||(s[5]=D=>e.form.date=D),"show-time":"",format:"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"]),o("div",ao,b(e.form.date)+"录制一次",1)])]),_:1})):w("",!0),a(f,{label:"录制时长"},{default:l(()=>[a(L,{modelValue:e.form.recording_duration,"onUpdate:modelValue":s[6]||(s[6]=D=>e.form.recording_duration=D),class:"w200",min:5,placeholder:"请输入录制时长"},{append:l(()=>s[21]||(s[21]=[m("秒")])),_:1},8,["modelValue"])]),_:1}),a(f,{label:"是否启用"},{default:l(()=>[a(S,{modelValue:e.form.status,"onUpdate:modelValue":s[7]||(s[7]=D=>e.form.status=D),"checked-value":1,"unchecked-value":0,"checked-text":"启用","unchecked-text":"禁用"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])])):w("",!0)}}},oo={class:"hk-recording"},so={class:"channel-num"},no=["src"],io={key:0},ro={key:1},uo={key:2},mo={class:"get-more mt10"},_o={key:1,class:"no-more"},fo={__name:"QiniuRecording",setup(V,{expose:u}){const e=E(),p=z(),i=z(),t=H({loading:!1,search:{time:[]},rangeShortcuts:[{label:"最近七日",value:()=>[g().subtract(7,"day"),g()]},{label:"最近一个月",value:()=>[g().subtract(1,"month"),g()]},{label:"最近三个月",value:()=>[g().subtract(3,"month"),g()]},{label:"最近一年",value:()=>[g().subtract(1,"year"),g()]}],info:{page:1,count:0,list:[],limit:10,marker:""}});A(()=>{t.search.time=[g().subtract(1,"day").format("YYYY-MM-DD HH:mm"),g().format("YYYY-MM-DD HH:mm")]});function s(c){let v={id:e.state.live_id,start_time:new Date(t.search.time[0]).getTime()/1e3,end_time:new Date(t.search.time[1]).getTime()/1e3,line:t.info.limit,marker:t.info.marker};e.state.channel_id&&(v.channels=e.state.channel_id),t.loading=!0,Wt(v).then($=>{if(t.loading=!1,$.code===200){c===1?t.info.list=$.data.items||[]:t.info.list=t.info.list.concat($.data.items||[]),t.info.marker=$.data.marker||"";return}Y.error($.msg)}).catch($=>{Y.error($.msg),t.loading=!1})}const r=()=>p.value.show(e.state.live_id,e.state.channel_id),n=c=>{i.value.show({hls:c.url})};function f(c,v){let $={id:e.state.live_id,file:c.file};e.state.channel_id&&($.channels=e.state.channel_id),Kt($).then(C=>{if(C.code===200){Y.success("删除成功"),t.info.list.splice(v,1);return}Y.error(C.msg)})}return u({getList:s}),(c,v)=>{const $=d("a-option"),C=d("a-select"),q=d("a-range-picker"),M=d("a-button"),L=d("a-space"),S=d("a-popconfirm"),x=d("a-table");return _(),y("div",oo,[a(L,null,{default:l(()=>{var k;return[((k=h(e).state.detail)==null?void 0:k.type)===2?(_(),I(C,{key:0,modelValue:h(e).state.channel_id,"onUpdate:modelValue":v[0]||(v[0]=D=>h(e).state.channel_id=D),placeholder:"通道id",class:"w320"},{default:l(()=>[(_(!0),y(N,null,P(h(e).state.channelList,(D,U)=>(_(),I($,{key:U,value:D.gbId},{default:l(()=>[m(b(D.name),1),o("span",so,"("+b(D.gbId)+")",1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])):w("",!0),a(q,{showTime:"",class:"w360","shortcuts-position":"left",format:"YYYY-MM-DD HH:mm",modelValue:t.search.time,"onUpdate:modelValue":v[1]||(v[1]=D=>t.search.time=D),"allow-clear":!1,shortcuts:t.rangeShortcuts},null,8,["modelValue","shortcuts"]),a(M,{type:"primary",onClick:v[2]||(v[2]=D=>s(1,t.info.limit))},{default:l(()=>v[4]||(v[4]=[m("查询")])),_:1,__:[4]}),a(M,{onClick:r},{default:l(()=>v[5]||(v[5]=[m("配置自动录制")])),_:1,__:[5]})]}),_:1}),a(x,{class:"mt15 kd-small-table",pagination:!1,bordered:!1,data:t.info.list,columns:[{title:"视频封面",slotName:"snap"},{title:"视频格式",slotName:"format"},{title:"类型",slotName:"type"},{title:"录制起止时间",slotName:"time"},{title:"操作",slotName:"action"}],loading:t.loading},{snap:l(({record:k})=>[o("img",{style:{width:"100px",height:"60px"},src:k.snap,alt:""},null,8,no)]),format:l(({record:k})=>[k.format===1?(_(),y("span",io,"M3U8")):w("",!0),k.format===2?(_(),y("span",ro,"FLV")):w("",!0),k.format===3?(_(),y("span",uo,"MP4")):w("",!0)]),type:l(({record:k})=>[o("span",null,b(k.type==="realTime"?"实时流":"历史流"),1)]),time:l(({record:k})=>[o("div",null,"起："+b(h(F)(k.start*1e3)),1),o("div",null,"止："+b(h(F)(k.end*1e3)),1)]),action:l(({record:k,rowIndex:D})=>[a(M,{type:"text",size:"mini",class:"ml-10",onClick:U=>n(k)},{default:l(()=>v[6]||(v[6]=[m("播放")])),_:2,__:[6]},1032,["onClick"]),a(S,{content:"确认删除视频吗？",onOk:U=>f(k,D)},{default:l(()=>[a(M,{type:"text",size:"mini",class:"ml-10"},{default:l(()=>v[7]||(v[7]=[m("删除")])),_:1,__:[7]})]),_:2},1032,["onOk"])]),_:1},8,["data","loading"]),o("div",mo,[t.info.marker?(_(),y("span",{key:0,onClick:v[3]||(v[3]=k=>s())},"加载更多")):(_(),y("span",_o,"没有更多了"))]),a(lo,{ref_key:"autoRef",ref:p},null,512),a(Jt,{ref_key:"previewRef",ref:i},null,512)])}}},po=R(fo,[["__scopeId","data-v-42a04720"]]),co={__name:"CqkdQiniuDetail",setup(V){const u=E(),e=z(),p=z(),i=z(),t=H({active:"1"});async function s(n){var f,c;n==="2"&&u.getChannel(),n==="4"&&(!u.state.channelList.length&&((f=u.state.detail)==null?void 0:f.type)===2&&await u.getChannel(),e.value.getList(1)),n==="5"&&(!u.state.channelList.length&&((c=u.state.detail)==null?void 0:c.type)===2&&await u.getChannel(),p.value.getList(1))}function r(n){u.state.channel_id=n,t.active="3",setTimeout(()=>{i.value.changeChannel()})}return(n,f)=>{const c=d("a-tab-pane"),v=d("a-tabs");return _(),y("div",null,[a(v,{"active-key":t.active,"onUpdate:activeKey":f[0]||(f[0]=$=>t.active=$),onChange:s},{default:l(()=>{var $;return[a(c,{key:"1",title:"基本信息"},{default:l(()=>[a(al)]),_:1}),(($=h(u).state.detail)==null?void 0:$.type)===2?(_(),I(c,{key:"2",title:"通道列表"},{default:l(()=>[a(ml,{onPreview:r})]),_:1})):w("",!0),a(c,{key:"3",title:"云台控制"},{default:l(()=>[a(Fl,{ref_key:"ptzRef",ref:i},null,512)]),_:1}),a(c,{key:"4",title:"截图管理"},{default:l(()=>[a(Jl,{ref_key:"screenshotRef",ref:e},null,512)]),_:1}),a(c,{key:"5",title:"录制视频"},{default:l(()=>[a(po,{ref_key:"recordRef",ref:p},null,512)]),_:1})]}),_:1},8,["active-key"])])}}},vo={class:"al-page"},yo={class:"al-box flex"},ko={class:"al-info"},bo={class:"al-info-item flex-c"},go={class:"al-value"},wo={class:"al-info-item flex-c"},xo={class:"al-value"},ho={class:"al-info-item flex-c"},$o={class:"al-value"},Vo={class:"al-info-item flex-c"},qo={class:"al-value"},Io={class:"hk-address"},Do={class:"al-status-box"},Co={class:"al-status flex mt10"},So={class:"si-val"},Yo={class:"si-title"},Ho={__name:"AliyunBaseInfo",setup(V){const u=z(),e=z(),p=H({statusList:[{name:"自动启动流",value:0,value_txt:"开启"},{name:"设备是否启用",value:0,value_txt:"开启"},{name:"位置订阅",value:0,value_txt:"开启"}]}),i=()=>u.value.show(),t=()=>e.value.show();return(s,r)=>{const n=d("a-tag"),f=d("a-button"),c=d("kd-copy");return _(),y("div",vo,[o("div",yo,[o("div",ko,[r[10]||(r[10]=o("div",{class:"f16 fb"},"设备基本信息",-1)),o("div",bo,[r[1]||(r[1]=o("div",{class:"al-title"},"设备状态",-1)),o("div",go,[a(n,{color:"#00CC66",size:"mini"},{default:l(()=>r[0]||(r[0]=[m("在线")])),_:1,__:[0]})])]),o("div",wo,[r[4]||(r[4]=o("div",{class:"al-title"},"设备名称",-1)),o("div",xo,[r[3]||(r[3]=m("坤典科技测试设备 ")),a(f,{type:"text",size:"mini",onClick:i},{default:l(()=>r[2]||(r[2]=[m("修改")])),_:1,__:[2]})])]),r[11]||(r[11]=at('<div class="al-info-item flex-c" data-v-a65bc457><div class="al-title" data-v-a65bc457>设备类型</div><div class="al-value" data-v-a65bc457>摄像头</div></div><div class="al-info-item flex-c" data-v-a65bc457><div class="al-title" data-v-a65bc457>设备序列号</div><div class="al-value" data-v-a65bc457>7D0*****4C0</div></div>',2)),o("div",ho,[r[6]||(r[6]=o("div",{class:"al-title"},"设备国标 ID",-1)),o("div",$o,[r[5]||(r[5]=m(" 31000000****00000002 ")),a(c)])]),r[12]||(r[12]=at('<div class="al-info-item flex-c" data-v-a65bc457><div class="al-title" data-v-a65bc457>设备端口</div><div class="al-value" data-v-a65bc457>8080</div></div><div class="al-info-item flex-c" data-v-a65bc457><div class="al-title" data-v-a65bc457>设备 IP</div><div class="al-value" data-v-a65bc457>10.10.10.10</div></div><div class="al-info-item flex-c" data-v-a65bc457><div class="al-title" data-v-a65bc457>用户名</div><div class="al-value" data-v-a65bc457>admin</div></div>',3)),o("div",Vo,[r[9]||(r[9]=o("div",{class:"al-title"},"密码",-1)),o("div",qo,[r[8]||(r[8]=o("span",null,"123456",-1)),a(f,{type:"text",size:"mini",onClick:t},{default:l(()=>r[7]||(r[7]=[m("修改")])),_:1,__:[7]})])]),r[13]||(r[13]=at('<div class="al-info-item flex-c" data-v-a65bc457><div class="al-title" data-v-a65bc457>设备描述</div><div class="al-value" data-v-a65bc457>-</div></div><div class="al-info-item flex-c" data-v-a65bc457><div class="al-title" data-v-a65bc457>设备厂商</div><div class="al-value" data-v-a65bc457>大华</div></div><div class="al-info-item flex-c" data-v-a65bc457><div class="al-title" data-v-a65bc457>设备注册协议</div><div class="al-value" data-v-a65bc457>gb28181</div></div><div class="al-info-item flex-c" data-v-a65bc457><div class="al-title" data-v-a65bc457>创建时间</div><div class="al-value" data-v-a65bc457>2024-10-15 14:05:42</div></div><div class="al-info-item flex-c" data-v-a65bc457><div class="al-title" data-v-a65bc457>注册时间</div><div class="al-value" data-v-a65bc457>2024-10-15 14:05:42</div></div><div class="al-info-item flex-c" data-v-a65bc457><div class="al-title" data-v-a65bc457>设备位置</div><div class="al-value" data-v-a65bc457>重庆市渝北区</div></div>',6))]),o("div",Io,[a(st)])]),o("div",Do,[r[14]||(r[14]=o("div",{class:"f16 fb mt10"},"设备配置状态",-1)),o("div",Co,[(_(!0),y(N,null,P(p.statusList,(v,$)=>(_(),y("div",{class:"al-status-item",key:$},[o("div",So,b(v.value_txt),1),o("div",Yo,b(v.name),1)]))),128))])]),a(nt,{ref_key:"nameRef",ref:u},null,512),a(ut,{ref_key:"pwdRef",ref:e},null,512)])}}},Mo=R(Ho,[["__scopeId","data-v-a65bc457"]]),zo={class:"al-channel"},To={key:0},Uo={__name:"AliyunChannel",setup(V){const u=H({list:[{StreamStatus:"off",GbId:"3100000****000000002",Params:{},DeviceId:"348*****380-cn-qingdao",ChannelId:0,DeviceStatus:"on",Name:"通道1",StreamId:"323*****997-cn-qingdao"},{StreamStatus:"off",GbId:"3100000****000000002",Params:{},DeviceId:"348*****380-cn-qingdao",ChannelId:0,DeviceStatus:"on",Name:"通道1",StreamId:"323*****997-cn-qingdao"}],form:{show:!1,name:""}});return(e,p)=>{const i=d("a-tag"),t=d("a-button"),s=d("a-popconfirm"),r=d("a-table"),n=d("a-input"),f=d("a-modal");return _(),y("div",zo,[a(r,{class:"kd-small-table",pagination:!1,bordered:!1,data:u.list,columns:[{title:"国标 ID",dataIndex:"GbId",width:230},{title:"通道名称",slotName:"Name"},{title:"通道 ID",dataIndex:"ChannelId"},{title:"流 ID",dataIndex:"StreamId"},{title:"流状态",slotName:"StreamStatus"},{title:"操作",slotName:"action"}],loading:u.loading},{Name:l(({record:c})=>[o("span",null,b(c.Name),1),o("span",{class:"kd-link ml10",onClick:p[0]||(p[0]=v=>u.form.show=!0)},p[3]||(p[3]=[o("i",{class:"ri-edit-line"},null,-1)]))]),StreamStatus:l(({record:c})=>[c.StreamStatus==="on"?(_(),I(i,{key:0,color:"#00CC66",size:"mini"},{default:l(()=>p[4]||(p[4]=[m("在线")])),_:1,__:[4]})):(_(),I(i,{key:1,color:"#999",size:"mini"},{default:l(()=>p[5]||(p[5]=[m("离线")])),_:1,__:[5]}))]),action:l(({record:c})=>[a(s,{content:"确认删除通道吗？"},{default:l(()=>[a(t,{type:"text",size:"mini",class:"ml-10"},{default:l(()=>p[6]||(p[6]=[m("删除")])),_:1,__:[6]})]),_:1})]),_:1},8,["data","loading"]),u.form.show?(_(),y("div",To,[a(f,{title:"修改通道名称",visible:u.form.show,"onUpdate:visible":p[2]||(p[2]=c=>u.form.show=c),width:"400px","on-before-ok":e.saveData},{default:l(()=>[a(n,{modelValue:u.form.name,"onUpdate:modelValue":p[1]||(p[1]=c=>u.form.name=c),placeholder:"请输入通道名称"},null,8,["modelValue"])]),_:1},8,["visible","on-before-ok"])])):w("",!0)])}}},Lo={class:"al-ptz"},Ro={class:"al-header flex"},No={class:"al-ptz-box flex mt15"},Po={class:"control-board flex"},Ao={key:1},Bo={class:"preset-box mt15"},Fo={class:"f14 fb flex-c mb10"},Eo={__name:"AliyunPtz",setup(V){const u=z(),e=H({play_type:1,controlBtn:[{icon:"ri-arrow-left-up-fill",at:4},{icon:"ri-arrow-up-fill",at:0},{icon:"ri-arrow-right-up-fill",at:6},{icon:"ri-arrow-left-fill",at:2},{icon:"",at:-1},{icon:"ri-arrow-right-fill",at:3},{icon:"ri-arrow-left-down-fill",at:5},{icon:"ri-arrow-down-fill",at:1},{icon:"ri-arrow-right-down-fill",at:7},{icon:"ri-subtract-line",at:9},{icon:"",at:-1,text:"变倍"},{icon:"ri-add-line",at:8},{icon:"ri-subtract-line",at:11},{icon:"",at:-1,text:"变焦"},{icon:"ri-add-line",at:10}],presetData:[{id:1,name:"前方",channelNo:1},{id:2,name:"前方2",channelNo:1}]}),p=()=>u.value.show();return(i,t)=>{const s=d("a-option"),r=d("a-select"),n=d("a-button"),f=d("a-radio"),c=d("a-radio-group"),v=d("a-space"),$=d("a-popconfirm"),C=d("a-table");return _(),y("div",Lo,[o("div",Ro,[a(r,{placeholder:"选择通道",class:"w240"},{default:l(()=>[a(s,null,{default:l(()=>t[1]||(t[1]=[m("My(427734222)427734222")])),_:1,__:[1]}),a(s,null,{default:l(()=>t[2]||(t[2]=[m("My(427734222)427734221")])),_:1,__:[2]})]),_:1}),a(v,null,{default:l(()=>[a(n,{type:"primary"},{default:l(()=>t[3]||(t[3]=[m("截取当前画面")])),_:1,__:[3]}),a(n,{type:"primary"},{default:l(()=>t[4]||(t[4]=[m("开始录制")])),_:1,__:[4]}),a(c,{modelValue:e.play_type,"onUpdate:modelValue":t[0]||(t[0]=q=>e.play_type=q),type:"button"},{default:l(()=>[a(f,{value:1},{default:l(()=>t[5]||(t[5]=[m("webrtc")])),_:1,__:[5]}),a(f,{value:2},{default:l(()=>t[6]||(t[6]=[m("flv直播流")])),_:1,__:[6]})]),_:1},8,["modelValue"])]),_:1})]),o("div",No,[t[7]||(t[7]=o("div",{class:"play-box"},null,-1)),o("div",Po,[(_(!0),y(N,null,P(e.controlBtn,(q,M)=>(_(),y("div",{class:"cb-item",key:M},[q.icon?(_(),y("i",{key:0,class:lt(["ri-icon",q.icon])},null,2)):w("",!0),q.text?(_(),y("span",Ao,b(q.text),1)):w("",!0)]))),128))])]),o("div",Bo,[o("div",Fo,[t[9]||(t[9]=o("span",{class:"mr10"},"预置位",-1)),a(n,{size:"mini",onClick:p},{default:l(()=>t[8]||(t[8]=[o("i",{class:"ri-add-line"},null,-1),m("新增预置位")])),_:1,__:[8]})]),a(C,{class:"kd-small-table",pagination:!1,bordered:!1,data:e.presetData,columns:[{title:"ID",dataIndex:"id",width:100},{title:"预置位名称",dataIndex:"name"},{title:"操作",slotName:"action"}]},{action:l(({record:q})=>[a(n,{type:"text",size:"mini",class:"ml-10"},{default:l(()=>t[10]||(t[10]=[m("调用")])),_:1,__:[10]}),a($,{content:"确认删除预置位吗？"},{default:l(()=>[a(n,{type:"text",size:"mini"},{default:l(()=>t[11]||(t[11]=[m("删除")])),_:1,__:[11]})]),_:1})]),_:1},8,["data"])]),a(it,{ref_key:"presetRef",ref:u},null,512)])}}},Wo=R(Eo,[["__scopeId","data-v-1ecc512d"]]),Ko={class:"al-screenshot"},jo={class:"screenshot-list flex mt15"},Qo={class:"time flex-cb mt5"},Zo={__name:"AliyunScreenshot",setup(V){ot();const u=z(),e=H({search:{time:[]},rangeShortcuts:[{label:"最近七日",value:()=>[g().subtract(7,"day"),g()]},{label:"最近一个月",value:()=>[g().subtract(1,"month"),g()]},{label:"最近三个月",value:()=>[g().subtract(3,"month"),g()]},{label:"最近一年",value:()=>[g().subtract(1,"year"),g()]}],info:{page:1,count:0,list:[],limit:20}});A(()=>{e.info.limit=Math.floor((window.innerWidth-250)/230)*3,e.search.time=[g().subtract(1,"day").format("YYYY-MM-DD HH:mm"),g().format("YYYY-MM-DD HH:mm")]});const p=()=>u.value.show();return(i,t)=>{const s=d("a-range-picker"),r=d("a-button"),n=d("a-space"),f=d("a-image"),c=d("kd-pager");return _(),y("div",Ko,[a(n,null,{default:l(()=>[a(s,{showTime:"",class:"w360","shortcuts-position":"left",format:"YYYY-MM-DD HH:mm",modelValue:e.search.time,"onUpdate:modelValue":t[0]||(t[0]=v=>e.search.time=v),"allow-clear":!1,shortcuts:e.rangeShortcuts},null,8,["modelValue","shortcuts"]),a(r,{type:"primary"},{default:l(()=>t[1]||(t[1]=[m("查询")])),_:1,__:[1]}),a(r,null,{default:l(()=>t[2]||(t[2]=[m("重置")])),_:1,__:[2]}),a(r,{onClick:p},{default:l(()=>t[3]||(t[3]=[m("配置自动截图")])),_:1,__:[3]})]),_:1}),o("div",jo,[(_(!0),y(N,null,P(e.info.limit,(v,$)=>(_(),y("div",{class:"screent-item",key:$},[a(f,{class:"img",width:"220",src:"http://img.farmkd.com/snapshot/jpg/3nm4x0wdhtsas/31011500991320065283/ondemand/1752541717791.jpg?e=1752648066&token=d8BDvxRsw76vxrUHxZ5k1tPXva_TpO2h1BdrZU4z:49zBsQC5-rZqnSvZ5Dez0G7LH20"}),o("div",Qo,[t[5]||(t[5]=o("span",{class:"f12"},"2025-07-15 09:08:37",-1)),a(r,{type:"text",size:"mini"},{default:l(()=>t[4]||(t[4]=[m("删除")])),_:1,__:[4]})])]))),128))]),a(c,{"page-data":e.info,"show-size":!1},null,8,["page-data"]),a(dt,{ref_key:"autoRef",ref:u},null,512)])}}},Oo=R(Zo,[["__scopeId","data-v-6c0cba93"]]),Go={key:0},Jo={class:"tips mt5"},Xo={class:"tips mt5"},ts={class:"tips mt5"},es={__name:"CqkdAutoRecording",setup(V,{expose:u}){const e=H({show:!1,form:{cycle:1,day:"",week:"",date:"",time:"",long:null}});function p(){e.show=!0,e.form={cycle:1,day:"",week:"",date:"",time:"",long:null}}return u({show:p}),(i,t)=>{const s=d("a-radio"),r=d("a-radio-group"),n=d("a-form-item"),f=d("a-input"),c=d("a-time-picker"),v=d("a-space"),$=d("a-option"),C=d("a-select"),q=d("a-date-picker"),M=d("a-input-number"),L=d("a-switch"),S=d("a-form"),x=d("a-modal");return e.show?(_(),y("div",Go,[a(x,{title:"自动录制配置",visible:e.show,"onUpdate:visible":t[8]||(t[8]=k=>e.show=k),width:"500px","on-before-ok":i.saveData},{default:l(()=>[a(S,{model:e.form,ref:"formRef","label-col-props":{flex:"100px"},"wrapper-col-props":{flex:1}},{default:l(()=>[a(n,{label:"录制周期"},{default:l(()=>[a(r,{modelValue:e.form.cycle,"onUpdate:modelValue":t[0]||(t[0]=k=>e.form.cycle=k)},{default:l(()=>[a(s,{value:1},{default:l(()=>t[9]||(t[9]=[m("每天")])),_:1,__:[9]}),a(s,{value:2},{default:l(()=>t[10]||(t[10]=[m("每周")])),_:1,__:[10]}),a(s,{value:3},{default:l(()=>t[11]||(t[11]=[m("固定时间点")])),_:1,__:[11]})]),_:1},8,["modelValue"])]),_:1}),e.form.cycle===1?(_(),I(n,{key:0,label:"每天录制"},{default:l(()=>[o("div",null,[a(v,null,{default:l(()=>[a(f,{modelValue:e.form.day,"onUpdate:modelValue":t[1]||(t[1]=k=>e.form.day=k),placeholder:"请输入"},{prepend:l(()=>t[12]||(t[12]=[m("每")])),append:l(()=>t[13]||(t[13]=[m("天")])),_:1},8,["modelValue"]),a(c,{modelValue:e.form.time,"onUpdate:modelValue":t[2]||(t[2]=k=>e.form.time=k),class:"w160",format:"HH:mm"},null,8,["modelValue"])]),_:1}),o("div",Jo,"每"+b(e.form.day)+"天 "+b(e.form.time)+"录制一次",1)])]),_:1})):w("",!0),e.form.cycle===2?(_(),I(n,{key:1,label:"每周录制"},{default:l(()=>[o("div",null,[a(v,null,{default:l(()=>[a(C,{placeholder:"请选择",modelValue:e.form.week,"onUpdate:modelValue":t[3]||(t[3]=k=>e.form.week=k)},{default:l(()=>[a($,{value:1},{default:l(()=>t[14]||(t[14]=[m("周一")])),_:1,__:[14]}),a($,{value:2},{default:l(()=>t[15]||(t[15]=[m("周二")])),_:1,__:[15]}),a($,{value:3},{default:l(()=>t[16]||(t[16]=[m("周三")])),_:1,__:[16]}),a($,{value:4},{default:l(()=>t[17]||(t[17]=[m("周四")])),_:1,__:[17]}),a($,{value:5},{default:l(()=>t[18]||(t[18]=[m("周五")])),_:1,__:[18]}),a($,{value:6},{default:l(()=>t[19]||(t[19]=[m("周六")])),_:1,__:[19]}),a($,{value:7},{default:l(()=>t[20]||(t[20]=[m("周日")])),_:1,__:[20]})]),_:1},8,["modelValue"]),a(c,{modelValue:e.form.time,"onUpdate:modelValue":t[4]||(t[4]=k=>e.form.time=k),class:"w160",format:"HH:mm"},null,8,["modelValue"])]),_:1}),o("div",Xo,"每周"+b(e.form.week)+b(e.form.time)+"录制一次",1)])]),_:1})):w("",!0),e.form.cycle===3?(_(),I(n,{key:2,label:"固定时间"},{default:l(()=>[o("div",null,[a(q,{modelValue:e.form.date,"onUpdate:modelValue":t[5]||(t[5]=k=>e.form.date=k),"show-time":"",format:"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"]),o("div",ts,b(e.form.date)+"录制一次",1)])]),_:1})):w("",!0),a(n,{label:"录制时长"},{default:l(()=>[a(M,{modelValue:e.form.long,"onUpdate:modelValue":t[6]||(t[6]=k=>e.form.long=k),class:"w200",min:5,placeholder:"请输入录制时长"},{append:l(()=>t[21]||(t[21]=[m("秒")])),_:1},8,["modelValue"])]),_:1}),a(n,{label:"是否启用"},{default:l(()=>[a(L,{modelValue:e.form.status,"onUpdate:modelValue":t[7]||(t[7]=k=>e.form.status=k),"checked-value":1,"unchecked-value":0,"checked-text":"启用","unchecked-text":"禁用"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","on-before-ok"])])):w("",!0)}}},as={class:"al-recording"},ls={__name:"AliyunRecording",setup(V){const u=z(),e=H({search:{time:[]},rangeShortcuts:[{label:"最近七日",value:()=>[g().subtract(7,"day"),g()]},{label:"最近一个月",value:()=>[g().subtract(1,"month"),g()]},{label:"最近三个月",value:()=>[g().subtract(3,"month"),g()]},{label:"最近一年",value:()=>[g().subtract(1,"year"),g()]}],info:{page:1,count:0,list:[],limit:20}});A(()=>{e.info.limit=Math.floor((window.innerWidth-250)/230)*3,e.search.time=[g().subtract(1,"day").format("YYYY-MM-DD HH:mm"),g().format("YYYY-MM-DD HH:mm")],e.info.list=[{StreamId:"323*****997-cn-qingdao",startTime:"2025-01-01 12:00",endTime:"2025-01-01 12:30",FileFormat:"mp4"},{StreamId:"323*****997-cn-qingdao",startTime:"2025-01-01 12:00",endTime:"2025-01-01 12:30",FileFormat:"mp4"}]});const p=()=>u.value.show();return(i,t)=>{const s=d("a-range-picker"),r=d("a-button"),n=d("a-space"),f=d("a-table"),c=d("kd-pager");return _(),y("div",as,[a(n,null,{default:l(()=>[a(s,{showTime:"",class:"w360","shortcuts-position":"left",format:"YYYY-MM-DD HH:mm",modelValue:e.search.time,"onUpdate:modelValue":t[0]||(t[0]=v=>e.search.time=v),"allow-clear":!1,shortcuts:e.rangeShortcuts},null,8,["modelValue","shortcuts"]),a(r,{type:"primary"},{default:l(()=>t[1]||(t[1]=[m("查询")])),_:1,__:[1]}),a(r,null,{default:l(()=>t[2]||(t[2]=[m("重置")])),_:1,__:[2]}),a(r,{onClick:p},{default:l(()=>t[3]||(t[3]=[m("配置自动录制")])),_:1,__:[3]})]),_:1}),a(f,{class:"mt15 kd-small-table",pagination:!1,bordered:!1,data:e.info.list,columns:[{title:"流id",dataIndex:"StreamId"},{title:"录制时间",slotName:"time"},{title:"文件格式",dataIndex:"FileFormat"},{title:"操作",slotName:"action"}]},{time:l(({record:v})=>[o("span",null,b(v.startTime)+"~"+b(v.endTime),1)]),action:l(({record:v})=>[a(r,{type:"text",size:"mini",class:"ml-10"},{default:l(()=>t[4]||(t[4]=[m("回放")])),_:1,__:[4]})]),_:1},8,["data"]),a(c,{"page-data":e.info,"show-size":!1},null,8,["page-data"]),a(es,{ref_key:"autoRef",ref:u},null,512)])}}},os={__name:"CqkdAliyunDetail",setup(V){return(u,e)=>{const p=d("a-tab-pane"),i=d("a-tabs");return _(),y("div",null,[a(i,{"default-active-key":"1"},{default:l(()=>[a(p,{key:"1",title:"基本信息"},{default:l(()=>[a(Mo)]),_:1}),a(p,{key:"2",title:"通道列表"},{default:l(()=>[a(Uo)]),_:1}),a(p,{key:"3",title:"云台控制"},{default:l(()=>[a(Wo)]),_:1}),a(p,{key:"4",title:"截图管理"},{default:l(()=>[a(Oo)]),_:1}),a(p,{key:"5",title:"本地录像"},{default:l(()=>[a(ls)]),_:1})]),_:1})])}}},ss={class:"qn-page"},ns={class:"qn-box flex"},is={class:"qn-info"},ds={class:"qn-info-item flex-c"},rs={class:"qn-value"},us={class:"qn-info-item flex-c"},ms={class:"qn-value"},_s={class:"qn-info-item flex-c"},fs={class:"qn-value"},ps={class:"hk-address"},cs={__name:"ImouBaseInfo",setup(V){const u=z(),e=z();H({statusList:[{name:"国标报警",value:0,value_txt:"开启"},{name:"本地录像",value:0,value_txt:"开启"},{name:"地理位置",value:0,value_txt:"开启"},{name:"音频",value:0,value_txt:"开启"},{name:"音频转码",value:0,value_txt:"开启"},{name:"按需拉流",value:0,value_txt:"开启"},{name:"注册成功后启动拉流",value:0,value_txt:"关闭"}]});const p=()=>u.value.show(),i=()=>e.value.show();return(t,s)=>{const r=d("a-tag"),n=d("a-button");return _(),y("div",ss,[o("div",ns,[o("div",is,[s[8]||(s[8]=o("div",{class:"f16 fb"},"设备基本信息",-1)),o("div",ds,[s[1]||(s[1]=o("div",{class:"qn-title"},"设备状态",-1)),o("div",rs,[a(r,{color:"#00CC66",size:"mini"},{default:l(()=>s[0]||(s[0]=[m("在线")])),_:1,__:[0]})])]),o("div",us,[s[4]||(s[4]=o("div",{class:"qn-title"},"设备名称",-1)),o("div",ms,[s[3]||(s[3]=m("坤典科技测试设备 ")),a(n,{type:"text",size:"mini",onClick:p},{default:l(()=>s[2]||(s[2]=[m("修改")])),_:1,__:[2]})])]),s[9]||(s[9]=o("div",{class:"qn-info-item flex-c"},[o("div",{class:"qn-title"},"设备用户名"),o("div",{class:"qn-value"},"xxxxxxxxx")],-1)),o("div",_s,[s[7]||(s[7]=o("div",{class:"qn-title"},"设备密码",-1)),o("div",fs,[s[6]||(s[6]=m(" ****** ")),a(n,{type:"text",size:"mini",onClick:i},{default:l(()=>s[5]||(s[5]=[m("修改")])),_:1,__:[5]})])]),s[10]||(s[10]=at('<div class="qn-info-item flex-c" data-v-de290523><div class="qn-title" data-v-de290523>设备版本号</div><div class="qn-value" data-v-de290523>xxxxxxxxx</div></div><div class="qn-info-item flex-c" data-v-de290523><div class="qn-title" data-v-de290523>设备型号</div><div class="qn-value" data-v-de290523>TP2</div></div><div class="qn-info-item flex-c" data-v-de290523><div class="qn-title" data-v-de290523>设备品牌</div><div class="qn-value" data-v-de290523>lechange-乐橙设备</div></div><div class="qn-info-item flex-c" data-v-de290523><div class="qn-title" data-v-de290523>设备接入类型</div><div class="qn-value" data-v-de290523>Paas程序接入</div></div><div class="qn-info-item flex-c" data-v-de290523><div class="qn-title" data-v-de290523>支持接入的通道数</div><div class="qn-value" data-v-de290523>10</div></div><div class="qn-info-item flex-c" data-v-de290523><div class="qn-title" data-v-de290523>设备加密模式</div><div class="qn-value" data-v-de290523>默认加密</div></div><div class="qn-info-item flex-c" data-v-de290523><div class="qn-title" data-v-de290523>设备最后离线时间</div><div class="qn-value" data-v-de290523>2022-09-19 16:52:30</div></div><div class="qn-info-item flex-c" data-v-de290523><div class="qn-title" data-v-de290523>设备位置</div><div class="qn-value" data-v-de290523>重庆市渝北区</div></div>',8))]),o("div",ps,[a(st)])]),a(nt,{ref_key:"nameRef",ref:u},null,512),a(ut,{ref_key:"pwdRef",ref:e},null,512)])}}},vs=R(cs,[["__scopeId","data-v-de290523"]]),ys={class:"qn-channel"},ks={key:0},bs={__name:"ImouChannel",setup(V){const u=H({list:[{channelId:"34020000001310000001",name:"1F亮秀路车位-左",state:"online",vendor:"Dahua",lastSyncAt:"2025-01-01 12:00:11"},{channelId:"34020000001310000017",name:"IPC",state:"online",vendor:"Dahua",lastSyncAt:"2025-01-01 12:00:11"},{channelId:"34020000001310000003",name:"6F西北角",state:"online",vendor:"Dahua",lastSyncAt:"2025-01-01 12:00:11"},{channelId:"34020000001310000004",name:"2F东南阳台",state:"online",vendor:"Dahua",lastSyncAt:"2025-01-01 12:00:11"},{channelId:"34020000001310000005",name:"3F通道东北半球",state:"online",vendor:"Dahua",lastSyncAt:"2025-01-01 12:00:11"}],form:{show:!1,name:""}});return(e,p)=>{const i=d("a-tag"),t=d("a-table"),s=d("a-input"),r=d("a-modal");return _(),y("div",ys,[a(t,{class:"kd-small-table",pagination:!1,bordered:!1,data:u.list,columns:[{title:"通道号",dataIndex:"channelId"},{title:"通道名称",slotName:"name"},{title:"通道状态",slotName:"state"},{title:"最后离线时间",dataIndex:"lastSyncAt"}],loading:u.loading},{name:l(({record:n})=>[o("span",null,b(n.name),1),o("span",{class:"kd-link ml10",onClick:p[0]||(p[0]=f=>u.form.show=!0)},p[3]||(p[3]=[o("i",{class:"ri-edit-line"},null,-1)]))]),state:l(({record:n})=>[n.state==="online"?(_(),I(i,{key:0,color:"#00CC66",size:"mini"},{default:l(()=>p[4]||(p[4]=[m("在线")])),_:1,__:[4]})):(_(),I(i,{key:1,color:"#999",size:"mini"},{default:l(()=>p[5]||(p[5]=[m("离线")])),_:1,__:[5]}))]),_:1},8,["data","loading"]),u.form.show?(_(),y("div",ks,[a(r,{title:"修改通道名称",visible:u.form.show,"onUpdate:visible":p[2]||(p[2]=n=>u.form.show=n),width:"400px","on-before-ok":e.saveData},{default:l(()=>[a(s,{modelValue:u.form.name,"onUpdate:modelValue":p[1]||(p[1]=n=>u.form.name=n),placeholder:"请输入通道名称"},null,8,["modelValue"])]),_:1},8,["visible","on-before-ok"])])):w("",!0)])}}},gs=R(bs,[["__scopeId","data-v-c2f6bf26"]]),ws={class:"qn-ptz"},xs={class:"qn-header flex"},hs={class:"qn-ptz-box flex mt15"},$s={class:"play-box"},Vs={class:"control-board flex"},qs={key:1},Is={class:"preset-box mt15"},Ds={class:"f14 fb flex-c mb10"},Cs={__name:"ImouPtz",setup(V){const u=z(),e=H({play_type:1,controlBtn:[{icon:"ri-arrow-left-up-fill",at:4},{icon:"ri-arrow-up-fill",at:0},{icon:"ri-arrow-right-up-fill",at:6},{icon:"ri-arrow-left-fill",at:2},{icon:"",at:-1},{icon:"ri-arrow-right-fill",at:3},{icon:"ri-arrow-left-down-fill",at:5},{icon:"ri-arrow-down-fill",at:1},{icon:"ri-arrow-right-down-fill",at:7},{icon:"ri-subtract-line",at:9},{icon:"",at:-1,text:"变倍"},{icon:"ri-add-line",at:8},{icon:"ri-subtract-line",at:11},{icon:"",at:-1,text:"变焦"},{icon:"ri-add-line",at:10}],presetData:[{id:1,name:"前方",channelNo:1},{id:2,name:"前方2",channelNo:1}]}),p=()=>u.value.show();return(i,t)=>{const s=d("a-option"),r=d("a-select"),n=d("a-button"),f=d("a-radio"),c=d("a-radio-group"),v=d("a-space"),$=d("a-popconfirm"),C=d("a-table");return _(),y("div",ws,[o("div",xs,[a(r,{placeholder:"选择通道",class:"w240"},{default:l(()=>[a(s,null,{default:l(()=>t[1]||(t[1]=[m("My(427734222)427734222")])),_:1,__:[1]}),a(s,null,{default:l(()=>t[2]||(t[2]=[m("My(427734222)427734221")])),_:1,__:[2]})]),_:1}),a(v,null,{default:l(()=>[a(n,{type:"primary"},{default:l(()=>t[3]||(t[3]=[m("截取当前画面")])),_:1,__:[3]}),a(n,{type:"primary"},{default:l(()=>t[4]||(t[4]=[m("开始录制")])),_:1,__:[4]}),a(c,{modelValue:e.play_type,"onUpdate:modelValue":t[0]||(t[0]=q=>e.play_type=q),type:"button"},{default:l(()=>[a(f,{value:1},{default:l(()=>t[5]||(t[5]=[m("webrtc")])),_:1,__:[5]}),a(f,{value:2},{default:l(()=>t[6]||(t[6]=[m("flv直播流")])),_:1,__:[6]})]),_:1},8,["modelValue"])]),_:1})]),o("div",hs,[o("div",$s,[a(rt)]),o("div",Vs,[(_(!0),y(N,null,P(e.controlBtn,(q,M)=>(_(),y("div",{class:"cb-item",key:M},[q.icon?(_(),y("i",{key:0,class:lt(["ri-icon",q.icon])},null,2)):w("",!0),q.text?(_(),y("span",qs,b(q.text),1)):w("",!0)]))),128))])]),o("div",Is,[o("div",Ds,[t[8]||(t[8]=o("span",{class:"mr10"},"预置位",-1)),a(n,{size:"mini",onClick:p},{default:l(()=>t[7]||(t[7]=[o("i",{class:"ri-add-line"},null,-1),m("新增预置位")])),_:1,__:[7]})]),a(C,{class:"kd-small-table",pagination:!1,bordered:!1,data:e.presetData,columns:[{title:"ID",dataIndex:"id",width:100},{title:"预置位名称",dataIndex:"name"},{title:"操作",slotName:"action"}]},{action:l(({record:q})=>[a(n,{type:"text",size:"mini",class:"ml-10"},{default:l(()=>t[9]||(t[9]=[m("调用")])),_:1,__:[9]}),a($,{content:"确认删除预置位吗？"},{default:l(()=>[a(n,{type:"text",size:"mini"},{default:l(()=>t[10]||(t[10]=[m("删除")])),_:1,__:[10]})]),_:1})]),_:1},8,["data"])]),a(it,{ref_key:"presetRef",ref:u},null,512)])}}},Ss=R(Cs,[["__scopeId","data-v-b9bff85d"]]),Ys={class:"qn-screenshot"},Hs={class:"screenshot-list flex mt15"},Ms={class:"time flex-cb mt5"},zs={__name:"ImouScreenshot",setup(V){ot();const u=z(),e=H({search:{time:[]},rangeShortcuts:[{label:"最近七日",value:()=>[g().subtract(7,"day"),g()]},{label:"最近一个月",value:()=>[g().subtract(1,"month"),g()]},{label:"最近三个月",value:()=>[g().subtract(3,"month"),g()]},{label:"最近一年",value:()=>[g().subtract(1,"year"),g()]}],info:{page:1,count:0,list:[],limit:20}});A(()=>{e.info.limit=Math.floor((window.innerWidth-250)/230)*3,e.search.time=[g().subtract(1,"day").format("YYYY-MM-DD HH:mm"),g().format("YYYY-MM-DD HH:mm")]});const p=()=>u.value.show();return(i,t)=>{const s=d("a-range-picker"),r=d("a-button"),n=d("a-space"),f=d("a-image"),c=d("kd-pager");return _(),y("div",Ys,[a(n,null,{default:l(()=>[a(s,{showTime:"",class:"w360","shortcuts-position":"left",format:"YYYY-MM-DD HH:mm",modelValue:e.search.time,"onUpdate:modelValue":t[0]||(t[0]=v=>e.search.time=v),"allow-clear":!1,shortcuts:e.rangeShortcuts},null,8,["modelValue","shortcuts"]),a(r,{type:"primary"},{default:l(()=>t[1]||(t[1]=[m("查询")])),_:1,__:[1]}),a(r,null,{default:l(()=>t[2]||(t[2]=[m("重置")])),_:1,__:[2]}),a(r,{onClick:p},{default:l(()=>t[3]||(t[3]=[m("配置自动截图")])),_:1,__:[3]})]),_:1}),o("div",Hs,[(_(!0),y(N,null,P(e.info.limit,(v,$)=>(_(),y("div",{class:"screent-item",key:$},[a(f,{class:"img",width:"220",src:"http://img.farmkd.com/snapshot/jpg/3nm4x0wdhtsas/31011500991320065283/ondemand/1752541717791.jpg?e=1752648066&token=d8BDvxRsw76vxrUHxZ5k1tPXva_TpO2h1BdrZU4z:49zBsQC5-rZqnSvZ5Dez0G7LH20"}),o("div",Ms,[t[5]||(t[5]=o("span",{class:"f12"},"2025-07-15 09:08:37",-1)),a(r,{type:"text",size:"mini"},{default:l(()=>t[4]||(t[4]=[m("删除")])),_:1,__:[4]})])]))),128))]),a(c,{"page-data":e.info,"show-size":!1},null,8,["page-data"]),a(dt,{ref_key:"autoRef",ref:u},null,512)])}}},Ts=R(zs,[["__scopeId","data-v-13e96682"]]),Us={key:0},Ls={class:"tips mt5"},Rs={class:"tips mt5"},Ns={class:"tips mt5"},Ps={__name:"CqkdAutoRecording",setup(V,{expose:u}){const e=H({show:!1,form:{cycle:1,day:"",week:"",date:"",time:"",long:null}});function p(){e.show=!0,e.form={cycle:1,day:"",week:"",date:"",time:"",long:null}}return u({show:p}),(i,t)=>{const s=d("a-radio"),r=d("a-radio-group"),n=d("a-form-item"),f=d("a-input"),c=d("a-time-picker"),v=d("a-space"),$=d("a-option"),C=d("a-select"),q=d("a-date-picker"),M=d("a-input-number"),L=d("a-switch"),S=d("a-form"),x=d("a-modal");return e.show?(_(),y("div",Us,[a(x,{title:"自动录制配置",visible:e.show,"onUpdate:visible":t[8]||(t[8]=k=>e.show=k),width:"500px","on-before-ok":i.saveData},{default:l(()=>[a(S,{model:e.form,ref:"formRef","label-col-props":{flex:"100px"},"wrapper-col-props":{flex:1}},{default:l(()=>[a(n,{label:"录制周期"},{default:l(()=>[a(r,{modelValue:e.form.cycle,"onUpdate:modelValue":t[0]||(t[0]=k=>e.form.cycle=k)},{default:l(()=>[a(s,{value:1},{default:l(()=>t[9]||(t[9]=[m("每天")])),_:1,__:[9]}),a(s,{value:2},{default:l(()=>t[10]||(t[10]=[m("每周")])),_:1,__:[10]}),a(s,{value:3},{default:l(()=>t[11]||(t[11]=[m("固定时间点")])),_:1,__:[11]})]),_:1},8,["modelValue"])]),_:1}),e.form.cycle===1?(_(),I(n,{key:0,label:"每天录制"},{default:l(()=>[o("div",null,[a(v,null,{default:l(()=>[a(f,{modelValue:e.form.day,"onUpdate:modelValue":t[1]||(t[1]=k=>e.form.day=k),placeholder:"请输入"},{prepend:l(()=>t[12]||(t[12]=[m("每")])),append:l(()=>t[13]||(t[13]=[m("天")])),_:1},8,["modelValue"]),a(c,{modelValue:e.form.time,"onUpdate:modelValue":t[2]||(t[2]=k=>e.form.time=k),class:"w160",format:"HH:mm"},null,8,["modelValue"])]),_:1}),o("div",Ls,"每"+b(e.form.day)+"天 "+b(e.form.time)+"录制一次",1)])]),_:1})):w("",!0),e.form.cycle===2?(_(),I(n,{key:1,label:"每周录制"},{default:l(()=>[o("div",null,[a(v,null,{default:l(()=>[a(C,{placeholder:"请选择",modelValue:e.form.week,"onUpdate:modelValue":t[3]||(t[3]=k=>e.form.week=k)},{default:l(()=>[a($,{value:1},{default:l(()=>t[14]||(t[14]=[m("周一")])),_:1,__:[14]}),a($,{value:2},{default:l(()=>t[15]||(t[15]=[m("周二")])),_:1,__:[15]}),a($,{value:3},{default:l(()=>t[16]||(t[16]=[m("周三")])),_:1,__:[16]}),a($,{value:4},{default:l(()=>t[17]||(t[17]=[m("周四")])),_:1,__:[17]}),a($,{value:5},{default:l(()=>t[18]||(t[18]=[m("周五")])),_:1,__:[18]}),a($,{value:6},{default:l(()=>t[19]||(t[19]=[m("周六")])),_:1,__:[19]}),a($,{value:7},{default:l(()=>t[20]||(t[20]=[m("周日")])),_:1,__:[20]})]),_:1},8,["modelValue"]),a(c,{modelValue:e.form.time,"onUpdate:modelValue":t[4]||(t[4]=k=>e.form.time=k),class:"w160",format:"HH:mm"},null,8,["modelValue"])]),_:1}),o("div",Rs,"每周"+b(e.form.week)+b(e.form.time)+"录制一次",1)])]),_:1})):w("",!0),e.form.cycle===3?(_(),I(n,{key:2,label:"固定时间"},{default:l(()=>[o("div",null,[a(q,{modelValue:e.form.date,"onUpdate:modelValue":t[5]||(t[5]=k=>e.form.date=k),"show-time":"",format:"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"]),o("div",Ns,b(e.form.date)+"录制一次",1)])]),_:1})):w("",!0),a(n,{label:"录制时长"},{default:l(()=>[a(M,{modelValue:e.form.long,"onUpdate:modelValue":t[6]||(t[6]=k=>e.form.long=k),class:"w200",min:5,placeholder:"请输入录制时长"},{append:l(()=>t[21]||(t[21]=[m("秒")])),_:1},8,["modelValue"])]),_:1}),a(n,{label:"是否启用"},{default:l(()=>[a(L,{modelValue:e.form.status,"onUpdate:modelValue":t[7]||(t[7]=k=>e.form.status=k),"checked-value":1,"unchecked-value":0,"checked-text":"启用","unchecked-text":"禁用"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","on-before-ok"])])):w("",!0)}}},As={class:"hk-recording"},Bs={key:0},Fs={key:1},Es={key:2},Ws={__name:"ImouRecording",setup(V){const u=z(),e=H({search:{time:[]},rangeShortcuts:[{label:"最近七日",value:()=>[g().subtract(7,"day"),g()]},{label:"最近一个月",value:()=>[g().subtract(1,"month"),g()]},{label:"最近三个月",value:()=>[g().subtract(3,"month"),g()]},{label:"最近一年",value:()=>[g().subtract(1,"year"),g()]}],info:{page:1,count:0,list:[],limit:20}});A(()=>{e.info.limit=Math.floor((window.innerWidth-250)/230)*3,e.search.time=[g().subtract(1,"day").format("YYYY-MM-DD HH:mm"),g().format("YYYY-MM-DD HH:mm")],e.info.list=[{recordId:"/mnt/sd/2020-05-19/001/dav/00/00.30.59-00.31.36[M][0@0][0].mp4",fileLength:713883,channelID:"0",beginTime:"2020-05-19 00:30:59",endTime:"2020-05-19 00:31:36",type:"Event",streamType:"main"},{recordId:"/mnt/sd/2020-05-19/001/dav/00/00.30.59-00.31.36[M][0@0][0].mp4",fileLength:713883,channelID:"0",beginTime:"2020-05-19 00:30:59",endTime:"2020-05-19 00:31:36",type:"Event",streamType:"main"}]});const p=()=>u.value.show();return(i,t)=>{const s=d("a-range-picker"),r=d("a-button"),n=d("a-space"),f=d("a-table"),c=d("kd-pager");return _(),y("div",As,[a(n,null,{default:l(()=>[a(s,{showTime:"",class:"w360","shortcuts-position":"left",format:"YYYY-MM-DD HH:mm",modelValue:e.search.time,"onUpdate:modelValue":t[0]||(t[0]=v=>e.search.time=v),"allow-clear":!1,shortcuts:e.rangeShortcuts},null,8,["modelValue","shortcuts"]),a(r,{type:"primary"},{default:l(()=>t[1]||(t[1]=[m("查询")])),_:1,__:[1]}),a(r,null,{default:l(()=>t[2]||(t[2]=[m("重置")])),_:1,__:[2]}),a(r,{onClick:p},{default:l(()=>t[3]||(t[3]=[m("配置自动录制")])),_:1,__:[3]})]),_:1}),a(f,{class:"mt15 kd-small-table",pagination:!1,bordered:!1,data:e.info.list,columns:[{title:"通道号",dataIndex:"channelID"},{title:"录像文件名",dataIndex:"recordId"},{title:"录像文件长度",dataIndex:"fileLength"},{title:"录像起止时间",slotName:"time"},{title:"类型",dataIndex:"type"},{title:"码流类型",dataIndex:"streamType"},{title:"操作",slotName:"action"}]},{recType:l(({record:v})=>[v.recType===0?(_(),y("span",Bs,"-")):w("",!0),v.recType===1?(_(),y("span",Fs,"云存储")):w("",!0),v.recType===2?(_(),y("span",Es,"本地录像")):w("",!0)]),time:l(({record:v})=>[o("span",null,b(v.beginTime)+"~"+b(v.endTime),1)]),action:l(({record:v})=>[a(r,{type:"text",size:"mini",class:"ml-10"},{default:l(()=>t[4]||(t[4]=[m("回放")])),_:1,__:[4]})]),_:1},8,["data"]),a(c,{"page-data":e.info,"show-size":!1},null,8,["page-data"]),a(Ps,{ref_key:"autoRef",ref:u},null,512)])}}},Ks={__name:"CqkdImouDetail",setup(V){return H({}),(u,e)=>{const p=d("a-tab-pane"),i=d("a-tabs");return _(),y("div",null,[a(i,{"default-active-key":"1"},{default:l(()=>[a(p,{key:"1",title:"基本信息"},{default:l(()=>[a(vs)]),_:1}),a(p,{key:"2",title:"通道列表"},{default:l(()=>[a(gs)]),_:1}),a(p,{key:"3",title:"云台控制"},{default:l(()=>[a(Ss)]),_:1}),a(p,{key:"4",title:"截图管理"},{default:l(()=>[a(Ts)]),_:1}),a(p,{key:"5",title:"本地录像"},{default:l(()=>[a(Ws)]),_:1})]),_:1})])}}},js={class:"kd-content"},an={__name:"detail",setup(V){const u=E(),e=Yt().query,p=H({});return A(async()=>{var i,t,s;if(e.type==="kun_dian"){if(p.loading=!0,await u.getInfo(e.id),(i=u.state.info)!=null&&i.longitude&&((t=u.state.info)!=null&&t.latitude)){let{longitude:r,latitude:n}=u.state.info;parseFloat(r)&&parseFloat(n)&&Qt(r,n).then(f=>{var c,v;u.state.info.address_format=((v=(c=f.data)==null?void 0:c.result)==null?void 0:v.formatted_address)||""})}((s=u.state.detail)==null?void 0:s.type)===2&&await u.getChannel(),u.getPlayUrl(),jt().then(r=>{var n;u.state.gateway=((n=r.data)==null?void 0:n[0])||null})}}),(i,t)=>{const s=d("kd-back"),r=d("kd-page-box");return _(),I(r,{loading:h(u).state.loading},{default:l(()=>[o("div",js,[a(s,{title:"监控设备详情"}),h(e).type==="3"?(_(),I(ca,{key:0})):w("",!0),h(e).type==="kun_dian"?(_(),I(co,{key:1})):w("",!0),h(e).type==="5"?(_(),I(os,{key:2})):w("",!0),h(e).type==="6"?(_(),I(Ks,{key:3})):w("",!0)])]),_:1},8,["loading"])}}};export{an as default};
