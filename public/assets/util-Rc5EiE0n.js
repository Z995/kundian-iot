import{N as eo,u as Sc,O as Tc,D as kc}from"./index-B09Km9Qy.js";var Ri={},to;function Cc(){return to||(to=1,function(Y){Object.defineProperty(Y,"__esModule",{value:!0});var Ee=function(){return Ee=Object.assign||function(e){for(var r,t=1,i=arguments.length;t<i;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);return e},Ee.apply(this,arguments)};function U(e,r,t,i){return new(t||(t=Promise))(function(n,o){function a(c){try{d(i.next(c))}catch(l){o(l)}}function s(c){try{d(i.throw(c))}catch(l){o(l)}}function d(c){var l;c.done?n(c.value):(l=c.value,l instanceof t?l:new t(function(u){u(l)})).then(a,s)}d((i=i.apply(e,r||[])).next())})}function Se(e,r){var t,i,n,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(d){return function(c){return function(l){if(t)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(o=0)),o;)try{if(t=1,i&&(n=2&l[0]?i.return:l[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,l[1])).done)return n;switch(i=0,n&&(l=[2&l[0],n.value]),l[0]){case 0:case 1:n=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,i=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(n=o.trys,!((n=n.length>0&&n[n.length-1])||l[0]!==6&&l[0]!==2)){o=0;continue}if(l[0]===3&&(!n||l[1]>n[0]&&l[1]<n[3])){o.label=l[1];break}if(l[0]===6&&o.label<n[1]){o.label=n[1],n=l;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(l);break}n[2]&&o.ops.pop(),o.trys.pop();continue}l=r.call(e,o)}catch(u){l=[6,u],i=0}finally{t=n=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([d,c])}}}function He(e,r,t){for(var i,n=0,o=r.length;n<o;n++)!i&&n in r||(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))}typeof SuppressedError=="function"&&SuppressedError;var mt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof eo<"u"?eo:typeof self<"u"?self:{};function ft(e){var r={exports:{}};return e(r,r.exports),r.exports}var nr=ft(function(e){var r=Object.prototype.hasOwnProperty,t="~";function i(){}function n(d,c,l){this.fn=d,this.context=c,this.once=l||!1}function o(d,c,l,u,h){if(typeof l!="function")throw new TypeError("The listener must be a function");var p=new n(l,u||d,h),w=t?t+c:c;return d._events[w]?d._events[w].fn?d._events[w]=[d._events[w],p]:d._events[w].push(p):(d._events[w]=p,d._eventsCount++),d}function a(d,c){--d._eventsCount==0?d._events=new i:delete d._events[c]}function s(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(t=!1)),s.prototype.eventNames=function(){var d,c,l=[];if(this._eventsCount===0)return l;for(c in d=this._events)r.call(d,c)&&l.push(t?c.slice(1):c);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(d)):l},s.prototype.listeners=function(d){var c=t?t+d:d,l=this._events[c];if(!l)return[];if(l.fn)return[l.fn];for(var u=0,h=l.length,p=new Array(h);u<h;u++)p[u]=l[u].fn;return p},s.prototype.listenerCount=function(d){var c=t?t+d:d,l=this._events[c];return l?l.fn?1:l.length:0},s.prototype.emit=function(d,c,l,u,h,p){var w=t?t+d:d;if(!this._events[w])return!1;var C,f,v=this._events[w],g=arguments.length;if(v.fn){switch(v.once&&this.removeListener(d,v.fn,void 0,!0),g){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,c),!0;case 3:return v.fn.call(v.context,c,l),!0;case 4:return v.fn.call(v.context,c,l,u),!0;case 5:return v.fn.call(v.context,c,l,u,h),!0;case 6:return v.fn.call(v.context,c,l,u,h,p),!0}for(f=1,C=new Array(g-1);f<g;f++)C[f-1]=arguments[f];v.fn.apply(v.context,C)}else{var b,x=v.length;for(f=0;f<x;f++)switch(v[f].once&&this.removeListener(d,v[f].fn,void 0,!0),g){case 1:v[f].fn.call(v[f].context);break;case 2:v[f].fn.call(v[f].context,c);break;case 3:v[f].fn.call(v[f].context,c,l);break;case 4:v[f].fn.call(v[f].context,c,l,u);break;default:if(!C)for(b=1,C=new Array(g-1);b<g;b++)C[b-1]=arguments[b];v[f].fn.apply(v[f].context,C)}}return!0},s.prototype.on=function(d,c,l){return o(this,d,c,l,!1)},s.prototype.once=function(d,c,l){return o(this,d,c,l,!0)},s.prototype.removeListener=function(d,c,l,u){var h=t?t+d:d;if(!this._events[h])return this;if(!c)return a(this,h),this;var p=this._events[h];if(p.fn)p.fn!==c||u&&!p.once||l&&p.context!==l||a(this,h);else{for(var w=0,C=[],f=p.length;w<f;w++)(p[w].fn!==c||u&&!p[w].once||l&&p[w].context!==l)&&C.push(p[w]);C.length?this._events[h]=C.length===1?C[0]:C:a(this,h)}return this},s.prototype.removeAllListeners=function(d){var c;return d?(c=t?t+d:d,this._events[c]&&a(this,c)):(this._events=new i,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=t,s.EventEmitter=s,e.exports=s});const ro={className:"qn-rtplayer-media",width:"100%",height:"100%",objectFit:"contain",volumn:.6,controls:!1,playsinline:!0,audioOnly:!1,muted:!1,jitterBuffer:null,uid:""},io={lastAudioPacketReceivedTimestamp:0,lastVideoPacketReceivedTimestamp:0,timestamp:0,ip:"",protocol:"",rtt:0,constTime:0,audioFps:0,audioBitrate:0,audioDecoderName:"",audioTotalSamplesReceived:0,audioAvgJitterBufferDelay:0,audioAvgJitterBufferTargetDelay:0,audioAvgPacketProcessingDelay:0,audioPacketDiscarded:0,audioPacketReceived:0,audioPacketLost:0,audioPacketLostRate:0,audioBytesReceived:0,audioAvgInterframeDelay:0,audioLastPacketReceivedTimestamp:0,audioEstimatedPlayoutTimestamp:0,videoFps:0,videoBitrate:0,videoDecoderName:"",videoFrameWidth:0,videoFrameHeight:0,videoAvgJitterBufferDelay:0,videoAvgJitterBufferTargetDelay:0,videoAvgPacketProcessingDelay:0,videoDroppedFrames:0,videoPacketReceived:0,videoPacketLost:0,videoPacketLostRate:0,videoNackCount:0,videoFirCount:0,videoPliCount:0,videoFrameDecoded:0,videoFrameReceived:0,videoDecodeCostMs:0,videoKeyFramesDecoded:0,videoBytesReceived:0,videoTotalFreezesDuration:[],videoFecPacketReceived:0,videoAvgInterframeDelay:0,videoLastPacketReceivedTimestamp:0,videoEstimatedPlayoutTimestamp:0,videoFrameDecodedList:[]};Y.PlayerState=void 0,function(e){e[e.STATE_IDLE=0]="STATE_IDLE",e[e.STATE_INIT=1]="STATE_INIT",e[e.STATE_READY=2]="STATE_READY",e[e.STATE_PLAYING=3]="STATE_PLAYING",e[e.STATE_STOP=4]="STATE_STOP",e[e.STATE_ERROR=5]="STATE_ERROR"}(Y.PlayerState||(Y.PlayerState={}));class no{constructor(r,t){this.dbName=r,this.storeConfigs=t,this.db=void 0}getDB(){return U(this,void 0,void 0,function*(){return this.db!=null?this.db:new Promise(r=>{const t=indexedDB.open(this.dbName);t.addEventListener("upgradeneeded",()=>{for(const i of this.storeConfigs){const n=t.result.createObjectStore(i.name);for(const o of i.indexes)n.createIndex(o.name,o.keyPath)}}),r(Et(t))})})}add(r){console.log(r)}get(r,t){return U(this,void 0,void 0,function*(){return Et((yield this.getDB()).transaction(r,"readonly").objectStore(r).get(t))})}getAll(r){return U(this,void 0,void 0,function*(){return Et((yield this.getDB()).transaction(r,"readonly").objectStore(r).getAll())})}count(r){return U(this,void 0,void 0,function*(){return Et((yield this.getDB()).transaction(r,"readonly").objectStore(r).count())})}set(r,t,i){return U(this,void 0,void 0,function*(){const n=(yield this.getDB()).transaction(r,"readwrite");return n.objectStore(r).put(i,t),Or(n)})}remove(r,t){return U(this,void 0,void 0,function*(){const i=(yield this.getDB()).transaction(r,"readwrite");return i.objectStore(r).delete(t),Or(i)})}removeRange(r,t,i){return U(this,void 0,void 0,function*(){let n=0;const o=(yield this.getDB()).transaction(r,"readwrite").objectStore(r).openCursor(void 0,"next");return new Promise((a,s)=>{o.addEventListener("error",()=>s(new ar(o.error))),o.addEventListener("success",()=>U(this,void 0,void 0,function*(){const d=o.result;d==null||n>=i?a():(n>=t&&n<i&&(yield Et(d.delete())),++n,d.continue())}))})})}clear(){return U(this,void 0,void 0,function*(){const r=yield this.getDB();yield Promise.all(this.storeConfigs.map(({name:t})=>{const i=r.transaction(t,"readwrite");return i.objectStore(t).clear(),Or(i)}))})}dispose(){this.db&&this.db.close()}}class ar extends Error{constructor(r){super(r+""),this.cause=r,this.name="IndexedDBError"}}function Et(e){return new Promise((r,t)=>{e.addEventListener("success",()=>r(e.result)),e.addEventListener("error",()=>t(new ar(e.error)))})}function Or(e){return new Promise((r,t)=>{e.addEventListener("complete",()=>r()),e.addEventListener("error",()=>t(new ar(e.error))),e.addEventListener("abort",()=>t(new ar(e.error)))})}const ao="/rtc/v1/play",gt="miku_log",Mr=8e3,xi="1.2.6";var Pi="4.6.1";function or(e,r){return new Promise(function(t){return setTimeout(t,e,r)})}function Ai(e){return!!e&&typeof e.then=="function"}function Ii(e,r){try{var t=e();Ai(t)?t.then(function(i){return r(!0,i)},function(i){return r(!1,i)}):r(!0,t)}catch(i){r(!1,i)}}function Di(e,r,t){return t===void 0&&(t=16),U(this,void 0,void 0,function(){var i,n,o,a;return Se(this,function(s){switch(s.label){case 0:i=Array(e.length),n=Date.now(),o=0,s.label=1;case 1:return o<e.length?(i[o]=r(e[o],o),(a=Date.now())>=n+t?(n=a,[4,new Promise(function(d){var c=new MessageChannel;c.port1.onmessage=function(){return d()},c.port2.postMessage(null)})]):[3,3]):[3,4];case 2:s.sent(),s.label=3;case 3:return++o,[3,1];case 4:return[2,i]}})})}function Rt(e){return e.then(void 0,function(){}),e}function Br(e){return parseInt(e)}function Be(e){return parseFloat(e)}function Xe(e,r){return typeof e=="number"&&isNaN(e)?r:e}function we(e){return e.reduce(function(r,t){return r+(t?1:0)},0)}function Li(e,r){if(r===void 0&&(r=1),Math.abs(r)>=1)return Math.round(e/r)*r;var t=1/r;return Math.round(e*t)/t}function Qe(e,r){var t=e[0]>>>16,i=65535&e[0],n=e[1]>>>16,o=65535&e[1],a=r[0]>>>16,s=65535&r[0],d=r[1]>>>16,c=0,l=0,u=0,h=0;u+=(h+=o+(65535&r[1]))>>>16,h&=65535,l+=(u+=n+d)>>>16,u&=65535,c+=(l+=i+s)>>>16,l&=65535,c+=t+a,c&=65535,e[0]=c<<16|l,e[1]=u<<16|h}function Le(e,r){var t=e[0]>>>16,i=65535&e[0],n=e[1]>>>16,o=65535&e[1],a=r[0]>>>16,s=65535&r[0],d=r[1]>>>16,c=65535&r[1],l=0,u=0,h=0,p=0;h+=(p+=o*c)>>>16,p&=65535,u+=(h+=n*c)>>>16,h&=65535,u+=(h+=o*d)>>>16,h&=65535,l+=(u+=i*c)>>>16,u&=65535,l+=(u+=n*d)>>>16,u&=65535,l+=(u+=o*s)>>>16,u&=65535,l+=t*c+i*d+n*s+o*a,l&=65535,e[0]=l<<16|u,e[1]=h<<16|p}function vt(e,r){var t=e[0];(r%=64)===32?(e[0]=e[1],e[1]=t):r<32?(e[0]=t<<r|e[1]>>>32-r,e[1]=e[1]<<r|t>>>32-r):(r-=32,e[0]=e[1]<<r|t>>>32-r,e[1]=t<<r|e[1]>>>32-r)}function Re(e,r){(r%=64)!==0&&(r<32?(e[0]=e[1]>>>32-r,e[1]=e[1]<<r):(e[0]=e[1]<<r-32,e[1]=0))}function ie(e,r){e[0]^=r[0],e[1]^=r[1]}var oo=[4283543511,3981806797],so=[3301882366,444984403];function Oi(e){var r=[0,e[0]>>>1];ie(e,r),Le(e,oo),r[1]=e[0]>>>1,ie(e,r),Le(e,so),r[1]=e[0]>>>1,ie(e,r)}var sr=[2277735313,289559509],cr=[1291169091,658871167],Mi=[0,5],co=[0,1390208809],lo=[0,944331445];function uo(e,r){var t=function(h){for(var p=new Uint8Array(h.length),w=0;w<h.length;w++){var C=h.charCodeAt(w);if(C>127)return new TextEncoder().encode(h);p[w]=C}return p}(e);r=r||0;var i,n=[0,t.length],o=n[1]%16,a=n[1]-o,s=[0,r],d=[0,r],c=[0,0],l=[0,0];for(i=0;i<a;i+=16)c[0]=t[i+4]|t[i+5]<<8|t[i+6]<<16|t[i+7]<<24,c[1]=t[i]|t[i+1]<<8|t[i+2]<<16|t[i+3]<<24,l[0]=t[i+12]|t[i+13]<<8|t[i+14]<<16|t[i+15]<<24,l[1]=t[i+8]|t[i+9]<<8|t[i+10]<<16|t[i+11]<<24,Le(c,sr),vt(c,31),Le(c,cr),ie(s,c),vt(s,27),Qe(s,d),Le(s,Mi),Qe(s,co),Le(l,cr),vt(l,33),Le(l,sr),ie(d,l),vt(d,31),Qe(d,s),Le(d,Mi),Qe(d,lo);c[0]=0,c[1]=0,l[0]=0,l[1]=0;var u=[0,0];switch(o){case 15:u[1]=t[i+14],Re(u,48),ie(l,u);case 14:u[1]=t[i+13],Re(u,40),ie(l,u);case 13:u[1]=t[i+12],Re(u,32),ie(l,u);case 12:u[1]=t[i+11],Re(u,24),ie(l,u);case 11:u[1]=t[i+10],Re(u,16),ie(l,u);case 10:u[1]=t[i+9],Re(u,8),ie(l,u);case 9:u[1]=t[i+8],ie(l,u),Le(l,cr),vt(l,33),Le(l,sr),ie(d,l);case 8:u[1]=t[i+7],Re(u,56),ie(c,u);case 7:u[1]=t[i+6],Re(u,48),ie(c,u);case 6:u[1]=t[i+5],Re(u,40),ie(c,u);case 5:u[1]=t[i+4],Re(u,32),ie(c,u);case 4:u[1]=t[i+3],Re(u,24),ie(c,u);case 3:u[1]=t[i+2],Re(u,16),ie(c,u);case 2:u[1]=t[i+1],Re(u,8),ie(c,u);case 1:u[1]=t[i],ie(c,u),Le(c,sr),vt(c,31),Le(c,cr),ie(s,c)}return ie(s,n),ie(d,n),Qe(s,d),Qe(d,s),Oi(s),Oi(d),Qe(s,d),Qe(d,s),("00000000"+(s[0]>>>0).toString(16)).slice(-8)+("00000000"+(s[1]>>>0).toString(16)).slice(-8)+("00000000"+(d[0]>>>0).toString(16)).slice(-8)+("00000000"+(d[1]>>>0).toString(16)).slice(-8)}function ho(e,r,t,i){var n=Object.keys(e).filter(function(a){return!function(s,d){for(var c=0,l=s.length;c<l;++c)if(s[c]===d)return!0;return!1}(t,a)}),o=Rt(Di(n,function(a){return function(s,d){var c=Rt(new Promise(function(l){var u=Date.now();Ii(s.bind(null,d),function(){for(var h=[],p=0;p<arguments.length;p++)h[p]=arguments[p];var w=Date.now()-u;if(!h[0])return l(function(){return{error:h[1],duration:w}});var C=h[1];if(function(f){return typeof f!="function"}(C))return l(function(){return{value:C,duration:w}});l(function(){return new Promise(function(f){var v=Date.now();Ii(C,function(){for(var g=[],b=0;b<arguments.length;b++)g[b]=arguments[b];var x=w+Date.now()-v;if(!g[0])return f({error:g[1],duration:x});f({value:g[1],duration:x})})})})})}));return function(){return c.then(function(l){return l()})}}(e[a],r)},i));return function(){return U(this,void 0,void 0,function(){var a,s,d,c;return Se(this,function(l){switch(l.label){case 0:return[4,o];case 1:return[4,Di(l.sent(),function(u){return Rt(u())},i)];case 2:return a=l.sent(),[4,Promise.all(a)];case 3:for(s=l.sent(),d={},c=0;c<n.length;++c)d[n[c]]=s[c];return[2,d]}})})}}function Bi(){var e=window,r=navigator;return we(["MSCSSMatrix"in e,"msSetImmediate"in e,"msIndexedDB"in e,"msMaxTouchPoints"in r,"msPointerEnabled"in r])>=4}function xt(){var e=window,r=navigator;return we(["webkitPersistentStorage"in r,"webkitTemporaryStorage"in r,(r.vendor||"").indexOf("Google")===0,"webkitResolveLocalFileSystemURL"in e,"BatteryManager"in e,"webkitMediaStream"in e,"webkitSpeechGrammar"in e])>=5}function Ne(){var e=window;return we(["ApplePayError"in e,"CSSPrimitiveValue"in e,"Counter"in e,navigator.vendor.indexOf("Apple")===0,"RGBColor"in e,"WebKitMediaKeys"in e])>=4}function Nr(){var e=window,r=e.HTMLElement,t=e.Document;return we(["safari"in e,!("ongestureend"in e),!("TouchEvent"in e),!("orientation"in e),r&&!("autocapitalize"in r.prototype),t&&"pointerLockElement"in t.prototype])>=4}function Pt(){var e,r=window;return e=r.print,/^function\s.*?\{\s*\[native code]\s*}$/.test(String(e))&&String(r.browser)==="[object WebPageNamespace]"}function Ni(){var e,r,t=window;return we(["buildID"in navigator,"MozAppearance"in((r=(e=document.documentElement)===null||e===void 0?void 0:e.style)!==null&&r!==void 0?r:{}),"onmozfullscreenchange"in t,"mozInnerScreenX"in t,"CSSMozDocumentRule"in t,"CanvasCaptureMediaStream"in t])>=4}function At(){var e=window,r=navigator,t=e.CSS,i=e.HTMLButtonElement;return we([!("getStorageUpdates"in r),i&&"popover"in i.prototype,"CSSCounterStyleRule"in e,t.supports("font-size-adjust: ex-height 0.5"),t.supports("text-transform: full-width")])>=4}function po(){var e=document;return(e.exitFullscreen||e.msExitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen).call(e)}function Fr(){var e=xt(),r=Ni(),t=window,i=navigator,n="connection";return e?we([!("SharedWorker"in t),i[n]&&"ontypechange"in i[n],!("sinkId"in new Audio)])>=2:!!r&&we(["onorientationchange"in t,"orientation"in t,/android/i.test(i.appVersion)])>=2}function Fi(e){var r=new Error(e);return r.name=e,r}function ji(e,r,t){var i,n,o;return t===void 0&&(t=50),U(this,void 0,void 0,function(){var a,s;return Se(this,function(d){switch(d.label){case 0:a=document,d.label=1;case 1:return a.body?[3,3]:[4,or(t)];case 2:return d.sent(),[3,1];case 3:s=a.createElement("iframe"),d.label=4;case 4:return d.trys.push([4,,10,11]),[4,new Promise(function(c,l){var u=!1,h=function(){u=!0,c()};s.onload=h,s.onerror=function(C){u=!0,l(C)};var p=s.style;p.setProperty("display","block","important"),p.position="absolute",p.top="0",p.left="0",p.visibility="hidden",r&&"srcdoc"in s?s.srcdoc=r:s.src="about:blank",a.body.appendChild(s);var w=function(){var C,f;u||(((f=(C=s.contentWindow)===null||C===void 0?void 0:C.document)===null||f===void 0?void 0:f.readyState)==="complete"?h():setTimeout(w,10))};w()})];case 5:d.sent(),d.label=6;case 6:return!((n=(i=s.contentWindow)===null||i===void 0?void 0:i.document)===null||n===void 0)&&n.body?[3,8]:[4,or(t)];case 7:return d.sent(),[3,6];case 8:return[4,e(s,s.contentWindow)];case 9:return[2,d.sent()];case 10:return(o=s.parentNode)===null||o===void 0||o.removeChild(s),[7];case 11:return[2]}})})}function mo(e){for(var r=function(c){for(var l,u,h="Unexpected syntax '".concat(c,"'"),p=/^\s*([a-z-]*)(.*)$/i.exec(c),w=p[1]||void 0,C={},f=/([.:#][\w-]+|\[.+?\])/gi,v=function(A,R){C[A]=C[A]||[],C[A].push(R)};;){var g=f.exec(p[2]);if(!g)break;var b=g[0];switch(b[0]){case".":v("class",b.slice(1));break;case"#":v("id",b.slice(1));break;case"[":var x=/^\[([\w-]+)([~|^$*]?=("(.*?)"|([\w-]+)))?(\s+[is])?\]$/.exec(b);if(!x)throw new Error(h);v(x[1],(u=(l=x[4])!==null&&l!==void 0?l:x[5])!==null&&u!==void 0?u:"");break;default:throw new Error(h)}}return[w,C]}(e),t=r[0],i=r[1],n=document.createElement(t??"div"),o=0,a=Object.keys(i);o<a.length;o++){var s=a[o],d=i[s].join(" ");s==="style"?fo(n.style,d):n.setAttribute(s,d)}return n}function fo(e,r){for(var t=0,i=r.split(";");t<i.length;t++){var n=i[t],o=/^\s*([\w-]+)\s*:\s*(.+?)(\s*!([\w-]+))?\s*$/.exec(n);if(o){var a=o[1],s=o[2],d=o[4];e.setProperty(a,s,d||"")}}}var wt=["monospace","sans-serif","serif"],zi=["sans-serif-thin","ARNO PRO","Agency FB","Arabic Typesetting","Arial Unicode MS","AvantGarde Bk BT","BankGothic Md BT","Batang","Bitstream Vera Sans Mono","Calibri","Century","Century Gothic","Clarendon","EUROSTILE","Franklin Gothic","Futura Bk BT","Futura Md BT","GOTHAM","Gill Sans","HELV","Haettenschweiler","Helvetica Neue","Humanst521 BT","Leelawadee","Letter Gothic","Levenim MT","Lucida Bright","Lucida Sans","Menlo","MS Mincho","MS Outlook","MS Reference Specialty","MS UI Gothic","MT Extra","MYRIAD PRO","Marlett","Meiryo UI","Microsoft Uighur","Minion Pro","Monotype Corsiva","PMingLiU","Pristina","SCRIPTINA","Segoe UI Light","Serifa","SimHei","Small Fonts","Staccato222 BT","TRAJAN PRO","Univers CE 55 Medium","Vrinda","ZWAdobeF"];function jr(e){return e.toDataURL()}var dr,zr;function go(){var e=this;return function(){if(zr===void 0){var r=function(){var t=Vr();Gr(t)?zr=setTimeout(r,2500):(dr=t,zr=void 0)};r()}}(),function(){return U(e,void 0,void 0,function(){var r;return Se(this,function(t){switch(t.label){case 0:return Gr(r=Vr())?dr?[2,He([],dr)]:(i=document).fullscreenElement||i.msFullscreenElement||i.mozFullScreenElement||i.webkitFullscreenElement?[4,po()]:[3,2]:[3,2];case 1:t.sent(),r=Vr(),t.label=2;case 2:return Gr(r)||(dr=r),[2,r]}var i})})}}function Vr(){var e=screen;return[Xe(Be(e.availTop),null),Xe(Be(e.width)-Be(e.availWidth)-Xe(Be(e.availLeft),0),null),Xe(Be(e.height)-Be(e.availHeight)-Xe(Be(e.availTop),0),null),Xe(Be(e.availLeft),null)]}function Gr(e){for(var r=0;r<4;++r)if(e[r])return!1;return!0}function vo(e){var r;return U(this,void 0,void 0,function(){var t,i,n,o,a,s,d;return Se(this,function(c){switch(c.label){case 0:for(t=document,i=t.createElement("div"),n=new Array(e.length),o={},Vi(i),d=0;d<e.length;++d)(a=mo(e[d])).tagName==="DIALOG"&&a.show(),Vi(s=t.createElement("div")),s.appendChild(a),i.appendChild(s),n[d]=a;c.label=1;case 1:return t.body?[3,3]:[4,or(50)];case 2:return c.sent(),[3,1];case 3:t.body.appendChild(i);try{for(d=0;d<e.length;++d)n[d].offsetParent||(o[e[d]]=!0)}finally{(r=i.parentNode)===null||r===void 0||r.removeChild(i)}return[2,o]}})})}function Vi(e){e.style.setProperty("visibility","hidden","important"),e.style.setProperty("display","block","important")}function Gi(e){return matchMedia("(inverted-colors: ".concat(e,")")).matches}function Ui(e){return matchMedia("(forced-colors: ".concat(e,")")).matches}function yt(e){return matchMedia("(prefers-contrast: ".concat(e,")")).matches}function Wi(e){return matchMedia("(prefers-reduced-motion: ".concat(e,")")).matches}function Zi(e){return matchMedia("(prefers-reduced-transparency: ".concat(e,")")).matches}function Hi(e){return matchMedia("(dynamic-range: ".concat(e,")")).matches}var te=Math,ye=function(){return 0},Ur={default:[],apple:[{font:"-apple-system-body"}],serif:[{fontFamily:"serif"}],sans:[{fontFamily:"sans-serif"}],mono:[{fontFamily:"monospace"}],min:[{fontSize:"1px"}],system:[{fontFamily:"system-ui"}]},wo=function(){for(var e=window;;){var r=e.parent;if(!r||r===e)return!1;try{if(r.location.origin!==e.location.origin)return!0}catch(t){if(t instanceof Error&&t.name==="SecurityError")return!0;throw t}e=r}},yo=new Set([10752,2849,2884,2885,2886,2928,2929,2930,2931,2932,2960,2961,2962,2963,2964,2965,2966,2967,2968,2978,3024,3042,3088,3089,3106,3107,32773,32777,32777,32823,32824,32936,32937,32938,32939,32968,32969,32970,32971,3317,33170,3333,3379,3386,33901,33902,34016,34024,34076,3408,3410,3411,3412,3413,3414,3415,34467,34816,34817,34818,34819,34877,34921,34930,35660,35661,35724,35738,35739,36003,36004,36005,36347,36348,36349,37440,37441,37443,7936,7937,7938]),bo=new Set([34047,35723,36063,34852,34853,34854,34229,36392,36795,38449]),_o=["FRAGMENT_SHADER","VERTEX_SHADER"],So=["LOW_FLOAT","MEDIUM_FLOAT","HIGH_FLOAT","LOW_INT","MEDIUM_INT","HIGH_INT"],Xi="WEBGL_debug_renderer_info";function Yi(e){if(e.webgl)return e.webgl.context;var r,t=document.createElement("canvas");t.addEventListener("webglCreateContextError",function(){return r=void 0});for(var i=0,n=["webgl","experimental-webgl"];i<n.length;i++){var o=n[i];try{r=t.getContext(o)}catch{}if(r)break}return e.webgl={context:r},r}function To(e,r,t){var i=e.getShaderPrecisionFormat(e[r],e[t]);return i?[i.rangeMin,i.rangeMax,i.precision]:[]}function Ji(e){return Object.keys(e.__proto__).filter(ko)}function ko(e){return typeof e=="string"&&!e.match(/[^A-Z0-9_x]/)}function Ki(){return Ni()}function $i(e){return typeof e.getParameter=="function"}var Co={fonts:function(){var e=this;return ji(function(r,t){var i=t.document;return U(e,void 0,void 0,function(){var n,o,a,s,d,c,l,u,h,p,w;return Se(this,function(C){for((n=i.body).style.fontSize="48px",(o=i.createElement("div")).style.setProperty("visibility","hidden","important"),a={},s={},d=function(f){var v=i.createElement("span"),g=v.style;return g.position="absolute",g.top="0",g.left="0",g.fontFamily=f,v.textContent="mmMwWLliI0O&1",o.appendChild(v),v},c=function(f,v){return d("'".concat(f,"',").concat(v))},l=function(){for(var f={},v=function(x){f[x]=wt.map(function(A){return c(x,A)})},g=0,b=zi;g<b.length;g++)v(b[g]);return f},u=function(f){return wt.some(function(v,g){return f[g].offsetWidth!==a[v]||f[g].offsetHeight!==s[v]})},h=function(){return wt.map(d)}(),p=l(),n.appendChild(o),w=0;w<wt.length;w++)a[wt[w]]=h[w].offsetWidth,s[wt[w]]=h[w].offsetHeight;return[2,zi.filter(function(f){return u(p[f])})]})})})},domBlockers:function(e){var r=(e===void 0?{}:e).debug;return U(this,void 0,void 0,function(){var t,i,n,o,a;return Se(this,function(s){switch(s.label){case 0:return Ne()||Fr()?(d=atob,t={abpIndo:["#Iklan-Melayang","#Kolom-Iklan-728","#SidebarIklan-wrapper",'[title="ALIENBOLA" i]',d("I0JveC1CYW5uZXItYWRz")],abpvn:[".quangcao","#mobileCatfish",d("LmNsb3NlLWFkcw=="),'[id^="bn_bottom_fixed_"]',"#pmadv"],adBlockFinland:[".mainostila",d("LnNwb25zb3JpdA=="),".ylamainos",d("YVtocmVmKj0iL2NsaWNrdGhyZ2guYXNwPyJd"),d("YVtocmVmXj0iaHR0cHM6Ly9hcHAucmVhZHBlYWsuY29tL2FkcyJd")],adBlockPersian:["#navbar_notice_50",".kadr",'TABLE[width="140px"]',"#divAgahi",d("YVtocmVmXj0iaHR0cDovL2cxLnYuZndtcm0ubmV0L2FkLyJd")],adBlockWarningRemoval:["#adblock-honeypot",".adblocker-root",".wp_adblock_detect",d("LmhlYWRlci1ibG9ja2VkLWFk"),d("I2FkX2Jsb2NrZXI=")],adGuardAnnoyances:[".hs-sosyal","#cookieconsentdiv",'div[class^="app_gdpr"]',".as-oil",'[data-cypress="soft-push-notification-modal"]'],adGuardBase:[".BetterJsPopOverlay",d("I2FkXzMwMFgyNTA="),d("I2Jhbm5lcmZsb2F0MjI="),d("I2NhbXBhaWduLWJhbm5lcg=="),d("I0FkLUNvbnRlbnQ=")],adGuardChinese:[d("LlppX2FkX2FfSA=="),d("YVtocmVmKj0iLmh0aGJldDM0LmNvbSJd"),"#widget-quan",d("YVtocmVmKj0iLzg0OTkyMDIwLnh5eiJd"),d("YVtocmVmKj0iLjE5NTZobC5jb20vIl0=")],adGuardFrench:["#pavePub",d("LmFkLWRlc2t0b3AtcmVjdGFuZ2xl"),".mobile_adhesion",".widgetadv",d("LmFkc19iYW4=")],adGuardGerman:['aside[data-portal-id="leaderboard"]'],adGuardJapanese:["#kauli_yad_1",d("YVtocmVmXj0iaHR0cDovL2FkMi50cmFmZmljZ2F0ZS5uZXQvIl0="),d("Ll9wb3BJbl9pbmZpbml0ZV9hZA=="),d("LmFkZ29vZ2xl"),d("Ll9faXNib29zdFJldHVybkFk")],adGuardMobile:[d("YW1wLWF1dG8tYWRz"),d("LmFtcF9hZA=="),'amp-embed[type="24smi"]',"#mgid_iframe1",d("I2FkX2ludmlld19hcmVh")],adGuardRussian:[d("YVtocmVmXj0iaHR0cHM6Ly9hZC5sZXRtZWFkcy5jb20vIl0="),d("LnJlY2xhbWE="),'div[id^="smi2adblock"]',d("ZGl2W2lkXj0iQWRGb3hfYmFubmVyXyJd"),"#psyduckpockeball"],adGuardSocial:[d("YVtocmVmXj0iLy93d3cuc3R1bWJsZXVwb24uY29tL3N1Ym1pdD91cmw9Il0="),d("YVtocmVmXj0iLy90ZWxlZ3JhbS5tZS9zaGFyZS91cmw/Il0="),".etsy-tweet","#inlineShare",".popup-social"],adGuardSpanishPortuguese:["#barraPublicidade","#Publicidade","#publiEspecial","#queTooltip",".cnt-publi"],adGuardTrackingProtection:["#qoo-counter",d("YVtocmVmXj0iaHR0cDovL2NsaWNrLmhvdGxvZy5ydS8iXQ=="),d("YVtocmVmXj0iaHR0cDovL2hpdGNvdW50ZXIucnUvdG9wL3N0YXQucGhwIl0="),d("YVtocmVmXj0iaHR0cDovL3RvcC5tYWlsLnJ1L2p1bXAiXQ=="),"#top100counter"],adGuardTurkish:["#backkapat",d("I3Jla2xhbWk="),d("YVtocmVmXj0iaHR0cDovL2Fkc2Vydi5vbnRlay5jb20udHIvIl0="),d("YVtocmVmXj0iaHR0cDovL2l6bGVuemkuY29tL2NhbXBhaWduLyJd"),d("YVtocmVmXj0iaHR0cDovL3d3dy5pbnN0YWxsYWRzLm5ldC8iXQ==")],bulgarian:[d("dGQjZnJlZW5ldF90YWJsZV9hZHM="),"#ea_intext_div",".lapni-pop-over","#xenium_hot_offers"],easyList:[".yb-floorad",d("LndpZGdldF9wb19hZHNfd2lkZ2V0"),d("LnRyYWZmaWNqdW5reS1hZA=="),".textad_headline",d("LnNwb25zb3JlZC10ZXh0LWxpbmtz")],easyListChina:[d("LmFwcGd1aWRlLXdyYXBbb25jbGljayo9ImJjZWJvcy5jb20iXQ=="),d("LmZyb250cGFnZUFkdk0="),"#taotaole","#aafoot.top_box",".cfa_popup"],easyListCookie:[".ezmob-footer",".cc-CookieWarning","[data-cookie-number]",d("LmF3LWNvb2tpZS1iYW5uZXI="),".sygnal24-gdpr-modal-wrap"],easyListCzechSlovak:["#onlajny-stickers",d("I3Jla2xhbW5pLWJveA=="),d("LnJla2xhbWEtbWVnYWJvYXJk"),".sklik",d("W2lkXj0ic2tsaWtSZWtsYW1hIl0=")],easyListDutch:[d("I2FkdmVydGVudGll"),d("I3ZpcEFkbWFya3RCYW5uZXJCbG9jaw=="),".adstekst",d("YVtocmVmXj0iaHR0cHM6Ly94bHR1YmUubmwvY2xpY2svIl0="),"#semilo-lrectangle"],easyListGermany:["#SSpotIMPopSlider",d("LnNwb25zb3JsaW5rZ3J1ZW4="),d("I3dlcmJ1bmdza3k="),d("I3Jla2xhbWUtcmVjaHRzLW1pdHRl"),d("YVtocmVmXj0iaHR0cHM6Ly9iZDc0Mi5jb20vIl0=")],easyListItaly:[d("LmJveF9hZHZfYW5udW5jaQ=="),".sb-box-pubbliredazionale",d("YVtocmVmXj0iaHR0cDovL2FmZmlsaWF6aW9uaWFkcy5zbmFpLml0LyJd"),d("YVtocmVmXj0iaHR0cHM6Ly9hZHNlcnZlci5odG1sLml0LyJd"),d("YVtocmVmXj0iaHR0cHM6Ly9hZmZpbGlhemlvbmlhZHMuc25haS5pdC8iXQ==")],easyListLithuania:[d("LnJla2xhbW9zX3RhcnBhcw=="),d("LnJla2xhbW9zX251b3JvZG9z"),d("aW1nW2FsdD0iUmVrbGFtaW5pcyBza3lkZWxpcyJd"),d("aW1nW2FsdD0iRGVkaWt1b3RpLmx0IHNlcnZlcmlhaSJd"),d("aW1nW2FsdD0iSG9zdGluZ2FzIFNlcnZlcmlhaS5sdCJd")],estonian:[d("QVtocmVmKj0iaHR0cDovL3BheTRyZXN1bHRzMjQuZXUiXQ==")],fanboyAnnoyances:["#ac-lre-player",".navigate-to-top","#subscribe_popup",".newsletter_holder","#back-top"],fanboyAntiFacebook:[".util-bar-module-firefly-visible"],fanboyEnhancedTrackers:[".open.pushModal","#issuem-leaky-paywall-articles-zero-remaining-nag","#sovrn_container",'div[class$="-hide"][zoompage-fontsize][style="display: block;"]',".BlockNag__Card"],fanboySocial:["#FollowUs","#meteored_share","#social_follow",".article-sharer",".community__social-desc"],frellwitSwedish:[d("YVtocmVmKj0iY2FzaW5vcHJvLnNlIl1bdGFyZ2V0PSJfYmxhbmsiXQ=="),d("YVtocmVmKj0iZG9rdG9yLXNlLm9uZWxpbmsubWUiXQ=="),"article.category-samarbete",d("ZGl2LmhvbGlkQWRz"),"ul.adsmodern"],greekAdBlock:[d("QVtocmVmKj0iYWRtYW4ub3RlbmV0LmdyL2NsaWNrPyJd"),d("QVtocmVmKj0iaHR0cDovL2F4aWFiYW5uZXJzLmV4b2R1cy5nci8iXQ=="),d("QVtocmVmKj0iaHR0cDovL2ludGVyYWN0aXZlLmZvcnRobmV0LmdyL2NsaWNrPyJd"),"DIV.agores300","TABLE.advright"],hungarian:["#cemp_doboz",".optimonk-iframe-container",d("LmFkX19tYWlu"),d("W2NsYXNzKj0iR29vZ2xlQWRzIl0="),"#hirdetesek_box"],iDontCareAboutCookies:['.alert-info[data-block-track*="CookieNotice"]',".ModuleTemplateCookieIndicator",".o--cookies--container","#cookies-policy-sticky","#stickyCookieBar"],icelandicAbp:[d("QVtocmVmXj0iL2ZyYW1ld29yay9yZXNvdXJjZXMvZm9ybXMvYWRzLmFzcHgiXQ==")],latvian:[d("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiAxMjBweDsgaGVpZ2h0OiA0MHB4OyBvdmVyZmxvdzogaGlkZGVuOyBwb3NpdGlvbjogcmVsYXRpdmU7Il0="),d("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiA4OHB4OyBoZWlnaHQ6IDMxcHg7IG92ZXJmbG93OiBoaWRkZW47IHBvc2l0aW9uOiByZWxhdGl2ZTsiXQ==")],listKr:[d("YVtocmVmKj0iLy9hZC5wbGFuYnBsdXMuY28ua3IvIl0="),d("I2xpdmVyZUFkV3JhcHBlcg=="),d("YVtocmVmKj0iLy9hZHYuaW1hZHJlcC5jby5rci8iXQ=="),d("aW5zLmZhc3R2aWV3LWFk"),".revenue_unit_item.dable"],listeAr:[d("LmdlbWluaUxCMUFk"),".right-and-left-sponsers",d("YVtocmVmKj0iLmFmbGFtLmluZm8iXQ=="),d("YVtocmVmKj0iYm9vcmFxLm9yZyJd"),d("YVtocmVmKj0iZHViaXp6bGUuY29tL2FyLz91dG1fc291cmNlPSJd")],listeFr:[d("YVtocmVmXj0iaHR0cDovL3Byb21vLnZhZG9yLmNvbS8iXQ=="),d("I2FkY29udGFpbmVyX3JlY2hlcmNoZQ=="),d("YVtocmVmKj0id2Vib3JhbWEuZnIvZmNnaS1iaW4vIl0="),".site-pub-interstitiel",'div[id^="crt-"][data-criteo-id]'],officialPolish:["#ceneo-placeholder-ceneo-12",d("W2hyZWZePSJodHRwczovL2FmZi5zZW5kaHViLnBsLyJd"),d("YVtocmVmXj0iaHR0cDovL2Fkdm1hbmFnZXIudGVjaGZ1bi5wbC9yZWRpcmVjdC8iXQ=="),d("YVtocmVmXj0iaHR0cDovL3d3dy50cml6ZXIucGwvP3V0bV9zb3VyY2UiXQ=="),d("ZGl2I3NrYXBpZWNfYWQ=")],ro:[d("YVtocmVmXj0iLy9hZmZ0cmsuYWx0ZXgucm8vQ291bnRlci9DbGljayJd"),d("YVtocmVmXj0iaHR0cHM6Ly9ibGFja2ZyaWRheXNhbGVzLnJvL3Ryay9zaG9wLyJd"),d("YVtocmVmXj0iaHR0cHM6Ly9ldmVudC4ycGVyZm9ybWFudC5jb20vZXZlbnRzL2NsaWNrIl0="),d("YVtocmVmXj0iaHR0cHM6Ly9sLnByb2ZpdHNoYXJlLnJvLyJd"),'a[href^="/url/"]'],ruAd:[d("YVtocmVmKj0iLy9mZWJyYXJlLnJ1LyJd"),d("YVtocmVmKj0iLy91dGltZy5ydS8iXQ=="),d("YVtocmVmKj0iOi8vY2hpa2lkaWtpLnJ1Il0="),"#pgeldiz",".yandex-rtb-block"],thaiAds:["a[href*=macau-uta-popup]",d("I2Fkcy1nb29nbGUtbWlkZGxlX3JlY3RhbmdsZS1ncm91cA=="),d("LmFkczMwMHM="),".bumq",".img-kosana"],webAnnoyancesUltralist:["#mod-social-share-2","#social-tools",d("LmN0cGwtZnVsbGJhbm5lcg=="),".zergnet-recommend",".yt.btn-link.btn-md.btn"]},i=Object.keys(t),[4,vo((a=[]).concat.apply(a,i.map(function(c){return t[c]})))]):[2,void 0];case 1:return n=s.sent(),r&&function(c,l){for(var u="DOM blockers debug:\n```",h=0,p=Object.keys(c);h<p.length;h++){var w=p[h];u+=`
`.concat(w,":");for(var C=0,f=c[w];C<f.length;C++){var v=f[C];u+=`
  `.concat(l[v]?"ðŸš«":"âž¡ï¸"," ").concat(v)}}console.log("".concat(u,"\n```"))}(t,n),(o=i.filter(function(c){var l=t[c];return we(l.map(function(u){return n[u]}))>.6*l.length})).sort(),[2,o]}var d})})},fontPreferences:function(){return function(e,r){return r===void 0&&(r=4e3),ji(function(t,i){var n=i.document,o=n.body,a=o.style;a.width="".concat(r,"px"),a.webkitTextSizeAdjust=a.textSizeAdjust="none",xt()?o.style.zoom="".concat(1/i.devicePixelRatio):Ne()&&(o.style.zoom="reset");var s=n.createElement("div");return s.textContent=He([],Array(r/20|0)).map(function(){return"word"}).join(" "),o.appendChild(s),e(n,o)},'<!doctype html><html><head><meta name="viewport" content="width=device-width, initial-scale=1">')}(function(e,r){for(var t={},i={},n=0,o=Object.keys(Ur);n<o.length;n++){var a=o[n],s=Ur[a],d=s[0],c=d===void 0?{}:d,l=s[1],u=l===void 0?"mmMwWLliI0fiflO&1":l,h=e.createElement("span");h.textContent=u,h.style.whiteSpace="nowrap";for(var p=0,w=Object.keys(c);p<w.length;p++){var C=w[p],f=c[C];f!==void 0&&(h.style[C]=f)}t[a]=h,r.append(e.createElement("br"),h)}for(var v=0,g=Object.keys(Ur);v<g.length;v++)i[a=g[v]]=t[a].getBoundingClientRect().width;return i})},audio:function(){return Ne()&&At()&&Pt()||xt()&&(e=navigator,r=window,t=Audio.prototype,i=r.visualViewport,we(["srLatency"in t,"srChannelCount"in t,"devicePosture"in e,i&&"segments"in i,"getTextInformation"in Image.prototype])>=3)&&function(){var n=window,o=n.URLPattern;return we(["union"in Set.prototype,"Iterator"in n,o&&"hasRegExpGroups"in o.prototype,"RGB8"in WebGLRenderingContext.prototype])>=3}()?-4:function(){var n=window,o=n.OfflineAudioContext||n.webkitOfflineAudioContext;if(!o)return-2;if(Ne()&&!Nr()&&!function(){var w=window;return we(["DOMRectList"in w,"RTCPeerConnectionIceEvent"in w,"SVGGeometryElement"in w,"ontransitioncancel"in w])>=3}())return-1;var a=4500,s=new o(1,5e3,44100),d=s.createOscillator();d.type="triangle",d.frequency.value=1e4;var c=s.createDynamicsCompressor();c.threshold.value=-50,c.knee.value=40,c.ratio.value=12,c.attack.value=0,c.release.value=.25,d.connect(c),c.connect(s.destination),d.start(0);var l=function(w){var C=3,f=500,v=500,g=5e3,b=function(){},x=new Promise(function(A,R){var k=!1,_=0,T=0;w.oncomplete=function(B){return A(B.renderedBuffer)};var E=function(){setTimeout(function(){return R(Fi("timeout"))},Math.min(v,T+g-Date.now()))},K=function(){try{var B=w.startRendering();switch(Ai(B)&&Rt(B),w.state){case"running":T=Date.now(),k&&E();break;case"suspended":document.hidden||_++,k&&_>=C?R(Fi("suspended")):setTimeout(K,f)}}catch(H){R(H)}};K(),b=function(){k||(k=!0,T>0&&E())}});return[x,b]}(s),u=l[0],h=l[1],p=Rt(u.then(function(w){return function(C){for(var f=0,v=0;v<C.length;++v)f+=Math.abs(C[v]);return f}(w.getChannelData(0).subarray(a))},function(w){if(w.name==="timeout"||w.name==="suspended")return-3;throw w}));return function(){return h(),p}}();var e,r,t,i},screenFrame:function(){var e=this;if(Ne()&&At()&&Pt())return function(){return Promise.resolve(void 0)};var r=go();return function(){return U(e,void 0,void 0,function(){var t,i;return Se(this,function(n){switch(n.label){case 0:return[4,r()];case 1:return t=n.sent(),[2,[(i=function(o){return o===null?null:Li(o,10)})(t[0]),i(t[1]),i(t[2]),i(t[3])]]}})})}},canvas:function(){return function(e){var r,t,i,n=!1,o=function(){var d=document.createElement("canvas");return d.width=1,d.height=1,[d,d.getContext("2d")]}(),a=o[0],s=o[1];return function(d,c){return!(!c||!d.toDataURL)}(a,s)?(n=function(d){return d.rect(0,0,10,10),d.rect(2,2,6,6),!d.isPointInPath(5,5,"evenodd")}(s),e?t=i="skipped":(r=function(d,c){(function(p,w){p.width=240,p.height=60,w.textBaseline="alphabetic",w.fillStyle="#f60",w.fillRect(100,1,62,20),w.fillStyle="#069",w.font='11pt "Times New Roman"';var C="Cwm fjordbank gly ".concat("ðŸ˜ƒ");w.fillText(C,2,15),w.fillStyle="rgba(102, 204, 0, 0.2)",w.font="18pt Arial",w.fillText(C,4,45)})(d,c);var l=jr(d),u=jr(d);if(l!==u)return["unstable","unstable"];(function(p,w){p.width=122,p.height=110,w.globalCompositeOperation="multiply";for(var C=0,f=[["#f2f",40,40],["#2ff",80,40],["#ff2",60,80]];C<f.length;C++){var v=f[C],g=v[0],b=v[1],x=v[2];w.fillStyle=g,w.beginPath(),w.arc(b,x,40,0,2*Math.PI,!0),w.closePath(),w.fill()}w.fillStyle="#f9c",w.arc(60,60,60,0,2*Math.PI,!0),w.arc(60,60,20,0,2*Math.PI,!0),w.fill("evenodd")})(d,c);var h=jr(d);return[h,l]}(a,s),t=r[0],i=r[1])):t=i="unsupported",{winding:n,geometry:t,text:i}}(Ne()&&At()&&Pt())},osCpu:function(){return navigator.oscpu},languages:function(){var e,r=navigator,t=[],i=r.language||r.userLanguage||r.browserLanguage||r.systemLanguage;if(i!==void 0&&t.push([i]),Array.isArray(r.languages))xt()&&we([!("MediaSettingsRange"in(e=window)),"RTCEncodedAudioFrame"in e,""+e.Intl=="[object Intl]",""+e.Reflect=="[object Reflect]"])>=3||t.push(r.languages);else if(typeof r.languages=="string"){var n=r.languages;n&&t.push(n.split(","))}return t},colorDepth:function(){return window.screen.colorDepth},deviceMemory:function(){return Xe(Be(navigator.deviceMemory),void 0)},screenResolution:function(){var e,r,t;if(!(Ne()&&At()&&Pt()))return e=screen,(t=[(r=function(i){return Xe(Br(i),null)})(e.width),r(e.height)]).sort().reverse(),t},hardwareConcurrency:function(){return Xe(Br(navigator.hardwareConcurrency),void 0)},timezone:function(){var e,r=(e=window.Intl)===null||e===void 0?void 0:e.DateTimeFormat;if(r){var t=new r().resolvedOptions().timeZone;if(t)return t}var i,n=(i=new Date().getFullYear(),-Math.max(Be(new Date(i,0,1).getTimezoneOffset()),Be(new Date(i,6,1).getTimezoneOffset())));return"UTC".concat(n>=0?"+":"").concat(n)},sessionStorage:function(){try{return!!window.sessionStorage}catch{return!0}},localStorage:function(){try{return!!window.localStorage}catch{return!0}},indexedDB:function(){var e,r;if(!(Bi()||(e=window,r=navigator,we(["msWriteProfilerMark"in e,"MSStream"in e,"msLaunchUri"in r,"msSaveBlob"in r])>=3&&!Bi())))try{return!!window.indexedDB}catch{return!0}},openDatabase:function(){return!!window.openDatabase},cpuClass:function(){return navigator.cpuClass},platform:function(){var e=navigator.platform;return e==="MacIntel"&&Ne()&&!Nr()?function(){if(navigator.platform==="iPad")return!0;var r=screen,t=r.width/r.height;return we(["MediaSource"in window,!!Element.prototype.webkitRequestFullscreen,t>.65&&t<1.53])>=2}()?"iPad":"iPhone":e},plugins:function(){var e=navigator.plugins;if(e){for(var r=[],t=0;t<e.length;++t){var i=e[t];if(i){for(var n=[],o=0;o<i.length;++o){var a=i[o];n.push({type:a.type,suffixes:a.suffixes})}r.push({name:i.name,description:i.description,mimeTypes:n})}}return r}},touchSupport:function(){var e,r=navigator,t=0;r.maxTouchPoints!==void 0?t=Br(r.maxTouchPoints):r.msMaxTouchPoints!==void 0&&(t=r.msMaxTouchPoints);try{document.createEvent("TouchEvent"),e=!0}catch{e=!1}return{maxTouchPoints:t,touchEvent:e,touchStart:"ontouchstart"in window}},vendor:function(){return navigator.vendor||""},vendorFlavors:function(){for(var e=[],r=0,t=["chrome","safari","__crWeb","__gCrWeb","yandex","__yb","__ybro","__firefox__","__edgeTrackingPreventionStatistics","webkit","oprt","samsungAr","ucweb","UCShellJava","puffinDevice"];r<t.length;r++){var i=t[r],n=window[i];n&&typeof n=="object"&&e.push(i)}return e.sort()},cookiesEnabled:function(){var e=document;try{e.cookie="cookietest=1; SameSite=Strict;";var r=e.cookie.indexOf("cookietest=")!==-1;return e.cookie="cookietest=1; SameSite=Strict; expires=Thu, 01-Jan-1970 00:00:01 GMT",r}catch{return!1}},colorGamut:function(){for(var e=0,r=["rec2020","p3","srgb"];e<r.length;e++){var t=r[e];if(matchMedia("(color-gamut: ".concat(t,")")).matches)return t}},invertedColors:function(){return!!Gi("inverted")||!Gi("none")&&void 0},forcedColors:function(){return!!Ui("active")||!Ui("none")&&void 0},monochrome:function(){if(matchMedia("(min-monochrome: 0)").matches){for(var e=0;e<=100;++e)if(matchMedia("(max-monochrome: ".concat(e,")")).matches)return e;throw new Error("Too high value")}},contrast:function(){return yt("no-preference")?0:yt("high")||yt("more")?1:yt("low")||yt("less")?-1:yt("forced")?10:void 0},reducedMotion:function(){return!!Wi("reduce")||!Wi("no-preference")&&void 0},reducedTransparency:function(){return!!Zi("reduce")||!Zi("no-preference")&&void 0},hdr:function(){return!!Hi("high")||!Hi("standard")&&void 0},math:function(){var e,r=te.acos||ye,t=te.acosh||ye,i=te.asin||ye,n=te.asinh||ye,o=te.atanh||ye,a=te.atan||ye,s=te.sin||ye,d=te.sinh||ye,c=te.cos||ye,l=te.cosh||ye,u=te.tan||ye,h=te.tanh||ye,p=te.exp||ye,w=te.expm1||ye,C=te.log1p||ye;return{acos:r(.12312423423423424),acosh:t(1e308),acoshPf:(e=1e154,te.log(e+te.sqrt(e*e-1))),asin:i(.12312423423423424),asinh:n(1),asinhPf:function(f){return te.log(f+te.sqrt(f*f+1))}(1),atanh:o(.5),atanhPf:function(f){return te.log((1+f)/(1-f))/2}(.5),atan:a(.5),sin:s(-1e300),sinh:d(1),sinhPf:function(f){return te.exp(f)-1/te.exp(f)/2}(1),cos:c(10.000000000123),cosh:l(1),coshPf:function(f){return(te.exp(f)+1/te.exp(f))/2}(1),tan:u(-1e300),tanh:h(1),tanhPf:function(f){return(te.exp(2*f)-1)/(te.exp(2*f)+1)}(1),exp:p(1),expm1:w(1),expm1Pf:function(f){return te.exp(f)-1}(1),log1p:C(10),log1pPf:function(f){return te.log(1+f)}(10),powPI:function(f){return te.pow(te.PI,f)}(-100)}},pdfViewerEnabled:function(){return navigator.pdfViewerEnabled},architecture:function(){var e=new Float32Array(1),r=new Uint8Array(e.buffer);return e[0]=1/0,e[0]=e[0]-e[0],r[3]},applePay:function(){var e=window.ApplePaySession;if(typeof(e==null?void 0:e.canMakePayments)!="function")return-1;if(wo())return-3;try{return e.canMakePayments()?1:0}catch(r){return function(t){if(t instanceof Error&&t.name==="InvalidAccessError"&&/\bfrom\b.*\binsecure\b/i.test(t.message))return-2;throw t}(r)}},privateClickMeasurement:function(){var e,r=document.createElement("a"),t=(e=r.attributionSourceId)!==null&&e!==void 0?e:r.attributionsourceid;return t===void 0?void 0:String(t)},audioBaseLatency:function(){var e;return Fr()||Ne()?window.AudioContext&&(e=new AudioContext().baseLatency)!==null&&e!==void 0?e:-1:-2},dateTimeLocale:function(){if(!window.Intl)return-1;var e=window.Intl.DateTimeFormat;if(!e)return-2;var r=e().resolvedOptions().locale;return r||r===""?r:-3},webGlBasics:function(e){var r,t,i,n,o,a,s=Yi(e.cache);if(!s)return-1;if(!$i(s))return-2;var d=Ki()?null:s.getExtension(Xi);return{version:((r=s.getParameter(s.VERSION))===null||r===void 0?void 0:r.toString())||"",vendor:((t=s.getParameter(s.VENDOR))===null||t===void 0?void 0:t.toString())||"",vendorUnmasked:d?(i=s.getParameter(d.UNMASKED_VENDOR_WEBGL))===null||i===void 0?void 0:i.toString():"",renderer:((n=s.getParameter(s.RENDERER))===null||n===void 0?void 0:n.toString())||"",rendererUnmasked:d?(o=s.getParameter(d.UNMASKED_RENDERER_WEBGL))===null||o===void 0?void 0:o.toString():"",shadingLanguageVersion:((a=s.getParameter(s.SHADING_LANGUAGE_VERSION))===null||a===void 0?void 0:a.toString())||""}},webGlExtensions:function(e){var r=Yi(e.cache);if(!r)return-1;if(!$i(r))return-2;var t=r.getSupportedExtensions(),i=r.getContextAttributes(),n=[],o=[],a=[],s=[],d=[];if(i)for(var c=0,l=Object.keys(i);c<l.length;c++){var u=l[c];o.push("".concat(u,"=").concat(i[u]))}for(var h=0,p=Ji(r);h<p.length;h++){var w=r[A=p[h]];a.push("".concat(A,"=").concat(w).concat(yo.has(w)?"=".concat(r.getParameter(w)):""))}if(t)for(var C=0,f=t;C<f.length;C++){var v=f[C];if(!(v===Xi&&Ki()||v==="WEBGL_polygon_mode"&&(xt()||Ne()))){var g=r.getExtension(v);if(g)for(var b=0,x=Ji(g);b<x.length;b++){var A;w=g[A=x[b]],s.push("".concat(A,"=").concat(w).concat(bo.has(w)?"=".concat(r.getParameter(w)):""))}else n.push(v)}}for(var R=0,k=_o;R<k.length;R++)for(var _=k[R],T=0,E=So;T<E.length;T++){var K=E[T],B=To(r,_,K);d.push("".concat(_,".").concat(K,"=").concat(B.join(",")))}return s.sort(),a.sort(),{contextAttributes:o,parameters:a,shaderPrecisions:d,extensions:t,extensionParameters:s,unsupportedExtensions:n}}};function Eo(e){var r=function(i){if(Fr())return .4;if(Ne())return!Nr()||At()&&Pt()?.3:.5;var n="value"in i.platform?i.platform.value:"";return/^Win/.test(n)?.6:/^Mac/.test(n)?.5:.7}(e),t=function(i){return Li(.99+.01*i,1e-4)}(r);return{score:r,comment:"$ if upgrade to Pro: https://fpjs.dev/pro".replace(/\$/g,"".concat(t))}}function qi(e){return JSON.stringify(e,function(r,t){return t instanceof Error?Ee({name:(i=t).name,message:i.message,stack:(n=i.stack)===null||n===void 0?void 0:n.split(`
`)},i):t;var i,n},2)}function Qi(e){return uo(function(r){for(var t="",i=0,n=Object.keys(r).sort();i<n.length;i++){var o=n[i],a=r[o],s="error"in a?"error":JSON.stringify(a.value);t+="".concat(t?"|":"").concat(o.replace(/([:|\\])/g,"\\$1"),":").concat(s)}return t}(e))}function Ro(e){return e===void 0&&(e=50),function(r,t){t===void 0&&(t=1/0);var i=window.requestIdleCallback;return i?new Promise(function(n){return i.call(window,function(){return n()},{timeout:t})}):or(Math.min(r,t))}(e,2*e)}function xo(e,r){var t=Date.now();return{get:function(i){return U(this,void 0,void 0,function(){var n,o,a;return Se(this,function(s){switch(s.label){case 0:return n=Date.now(),[4,e()];case 1:return o=s.sent(),a=function(d){var c,l=Eo(d);return{get visitorId(){return c===void 0&&(c=Qi(this.components)),c},set visitorId(u){c=u},confidence:l,components:d,version:Pi}}(o),(r||i!=null&&i.debug)&&console.log("Copy the text below to get the debug data:\n\n```\nversion: ".concat(a.version,`
userAgent: `).concat(navigator.userAgent,`
timeBetweenLoadAndGet: `).concat(n-t,`
visitorId: `).concat(a.visitorId,`
components: `).concat(qi(o),"\n```")),[2,a]}})})}}}var Po={load:function(e){var r;return e===void 0&&(e={}),U(this,void 0,void 0,function(){var t,i,n;return Se(this,function(o){switch(o.label){case 0:return((r=e.monitoring)===null||r===void 0||r)&&function(){if(!(window.__fpjs_d_m||Math.random()>=.001))try{var a=new XMLHttpRequest;a.open("get","https://m1.openfpcdn.io/fingerprintjs/v".concat(Pi,"/npm-monitoring"),!0),a.send()}catch(s){console.error(s)}}(),t=e.delayFallback,i=e.debug,[4,Ro(t)];case 1:return o.sent(),n=function(a){return ho(Co,a,[])}({cache:{},debug:i}),[2,xo(n,i)]}})})},hashComponents:Qi,componentsToDebugString:qi};class Ao{constructor(){this.base64Chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"}encode(r){let t="";for(let i=0;i<r.length;i+=3){let n=r.charCodeAt(i),o=i+1<r.length?r.charCodeAt(i+1):0,a=i+2<r.length?r.charCodeAt(i+2):0,s=n>>2,d=(3&n)<<4|o>>4,c=(15&o)<<2|a>>6,l=63&a;t+=this.base64Chars[s]+this.base64Chars[d]+(i+1<r.length?this.base64Chars[c]:"=")+(i+2<r.length?this.base64Chars[l]:"=")}return t}decode(r){let t="",i=0;for(;i<r.length;){let n=this.base64Chars.indexOf(r.charAt(i++)),o=this.base64Chars.indexOf(r.charAt(i++)),a=this.base64Chars.indexOf(r.charAt(i++)),s=this.base64Chars.indexOf(r.charAt(i++)),d=n<<2|o>>4,c=(15&o)<<4|a>>2,l=(3&a)<<6|s;t+=String.fromCharCode(d),a!=64&&(t+=String.fromCharCode(c)),s!=64&&(t+=String.fromCharCode(l))}return t}}const en=function(e){return e.replace(/\//g,"_").replace(/\+/g,"-")},Io=(e,r)=>U(void 0,void 0,void 0,function*(){const t=new TextEncoder,i=t.encode(r),n=t.encode(e),o=yield window.crypto.subtle.importKey("raw",i,{name:"HMAC",hash:"SHA-1"},!1,["sign"]);return function(a){let s="";const d=new Uint8Array(a),c=d.byteLength;for(let l=0;l<c;l++)s+=String.fromCharCode(d[l]);return window.btoa(s)}(yield window.crypto.subtle.sign("HMAC",o,n))});class Do{constructor(r,t=3600){this.scope=r,this.expires=t}token(){return U(this,void 0,void 0,function*(){let r=this.getFlags(),t=function(n){let o=new Ao().encode(n);return en(o)}(JSON.stringify(r)),i=yield Io(t,"i69H2bnVyY0cP2t2kywaUKy2v9sxXgaT");return"3x03N060VKZYT8fKvbRP7Do1m1ifop07:"+en(i)+":"+t})}getFlags(){let r={};return r.scope=this.scope,r.deadline=this.expires+Math.floor(Date.now()/1e3),r}}const Lo=e=>U(void 0,void 0,void 0,function*(){const r=`${e.name}.${e.format}`,t=yield function(n){return U(this,void 0,void 0,function*(){return yield new Do("rtplayer-sdk-log:"+n).token()})}(r),i=new FormData;return i.append("action",e.action),i.append("key",r),i.append("token",t),i.append("file",e.file),yield fetch("https://upload.qiniup.com",{method:"POST",body:i})}),tn={disable:0,error:1,fatal:1,warning:2,log:3,debug:4},Oo={name:gt,indexes:[]};function bt(){const e=new Date;function r(t){const i=t.toString();return i.length<2?"0"+i:i}return`[${r(e.getHours())}:${r(e.getMinutes())}:${r(e.getSeconds())}.${e.getMilliseconds()}]`}const O=new class{constructor(e){this.url="",this.mikuFingerprint="",this.canUploadLog=!1,this.level=e,this.db=new no("qn_rtplayer-web/dc/v1",[Oo])}setLevel(e){this.level=e}initUpload(e){return U(this,void 0,void 0,function*(){this.url=e;let r=localStorage.getItem("mikuFingerprint");r||(r=yield this.getMikuFingerprint(),localStorage.setItem("mikuFingerprint",r)),this.mikuFingerprint=r;const t=new URL(e);return t.searchParams.set("mClientId",r),this.canUploadLog&&this.checkErrorNUpload(),this.checkErrorNUpload(),t.toString()})}insertDBLog(e,r,t){return U(this,void 0,void 0,function*(){this.canUploadLog&&((yield this.db.count(gt))>=200&&(yield this.db.removeRange(gt,0,1)),yield this.db.set(gt,Date.now().toString(),`${r} [${e}] url: ${this.url} ${t}`),e==="fatal"&&this.uploadDBLog(!0))})}uploadDBLog(){return U(this,arguments,void 0,function*(e=!1){if(this.canUploadLog)try{const r=(yield this.db.getAll(gt)).map(d=>d+`
`),t=[];let i=0;const n=10485760;for(let d=r.length-1;d>=0&&i+r[d].length<=n;d--)i+=r[d].length,t.unshift(r[d]);const o=new Blob(t,{type:"text/plain;charset=utf-8"}),a=new File([o],"log.text",{type:"text/plain"}),s=`QNLog_Miku_${bt()}_${this.mikuFingerprint}`;console.debug(`miku upload log path: ${s}.txt`),(yield Lo({action:"https://up-z0.qiniup.com",name:s,format:"txt",file:a})).status===200?yield this.db.clear():e&&this.uploadDBLog(!1)}catch(r){console.log("upload log error",r),e&&this.uploadDBLog(!1)}})}checkErrorNUpload(){return U(this,void 0,void 0,function*(){let e=yield this.db.getAll(gt);const r=/fatal/;for(let t=e.length-1;t>=e.length-10&&t>=0;t--){const i=e[t].toString();if(r.test(i)){yield this.uploadDBLog(!1);break}}yield this.db.clear()})}getMikuFingerprint(){return U(this,void 0,void 0,function*(){return(yield(yield Po.load()).get()).visitorId})}isDisabled(e){return tn[this.level]<tn[e]}log(e,r){if(this.isDisabled("log"))return;const t=bt(),i=`${t} %cLOG-QNRTPLAYER`;console.log(i,"color: #66ccff; font-weight: bold;",e),this.insertDBLog("log",t,e),Lt(t,"log",e,r)}debug(e,r){if(this.isDisabled("debug"))return;const t=bt(),i=`${t} %cDEBUG-QNRTPLAYER`;console.debug(i,"color: #A28148; font-weight: bold;",e),Lt(t,"debug",e,r)}warning(e,r){if(this.isDisabled("warning"))return;const t=bt(),i=`${t} %cWARNING-QNRTPLAYER`;console.warn(i,"color: #E44F44; font-weight: bold;",e),this.insertDBLog("warning",t,e),Lt(t,"warning",e,r)}error(e,r){if(this.isDisabled("error"))return;const t=bt(),i=`${t} %cERROR-QNRTPLAYER`;console.error(i,"color: #EF4149; font-weight: bold;",e),this.insertDBLog("error",t,e),Lt(t,"error",e,r)}fatal(e,r){if(this.isDisabled("error"))return;const t=bt(),i=`${t} %cERROR-QNRTPLAYER`;console.error(i,"color: #EF4149; font-weight: bold;",e),this.insertDBLog("fatal",t,e),Lt(t,"error",e,r)}}("log");function Mo(e){return("0"+e.toString(16)).substr(-2)}function rn(e=5){const r=new Uint8Array((e||40)/2);return window.crypto.getRandomValues(r),Array.from(r,Mo).join("")}function at(e,r,t=!1){try{return t?JSON.stringify(e,null,2):JSON.stringify(e)}catch(i){return O.warning(`json stringify error: ${at(i,r)}`,r),"stringify error"}}function nn(e,r){const t=Math.pow(10,r);return Math.round(e*t)/t}class Wr extends Error{constructor(){super(...arguments),this.name="TimeoutError"}}function lr(e,r){return new Promise((t,i)=>{setTimeout(()=>i(new Wr(r+" timeout")),e)})}function It(){}function an(e){var r;const t=[],i=/\b(?:\d{1,3}\.){3}\d{1,3}\b/g,n=e.split(`
`).filter(o=>o.startsWith("a=candidate"));for(let o of n){const a=o.match(i)||[];t.push((r=a[0])!==null&&r!==void 0?r:"")}return t}function Z(e){return typeof e!="number"||isNaN(e)?-1:e}function Zr(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const r=16*Math.random()|0;return(e==="x"?r:3&r|8).toString(16)})}function on(){let e=It,r=It;return{promise:new Promise((t,i)=>{e=t,r=i}),resolve:e,reject:r}}new nr;const Hr={},sn=()=>{var e;const r=rn(30);return!((e=Object.keys(Hr||{}))===null||e===void 0)&&e.some(t=>t===r)?sn():r},Dt=(e,r,t)=>{Hr[t].emit(e,r)},Lt=(e,r,t,i)=>{const n={time:e,level:r,msg:t,id:rn(8)};Dt("log",n,i)},ot=(e,r)=>{Dt("error",e,r)},cn=(e,r)=>{Dt("freezeing",e,r)};class G extends Error{constructor(){super(...arguments),this.name="QNRTPlayerError"}}const Xr=(e,r)=>{ot({code:20001,errorType:"networkError",msg:e},r),O.fatal(e,r)},dn=(e,r)=>{ot({code:20003,errorType:"playStreamNotExist",msg:e},r),O.fatal(e,r)},ur=(e,r)=>{ot({code:20004,errorType:"playRequestFailed",msg:e},r),O.fatal(e,r)},hr=(e,r)=>{ot({code:20005,errorType:"descriptionError",msg:e},r),O.fatal(e,r)},ln=(e,r)=>{ot({code:20006,errorType:"connectFailed",msg:e},r),O.fatal(e,r)},un=(e,r)=>{ot({code:30001,errorType:"rtcNotSupport",msg:e},r),O.warning(e,r)};let hn=!0,pn=!0;function Ot(e,r,t){const i=e.match(r);return i&&i.length>=t&&parseInt(i[t],10)}function _t(e,r,t){if(!e.RTCPeerConnection)return;const i=e.RTCPeerConnection.prototype,n=i.addEventListener;i.addEventListener=function(a,s){if(a!==r)return n.apply(this,arguments);const d=c=>{const l=t(c);l&&(s.handleEvent?s.handleEvent(l):s(l))};return this._eventMap=this._eventMap||{},this._eventMap[r]||(this._eventMap[r]=new Map),this._eventMap[r].set(s,d),n.apply(this,[a,d])};const o=i.removeEventListener;i.removeEventListener=function(a,s){if(a!==r||!this._eventMap||!this._eventMap[r])return o.apply(this,arguments);if(!this._eventMap[r].has(s))return o.apply(this,arguments);const d=this._eventMap[r].get(s);return this._eventMap[r].delete(s),this._eventMap[r].size===0&&delete this._eventMap[r],Object.keys(this._eventMap).length===0&&delete this._eventMap,o.apply(this,[a,d])},Object.defineProperty(i,"on"+r,{get(){return this["_on"+r]},set(a){this["_on"+r]&&(this.removeEventListener(r,this["_on"+r]),delete this["_on"+r]),a&&this.addEventListener(r,this["_on"+r]=a)},enumerable:!0,configurable:!0})}function Bo(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(hn=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function No(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(pn=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function Yr(){if(typeof window=="object"){if(hn)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function pr(e,r){pn&&console.warn(e+" is deprecated, please use "+r+" instead.")}function mn(e){return Object.prototype.toString.call(e)==="[object Object]"}function fn(e){return mn(e)?Object.keys(e).reduce(function(r,t){const i=mn(e[t]),n=i?fn(e[t]):e[t],o=i&&!Object.keys(n).length;return n===void 0||o?r:Object.assign(r,{[t]:n})},{}):e}function Jr(e,r,t){r&&!t.has(r.id)&&(t.set(r.id,r),Object.keys(r).forEach(i=>{i.endsWith("Id")?Jr(e,e.get(r[i]),t):i.endsWith("Ids")&&r[i].forEach(n=>{Jr(e,e.get(n),t)})}))}function gn(e,r,t){const i=t?"outbound-rtp":"inbound-rtp",n=new Map;if(r===null)return n;const o=[];return e.forEach(a=>{a.type==="track"&&a.trackIdentifier===r.id&&o.push(a)}),o.forEach(a=>{e.forEach(s=>{s.type===i&&s.trackId===a.id&&Jr(e,s,n)})}),n}const vn=Yr;function wn(e,r){const t=e&&e.navigator;if(!t.mediaDevices)return;const i=function(a){if(typeof a!="object"||a.mandatory||a.optional)return a;const s={};return Object.keys(a).forEach(d=>{if(d==="require"||d==="advanced"||d==="mediaSource")return;const c=typeof a[d]=="object"?a[d]:{ideal:a[d]};c.exact!==void 0&&typeof c.exact=="number"&&(c.min=c.max=c.exact);const l=function(u,h){return u?u+h.charAt(0).toUpperCase()+h.slice(1):h==="deviceId"?"sourceId":h};if(c.ideal!==void 0){s.optional=s.optional||[];let u={};typeof c.ideal=="number"?(u[l("min",d)]=c.ideal,s.optional.push(u),u={},u[l("max",d)]=c.ideal,s.optional.push(u)):(u[l("",d)]=c.ideal,s.optional.push(u))}c.exact!==void 0&&typeof c.exact!="number"?(s.mandatory=s.mandatory||{},s.mandatory[l("",d)]=c.exact):["min","max"].forEach(u=>{c[u]!==void 0&&(s.mandatory=s.mandatory||{},s.mandatory[l(u,d)]=c[u])})}),a.advanced&&(s.optional=(s.optional||[]).concat(a.advanced)),s},n=function(a,s){if(r.version>=61)return s(a);if((a=JSON.parse(JSON.stringify(a)))&&typeof a.audio=="object"){const d=function(c,l,u){l in c&&!(u in c)&&(c[u]=c[l],delete c[l])};d((a=JSON.parse(JSON.stringify(a))).audio,"autoGainControl","googAutoGainControl"),d(a.audio,"noiseSuppression","googNoiseSuppression"),a.audio=i(a.audio)}if(a&&typeof a.video=="object"){let d=a.video.facingMode;d=d&&(typeof d=="object"?d:{ideal:d});const c=r.version<66;if(d&&(d.exact==="user"||d.exact==="environment"||d.ideal==="user"||d.ideal==="environment")&&(!t.mediaDevices.getSupportedConstraints||!t.mediaDevices.getSupportedConstraints().facingMode||c)){let l;if(delete a.video.facingMode,d.exact==="environment"||d.ideal==="environment"?l=["back","rear"]:d.exact!=="user"&&d.ideal!=="user"||(l=["front"]),l)return t.mediaDevices.enumerateDevices().then(u=>{let h=(u=u.filter(p=>p.kind==="videoinput")).find(p=>l.some(w=>p.label.toLowerCase().includes(w)));return!h&&u.length&&l.includes("back")&&(h=u[u.length-1]),h&&(a.video.deviceId=d.exact?{exact:h.deviceId}:{ideal:h.deviceId}),a.video=i(a.video),vn("chrome: "+JSON.stringify(a)),s(a)})}a.video=i(a.video)}return vn("chrome: "+JSON.stringify(a)),s(a)},o=function(a){return r.version>=64?a:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[a.name]||a.name,message:a.message,constraint:a.constraint||a.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(t.getUserMedia=(function(a,s,d){n(a,c=>{t.webkitGetUserMedia(c,s,l=>{d&&d(o(l))})})}).bind(t),t.mediaDevices.getUserMedia){const a=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(s){return n(s,d=>a(d).then(c=>{if(d.audio&&!c.getAudioTracks().length||d.video&&!c.getVideoTracks().length)throw c.getTracks().forEach(l=>{l.stop()}),new DOMException("","NotFoundError");return c},c=>Promise.reject(o(c))))}}}function yn(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function bn(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(t){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=t)},enumerable:!0,configurable:!0});const r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",i=>{let n;n=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(a=>a.track&&a.track.id===i.track.id):{track:i.track};const o=new Event("track");o.track=i.track,o.receiver=n,o.transceiver={receiver:n},o.streams=[t.stream],this.dispatchEvent(o)}),t.stream.getTracks().forEach(i=>{let n;n=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(a=>a.track&&a.track.id===i.id):{track:i};const o=new Event("track");o.track=i,o.receiver=n,o.transceiver={receiver:n},o.streams=[t.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),r.apply(this,arguments)}}else _t(e,"track",r=>(r.transceiver||Object.defineProperty(r,"transceiver",{value:{receiver:r.receiver}}),r))}function _n(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const r=function(n,o){return{track:o,get dtmf(){return this._dtmf===void 0&&(o.kind==="audio"?this._dtmf=n.createDTMFSender(o):this._dtmf=null),this._dtmf},_pc:n}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(a,s){let d=n.apply(this,arguments);return d||(d=r(this,a),this._senders.push(d)),d};const o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(a){o.apply(this,arguments);const s=this._senders.indexOf(a);s!==-1&&this._senders.splice(s,1)}}const t=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(n){this._senders=this._senders||[],t.apply(this,[n]),n.getTracks().forEach(o=>{this._senders.push(r(this,o))})};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(n){this._senders=this._senders||[],i.apply(this,[n]),n.getTracks().forEach(o=>{const a=this._senders.find(s=>s.track===o);a&&this._senders.splice(this._senders.indexOf(a),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const r=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const t=r.apply(this,[]);return t.forEach(i=>i._pc=this),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Sn(e){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[t,i,n]=arguments;if(arguments.length>0&&typeof t=="function")return r.apply(this,arguments);if(r.length===0&&(arguments.length===0||typeof t!="function"))return r.apply(this,[]);const o=function(s){const d={};return s.result().forEach(c=>{const l={id:c.id,timestamp:c.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[c.type]||c.type};c.names().forEach(u=>{l[u]=c.stat(u)}),d[l.id]=l}),d},a=function(s){return new Map(Object.keys(s).map(d=>[d,s[d]]))};if(arguments.length>=2){const s=function(d){i(a(o(d)))};return r.apply(this,[s,t])}return new Promise((s,d)=>{r.apply(this,[function(c){s(a(o(c)))},d])}).then(i,n)}}function Tn(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const n=t.apply(this,[]);return n.forEach(o=>o._pc=this),n});const i=e.RTCPeerConnection.prototype.addTrack;i&&(e.RTCPeerConnection.prototype.addTrack=function(){const n=i.apply(this,arguments);return n._pc=this,n}),e.RTCRtpSender.prototype.getStats=function(){const n=this;return this._pc.getStats().then(o=>gn(o,n.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const i=t.apply(this,[]);return i.forEach(n=>n._pc=this),i}),_t(e,"track",i=>(i.receiver._pc=i.srcElement,i)),e.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(n=>gn(n,i.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const t=arguments[0];let i,n,o;return this.getSenders().forEach(a=>{a.track===t&&(i?o=!0:i=a)}),this.getReceivers().forEach(a=>(a.track===t&&(n?o=!0:n=a),a.track===t)),o||i&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return r.apply(this,arguments)}}function kn(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(o=>this._shimmedLocalStreams[o][0])};const r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(o,a){if(!a)return r.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const s=r.apply(this,arguments);return this._shimmedLocalStreams[a.id]?this._shimmedLocalStreams[a.id].indexOf(s)===-1&&this._shimmedLocalStreams[a.id].push(s):this._shimmedLocalStreams[a.id]=[a,s],s};const t=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(o){this._shimmedLocalStreams=this._shimmedLocalStreams||{},o.getTracks().forEach(d=>{if(this.getSenders().find(c=>c.track===d))throw new DOMException("Track already exists.","InvalidAccessError")});const a=this.getSenders();t.apply(this,arguments);const s=this.getSenders().filter(d=>a.indexOf(d)===-1);this._shimmedLocalStreams[o.id]=[o].concat(s)};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[o.id],i.apply(this,arguments)};const n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},o&&Object.keys(this._shimmedLocalStreams).forEach(a=>{const s=this._shimmedLocalStreams[a].indexOf(o);s!==-1&&this._shimmedLocalStreams[a].splice(s,1),this._shimmedLocalStreams[a].length===1&&delete this._shimmedLocalStreams[a]}),n.apply(this,arguments)}}function Cn(e,r){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&r.version>=65)return kn(e);const t=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const d=t.apply(this);return this._reverseStreams=this._reverseStreams||{},d.map(c=>this._reverseStreams[c.id])};const i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(d){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},d.getTracks().forEach(c=>{if(this.getSenders().find(l=>l.track===c))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[d.id]){const c=new e.MediaStream(d.getTracks());this._streams[d.id]=c,this._reverseStreams[c.id]=d,d=c}i.apply(this,[d])};const n=e.RTCPeerConnection.prototype.removeStream;function o(d,c){let l=c.sdp;return Object.keys(d._reverseStreams||[]).forEach(u=>{const h=d._reverseStreams[u],p=d._streams[h.id];l=l.replace(new RegExp(p.id,"g"),h.id)}),new RTCSessionDescription({type:c.type,sdp:l})}e.RTCPeerConnection.prototype.removeStream=function(d){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},n.apply(this,[this._streams[d.id]||d]),delete this._reverseStreams[this._streams[d.id]?this._streams[d.id].id:d.id],delete this._streams[d.id]},e.RTCPeerConnection.prototype.addTrack=function(d,c){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const l=[].slice.call(arguments,1);if(l.length!==1||!l[0].getTracks().find(h=>h===d))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(h=>h.track===d))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const u=this._streams[c.id];if(u)u.addTrack(d),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const h=new e.MediaStream([d]);this._streams[c.id]=h,this._reverseStreams[h.id]=c,this.addStream(h)}return this.getSenders().find(h=>h.track===d)},["createOffer","createAnswer"].forEach(function(d){const c=e.RTCPeerConnection.prototype[d],l={[d](){const u=arguments;return arguments.length&&typeof arguments[0]=="function"?c.apply(this,[h=>{const p=o(this,h);u[0].apply(null,[p])},h=>{u[1]&&u[1].apply(null,h)},arguments[2]]):c.apply(this,arguments).then(h=>o(this,h))}};e.RTCPeerConnection.prototype[d]=l[d]});const a=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(d,c){let l=c.sdp;return Object.keys(d._reverseStreams||[]).forEach(u=>{const h=d._reverseStreams[u],p=d._streams[h.id];l=l.replace(new RegExp(h.id,"g"),p.id)}),new RTCSessionDescription({type:c.type,sdp:l})}(this,arguments[0]),a.apply(this,arguments)):a.apply(this,arguments)};const s=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const d=s.get.apply(this);return d.type===""?d:o(this,d)}}),e.RTCPeerConnection.prototype.removeTrack=function(d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!d._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(d._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let c;this._streams=this._streams||{},Object.keys(this._streams).forEach(l=>{this._streams[l].getTracks().find(u=>d.track===u)&&(c=this._streams[l])}),c&&(c.getTracks().length===1?this.removeStream(this._reverseStreams[c.id]):c.removeTrack(d.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Kr(e,r){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&r.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){const i=e.RTCPeerConnection.prototype[t],n={[t](){return arguments[0]=new(t==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=n[t]})}function En(e,r){_t(e,"negotiationneeded",t=>{const i=t.target;if(!(r.version<72||i.getConfiguration&&i.getConfiguration().sdpSemantics==="plan-b")||i.signalingState==="stable")return t})}var Rn=Object.freeze({__proto__:null,shimMediaStream:yn,shimOnTrack:bn,shimGetSendersWithDtmf:_n,shimGetStats:Sn,shimSenderReceiverGetStats:Tn,shimAddTrackRemoveTrackWithNative:kn,shimAddTrackRemoveTrack:Cn,shimPeerConnection:Kr,fixNegotiationNeeded:En,shimGetUserMedia:wn,shimGetDisplayMedia:function(e,r){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(typeof r=="function"?e.navigator.mediaDevices.getDisplayMedia=function(t){return r(t).then(i=>{const n=t.video&&t.video.width,o=t.video&&t.video.height,a=t.video&&t.video.frameRate;return t.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i,maxFrameRate:a||3}},n&&(t.video.mandatory.maxWidth=n),o&&(t.video.mandatory.maxHeight=o),e.navigator.mediaDevices.getUserMedia(t)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}}),V=ft(function(e){var r={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};r.localCName=r.generateIdentifier(),r.splitLines=function(t){return t.trim().split(`
`).map(function(i){return i.trim()})},r.splitSections=function(t){return t.split(`
m=`).map(function(i,n){return(n>0?"m="+i:i).trim()+`\r
`})},r.getDescription=function(t){var i=r.splitSections(t);return i&&i[0]},r.getMediaSections=function(t){var i=r.splitSections(t);return i.shift(),i},r.matchPrefix=function(t,i){return r.splitLines(t).filter(function(n){return n.indexOf(i)===0})},r.parseCandidate=function(t){for(var i,n={foundation:(i=t.indexOf("a=candidate:")===0?t.substring(12).split(" "):t.substring(10).split(" "))[0],component:parseInt(i[1],10),protocol:i[2].toLowerCase(),priority:parseInt(i[3],10),ip:i[4],address:i[4],port:parseInt(i[5],10),type:i[7]},o=8;o<i.length;o+=2)switch(i[o]){case"raddr":n.relatedAddress=i[o+1];break;case"rport":n.relatedPort=parseInt(i[o+1],10);break;case"tcptype":n.tcpType=i[o+1];break;case"ufrag":n.ufrag=i[o+1],n.usernameFragment=i[o+1];break;default:n[i[o]]=i[o+1]}return n},r.writeCandidate=function(t){var i=[];i.push(t.foundation),i.push(t.component),i.push(t.protocol.toUpperCase()),i.push(t.priority),i.push(t.address||t.ip),i.push(t.port);var n=t.type;return i.push("typ"),i.push(n),n!=="host"&&t.relatedAddress&&t.relatedPort&&(i.push("raddr"),i.push(t.relatedAddress),i.push("rport"),i.push(t.relatedPort)),t.tcpType&&t.protocol.toLowerCase()==="tcp"&&(i.push("tcptype"),i.push(t.tcpType)),(t.usernameFragment||t.ufrag)&&(i.push("ufrag"),i.push(t.usernameFragment||t.ufrag)),"candidate:"+i.join(" ")},r.parseIceOptions=function(t){return t.substr(14).split(" ")},r.parseRtpMap=function(t){var i=t.substr(9).split(" "),n={payloadType:parseInt(i.shift(),10)};return i=i[0].split("/"),n.name=i[0],n.clockRate=parseInt(i[1],10),n.channels=i.length===3?parseInt(i[2],10):1,n.numChannels=n.channels,n},r.writeRtpMap=function(t){var i=t.payloadType;t.preferredPayloadType!==void 0&&(i=t.preferredPayloadType);var n=t.channels||t.numChannels||1;return"a=rtpmap:"+i+" "+t.name+"/"+t.clockRate+(n!==1?"/"+n:"")+`\r
`},r.parseExtmap=function(t){var i=t.substr(9).split(" ");return{id:parseInt(i[0],10),direction:i[0].indexOf("/")>0?i[0].split("/")[1]:"sendrecv",uri:i[1]}},r.writeExtmap=function(t){return"a=extmap:"+(t.id||t.preferredId)+(t.direction&&t.direction!=="sendrecv"?"/"+t.direction:"")+" "+t.uri+`\r
`},r.parseFmtp=function(t){for(var i,n={},o=t.substr(t.indexOf(" ")+1).split(";"),a=0;a<o.length;a++)n[(i=o[a].trim().split("="))[0].trim()]=i[1];return n},r.writeFmtp=function(t){var i="",n=t.payloadType;if(t.preferredPayloadType!==void 0&&(n=t.preferredPayloadType),t.parameters&&Object.keys(t.parameters).length){var o=[];Object.keys(t.parameters).forEach(function(a){t.parameters[a]?o.push(a+"="+t.parameters[a]):o.push(a)}),i+="a=fmtp:"+n+" "+o.join(";")+`\r
`}return i},r.parseRtcpFb=function(t){var i=t.substr(t.indexOf(" ")+1).split(" ");return{type:i.shift(),parameter:i.join(" ")}},r.writeRtcpFb=function(t){var i="",n=t.payloadType;return t.preferredPayloadType!==void 0&&(n=t.preferredPayloadType),t.rtcpFeedback&&t.rtcpFeedback.length&&t.rtcpFeedback.forEach(function(o){i+="a=rtcp-fb:"+n+" "+o.type+(o.parameter&&o.parameter.length?" "+o.parameter:"")+`\r
`}),i},r.parseSsrcMedia=function(t){var i=t.indexOf(" "),n={ssrc:parseInt(t.substr(7,i-7),10)},o=t.indexOf(":",i);return o>-1?(n.attribute=t.substr(i+1,o-i-1),n.value=t.substr(o+1)):n.attribute=t.substr(i+1),n},r.parseSsrcGroup=function(t){var i=t.substr(13).split(" ");return{semantics:i.shift(),ssrcs:i.map(function(n){return parseInt(n,10)})}},r.getMid=function(t){var i=r.matchPrefix(t,"a=mid:")[0];if(i)return i.substr(6)},r.parseFingerprint=function(t){var i=t.substr(14).split(" ");return{algorithm:i[0].toLowerCase(),value:i[1]}},r.getDtlsParameters=function(t,i){return{role:"auto",fingerprints:r.matchPrefix(t+i,"a=fingerprint:").map(r.parseFingerprint)}},r.writeDtlsParameters=function(t,i){var n="a=setup:"+i+`\r
`;return t.fingerprints.forEach(function(o){n+="a=fingerprint:"+o.algorithm+" "+o.value+`\r
`}),n},r.parseCryptoLine=function(t){var i=t.substr(9).split(" ");return{tag:parseInt(i[0],10),cryptoSuite:i[1],keyParams:i[2],sessionParams:i.slice(3)}},r.writeCryptoLine=function(t){return"a=crypto:"+t.tag+" "+t.cryptoSuite+" "+(typeof t.keyParams=="object"?r.writeCryptoKeyParams(t.keyParams):t.keyParams)+(t.sessionParams?" "+t.sessionParams.join(" "):"")+`\r
`},r.parseCryptoKeyParams=function(t){if(t.indexOf("inline:")!==0)return null;var i=t.substr(7).split("|");return{keyMethod:"inline",keySalt:i[0],lifeTime:i[1],mkiValue:i[2]?i[2].split(":")[0]:void 0,mkiLength:i[2]?i[2].split(":")[1]:void 0}},r.writeCryptoKeyParams=function(t){return t.keyMethod+":"+t.keySalt+(t.lifeTime?"|"+t.lifeTime:"")+(t.mkiValue&&t.mkiLength?"|"+t.mkiValue+":"+t.mkiLength:"")},r.getCryptoParameters=function(t,i){return r.matchPrefix(t+i,"a=crypto:").map(r.parseCryptoLine)},r.getIceParameters=function(t,i){var n=r.matchPrefix(t+i,"a=ice-ufrag:")[0],o=r.matchPrefix(t+i,"a=ice-pwd:")[0];return n&&o?{usernameFragment:n.substr(12),password:o.substr(10)}:null},r.writeIceParameters=function(t){return"a=ice-ufrag:"+t.usernameFragment+`\r
a=ice-pwd:`+t.password+`\r
`},r.parseRtpParameters=function(t){for(var i={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=r.splitLines(t)[0].split(" "),o=3;o<n.length;o++){var a=n[o],s=r.matchPrefix(t,"a=rtpmap:"+a+" ")[0];if(s){var d=r.parseRtpMap(s),c=r.matchPrefix(t,"a=fmtp:"+a+" ");switch(d.parameters=c.length?r.parseFmtp(c[0]):{},d.rtcpFeedback=r.matchPrefix(t,"a=rtcp-fb:"+a+" ").map(r.parseRtcpFb),i.codecs.push(d),d.name.toUpperCase()){case"RED":case"ULPFEC":i.fecMechanisms.push(d.name.toUpperCase())}}}return r.matchPrefix(t,"a=extmap:").forEach(function(l){i.headerExtensions.push(r.parseExtmap(l))}),i},r.writeRtpDescription=function(t,i){var n="";n+="m="+t+" ",n+=i.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=i.codecs.map(function(a){return a.preferredPayloadType!==void 0?a.preferredPayloadType:a.payloadType}).join(" ")+`\r
`,n+=`c=IN IP4 0.0.0.0\r
`,n+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,i.codecs.forEach(function(a){n+=r.writeRtpMap(a),n+=r.writeFmtp(a),n+=r.writeRtcpFb(a)});var o=0;return i.codecs.forEach(function(a){a.maxptime>o&&(o=a.maxptime)}),o>0&&(n+="a=maxptime:"+o+`\r
`),n+=`a=rtcp-mux\r
`,i.headerExtensions&&i.headerExtensions.forEach(function(a){n+=r.writeExtmap(a)}),n},r.parseRtpEncodingParameters=function(t){var i,n=[],o=r.parseRtpParameters(t),a=o.fecMechanisms.indexOf("RED")!==-1,s=o.fecMechanisms.indexOf("ULPFEC")!==-1,d=r.matchPrefix(t,"a=ssrc:").map(function(h){return r.parseSsrcMedia(h)}).filter(function(h){return h.attribute==="cname"}),c=d.length>0&&d[0].ssrc,l=r.matchPrefix(t,"a=ssrc-group:FID").map(function(h){return h.substr(17).split(" ").map(function(p){return parseInt(p,10)})});l.length>0&&l[0].length>1&&l[0][0]===c&&(i=l[0][1]),o.codecs.forEach(function(h){if(h.name.toUpperCase()==="RTX"&&h.parameters.apt){var p={ssrc:c,codecPayloadType:parseInt(h.parameters.apt,10)};c&&i&&(p.rtx={ssrc:i}),n.push(p),a&&((p=JSON.parse(JSON.stringify(p))).fec={ssrc:c,mechanism:s?"red+ulpfec":"red"},n.push(p))}}),n.length===0&&c&&n.push({ssrc:c});var u=r.matchPrefix(t,"b=");return u.length&&(u=u[0].indexOf("b=TIAS:")===0?parseInt(u[0].substr(7),10):u[0].indexOf("b=AS:")===0?1e3*parseInt(u[0].substr(5),10)*.95-16e3:void 0,n.forEach(function(h){h.maxBitrate=u})),n},r.parseRtcpParameters=function(t){var i={},n=r.matchPrefix(t,"a=ssrc:").map(function(s){return r.parseSsrcMedia(s)}).filter(function(s){return s.attribute==="cname"})[0];n&&(i.cname=n.value,i.ssrc=n.ssrc);var o=r.matchPrefix(t,"a=rtcp-rsize");i.reducedSize=o.length>0,i.compound=o.length===0;var a=r.matchPrefix(t,"a=rtcp-mux");return i.mux=a.length>0,i},r.parseMsid=function(t){var i,n=r.matchPrefix(t,"a=msid:");if(n.length===1)return{stream:(i=n[0].substr(7).split(" "))[0],track:i[1]};var o=r.matchPrefix(t,"a=ssrc:").map(function(a){return r.parseSsrcMedia(a)}).filter(function(a){return a.attribute==="msid"});return o.length>0?{stream:(i=o[0].value.split(" "))[0],track:i[1]}:void 0},r.parseSctpDescription=function(t){var i,n=r.parseMLine(t),o=r.matchPrefix(t,"a=max-message-size:");o.length>0&&(i=parseInt(o[0].substr(19),10)),isNaN(i)&&(i=65536);var a=r.matchPrefix(t,"a=sctp-port:");if(a.length>0)return{port:parseInt(a[0].substr(12),10),protocol:n.fmt,maxMessageSize:i};if(r.matchPrefix(t,"a=sctpmap:").length>0){var s=r.matchPrefix(t,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(s[0],10),protocol:s[1],maxMessageSize:i}}},r.writeSctpDescription=function(t,i){var n=[];return n=t.protocol!=="DTLS/SCTP"?["m="+t.kind+" 9 "+t.protocol+" "+i.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+i.port+`\r
`]:["m="+t.kind+" 9 "+t.protocol+" "+i.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+i.port+" "+i.protocol+` 65535\r
`],i.maxMessageSize!==void 0&&n.push("a=max-message-size:"+i.maxMessageSize+`\r
`),n.join("")},r.generateSessionId=function(){return Math.random().toString().substr(2,21)},r.writeSessionBoilerplate=function(t,i,n){var o=i!==void 0?i:2;return`v=0\r
o=`+(n||"thisisadapterortc")+" "+(t||r.generateSessionId())+" "+o+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},r.writeMediaSection=function(t,i,n,o){var a=r.writeRtpDescription(t.kind,i);if(a+=r.writeIceParameters(t.iceGatherer.getLocalParameters()),a+=r.writeDtlsParameters(t.dtlsTransport.getLocalParameters(),n==="offer"?"actpass":"active"),a+="a=mid:"+t.mid+`\r
`,t.direction?a+="a="+t.direction+`\r
`:t.rtpSender&&t.rtpReceiver?a+=`a=sendrecv\r
`:t.rtpSender?a+=`a=sendonly\r
`:t.rtpReceiver?a+=`a=recvonly\r
`:a+=`a=inactive\r
`,t.rtpSender){var s="msid:"+o.id+" "+t.rtpSender.track.id+`\r
`;a+="a="+s,a+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" "+s,t.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" "+s,a+="a=ssrc-group:FID "+t.sendEncodingParameters[0].ssrc+" "+t.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return a+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+`\r
`,t.rtpSender&&t.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+`\r
`),a},r.getDirection=function(t,i){for(var n=r.splitLines(t),o=0;o<n.length;o++)switch(n[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[o].substr(2)}return i?r.getDirection(i):"sendrecv"},r.getKind=function(t){return r.splitLines(t)[0].split(" ")[0].substr(2)},r.isRejected=function(t){return t.split(" ",2)[1]==="0"},r.parseMLine=function(t){var i=r.splitLines(t)[0].substr(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},r.parseOLine=function(t){var i=r.matchPrefix(t,"o=")[0].substr(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},r.isValidSDP=function(t){if(typeof t!="string"||t.length===0)return!1;for(var i=r.splitLines(t),n=0;n<i.length;n++)if(i[n].length<2||i[n].charAt(1)!=="=")return!1;return!0},e.exports=r});function xn(e,r,t,i,n){var o=V.writeRtpDescription(e.kind,r);if(o+=V.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=V.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),t==="offer"?"actpass":n||"active"),o+="a=mid:"+e.mid+`\r
`,e.rtpSender&&e.rtpReceiver?o+=`a=sendrecv\r
`:e.rtpSender?o+=`a=sendonly\r
`:e.rtpReceiver?o+=`a=recvonly\r
`:o+=`a=inactive\r
`,e.rtpSender){var a=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=a;var s="msid:"+(i?i.id:"-")+" "+a+`\r
`;o+="a="+s,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+s,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+V.localCName+`\r
`,e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+V.localCName+`\r
`),o}function mr(e,r){var t={codecs:[],headerExtensions:[],fecMechanisms:[]},i=function(o,a){o=parseInt(o,10);for(var s=0;s<a.length;s++)if(a[s].payloadType===o||a[s].preferredPayloadType===o)return a[s]},n=function(o,a,s,d){var c=i(o.parameters.apt,s),l=i(a.parameters.apt,d);return c&&l&&c.name.toLowerCase()===l.name.toLowerCase()};return e.codecs.forEach(function(o){for(var a=0;a<r.codecs.length;a++){var s=r.codecs[a];if(o.name.toLowerCase()===s.name.toLowerCase()&&o.clockRate===s.clockRate){if(o.name.toLowerCase()==="rtx"&&o.parameters&&s.parameters.apt&&!n(o,s,e.codecs,r.codecs))continue;(s=JSON.parse(JSON.stringify(s))).numChannels=Math.min(o.numChannels,s.numChannels),t.codecs.push(s),s.rtcpFeedback=s.rtcpFeedback.filter(function(d){for(var c=0;c<o.rtcpFeedback.length;c++)if(o.rtcpFeedback[c].type===d.type&&o.rtcpFeedback[c].parameter===d.parameter)return!0;return!1});break}}}),e.headerExtensions.forEach(function(o){for(var a=0;a<r.headerExtensions.length;a++){var s=r.headerExtensions[a];if(o.uri===s.uri){t.headerExtensions.push(s);break}}}),t}function Pn(e,r,t){return{offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[r][e].indexOf(t)!==-1}function $r(e,r){var t=e.getRemoteCandidates().find(function(i){return r.foundation===i.foundation&&r.ip===i.ip&&r.port===i.port&&r.priority===i.priority&&r.protocol===i.protocol&&r.type===i.type});return t||e.addRemoteCandidate(r),!t}function fe(e,r){var t=new Error(r);return t.name=e,t.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],t}var Fo=function(e,r){function t(a,s){s.addTrack(a),s.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:a}))}function i(a,s,d,c){var l=new Event("track");l.track=s,l.receiver=d,l.transceiver={receiver:d},l.streams=c,e.setTimeout(function(){a._dispatchEvent("track",l)})}var n=function(a){var s=this,d=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(l){s[l]=d[l].bind(d)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",a=JSON.parse(JSON.stringify(a||{})),this.usingBundle=a.bundlePolicy==="max-bundle",a.rtcpMuxPolicy==="negotiate")throw fe("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(a.rtcpMuxPolicy||(a.rtcpMuxPolicy="require"),a.iceTransportPolicy){case"all":case"relay":break;default:a.iceTransportPolicy="all"}switch(a.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:a.bundlePolicy="balanced"}if(a.iceServers=function(l,u){var h=!1;return(l=JSON.parse(JSON.stringify(l))).filter(function(p){if(p&&(p.urls||p.url)){var w=p.urls||p.url;p.url&&!p.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var C=typeof w=="string";return C&&(w=[w]),w=w.filter(function(f){return f.indexOf("turn:")!==0||f.indexOf("transport=udp")===-1||f.indexOf("turn:[")!==-1||h?f.indexOf("stun:")===0&&u>=14393&&f.indexOf("?transport=udp")===-1:(h=!0,!0)}),delete p.url,p.urls=C?w[0]:w,!!w.length}})}(a.iceServers||[],r),this._iceGatherers=[],a.iceCandidatePoolSize)for(var c=a.iceCandidatePoolSize;c>0;c--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:a.iceServers,gatherPolicy:a.iceTransportPolicy}));else a.iceCandidatePoolSize=0;this._config=a,this.transceivers=[],this._sdpSessionId=V.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(n.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(n.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),n.prototype.onicecandidate=null,n.prototype.onaddstream=null,n.prototype.ontrack=null,n.prototype.onremovestream=null,n.prototype.onsignalingstatechange=null,n.prototype.oniceconnectionstatechange=null,n.prototype.onconnectionstatechange=null,n.prototype.onicegatheringstatechange=null,n.prototype.onnegotiationneeded=null,n.prototype.ondatachannel=null,n.prototype._dispatchEvent=function(a,s){this._isClosed||(this.dispatchEvent(s),typeof this["on"+a]=="function"&&this["on"+a](s))},n.prototype._emitGatheringStateChange=function(){var a=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",a)},n.prototype.getConfiguration=function(){return this._config},n.prototype.getLocalStreams=function(){return this.localStreams},n.prototype.getRemoteStreams=function(){return this.remoteStreams},n.prototype._createTransceiver=function(a,s){var d=this.transceivers.length>0,c={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:a,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&d)c.iceTransport=this.transceivers[0].iceTransport,c.dtlsTransport=this.transceivers[0].dtlsTransport;else{var l=this._createIceAndDtlsTransports();c.iceTransport=l.iceTransport,c.dtlsTransport=l.dtlsTransport}return s||this.transceivers.push(c),c},n.prototype.addTrack=function(a,s){if(this._isClosed)throw fe("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var d;if(this.transceivers.find(function(l){return l.track===a}))throw fe("InvalidAccessError","Track already exists.");for(var c=0;c<this.transceivers.length;c++)this.transceivers[c].track||this.transceivers[c].kind!==a.kind||(d=this.transceivers[c]);return d||(d=this._createTransceiver(a.kind)),this._maybeFireNegotiationNeeded(),this.localStreams.indexOf(s)===-1&&this.localStreams.push(s),d.track=a,d.stream=s,d.rtpSender=new e.RTCRtpSender(a,d.dtlsTransport),d.rtpSender},n.prototype.addStream=function(a){var s=this;if(r>=15025)a.getTracks().forEach(function(c){s.addTrack(c,a)});else{var d=a.clone();a.getTracks().forEach(function(c,l){var u=d.getTracks()[l];c.addEventListener("enabled",function(h){u.enabled=h.enabled})}),d.getTracks().forEach(function(c){s.addTrack(c,d)})}},n.prototype.removeTrack=function(a){if(this._isClosed)throw fe("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(a instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var s=this.transceivers.find(function(c){return c.rtpSender===a});if(!s)throw fe("InvalidAccessError","Sender was not created by this connection.");var d=s.stream;s.rtpSender.stop(),s.rtpSender=null,s.track=null,s.stream=null,this.transceivers.map(function(c){return c.stream}).indexOf(d)===-1&&this.localStreams.indexOf(d)>-1&&this.localStreams.splice(this.localStreams.indexOf(d),1),this._maybeFireNegotiationNeeded()},n.prototype.removeStream=function(a){var s=this;a.getTracks().forEach(function(d){var c=s.getSenders().find(function(l){return l.track===d});c&&s.removeTrack(c)})},n.prototype.getSenders=function(){return this.transceivers.filter(function(a){return!!a.rtpSender}).map(function(a){return a.rtpSender})},n.prototype.getReceivers=function(){return this.transceivers.filter(function(a){return!!a.rtpReceiver}).map(function(a){return a.rtpReceiver})},n.prototype._createIceGatherer=function(a,s){var d=this;if(s&&a>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var c=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(c,"state",{value:"new",writable:!0}),this.transceivers[a].bufferedCandidateEvents=[],this.transceivers[a].bufferCandidates=function(l){var u=!l.candidate||Object.keys(l.candidate).length===0;c.state=u?"completed":"gathering",d.transceivers[a].bufferedCandidateEvents!==null&&d.transceivers[a].bufferedCandidateEvents.push(l)},c.addEventListener("localcandidate",this.transceivers[a].bufferCandidates),c},n.prototype._gather=function(a,s){var d=this,c=this.transceivers[s].iceGatherer;if(!c.onlocalcandidate){var l=this.transceivers[s].bufferedCandidateEvents;this.transceivers[s].bufferedCandidateEvents=null,c.removeEventListener("localcandidate",this.transceivers[s].bufferCandidates),c.onlocalcandidate=function(u){if(!(d.usingBundle&&s>0)){var h=new Event("icecandidate");h.candidate={sdpMid:a,sdpMLineIndex:s};var p=u.candidate,w=!p||Object.keys(p).length===0;if(w)c.state!=="new"&&c.state!=="gathering"||(c.state="completed");else{c.state==="new"&&(c.state="gathering"),p.component=1,p.ufrag=c.getLocalParameters().usernameFragment;var C=V.writeCandidate(p);h.candidate=Object.assign(h.candidate,V.parseCandidate(C)),h.candidate.candidate=C,h.candidate.toJSON=function(){return{candidate:h.candidate.candidate,sdpMid:h.candidate.sdpMid,sdpMLineIndex:h.candidate.sdpMLineIndex,usernameFragment:h.candidate.usernameFragment}}}var f=V.getMediaSections(d._localDescription.sdp);f[h.candidate.sdpMLineIndex]+=w?`a=end-of-candidates\r
`:"a="+h.candidate.candidate+`\r
`,d._localDescription.sdp=V.getDescription(d._localDescription.sdp)+f.join("");var v=d.transceivers.every(function(g){return g.iceGatherer&&g.iceGatherer.state==="completed"});d.iceGatheringState!=="gathering"&&(d.iceGatheringState="gathering",d._emitGatheringStateChange()),w||d._dispatchEvent("icecandidate",h),v&&(d._dispatchEvent("icecandidate",new Event("icecandidate")),d.iceGatheringState="complete",d._emitGatheringStateChange())}},e.setTimeout(function(){l.forEach(function(u){c.onlocalcandidate(u)})},0)}},n.prototype._createIceAndDtlsTransports=function(){var a=this,s=new e.RTCIceTransport(null);s.onicestatechange=function(){a._updateIceConnectionState(),a._updateConnectionState()};var d=new e.RTCDtlsTransport(s);return d.ondtlsstatechange=function(){a._updateConnectionState()},d.onerror=function(){Object.defineProperty(d,"state",{value:"failed",writable:!0}),a._updateConnectionState()},{iceTransport:s,dtlsTransport:d}},n.prototype._disposeIceAndDtlsTransports=function(a){var s=this.transceivers[a].iceGatherer;s&&(delete s.onlocalcandidate,delete this.transceivers[a].iceGatherer);var d=this.transceivers[a].iceTransport;d&&(delete d.onicestatechange,delete this.transceivers[a].iceTransport);var c=this.transceivers[a].dtlsTransport;c&&(delete c.ondtlsstatechange,delete c.onerror,delete this.transceivers[a].dtlsTransport)},n.prototype._transceive=function(a,s,d){var c=mr(a.localCapabilities,a.remoteCapabilities);s&&a.rtpSender&&(c.encodings=a.sendEncodingParameters,c.rtcp={cname:V.localCName,compound:a.rtcpParameters.compound},a.recvEncodingParameters.length&&(c.rtcp.ssrc=a.recvEncodingParameters[0].ssrc),a.rtpSender.send(c)),d&&a.rtpReceiver&&c.codecs.length>0&&(a.kind==="video"&&a.recvEncodingParameters&&r<15019&&a.recvEncodingParameters.forEach(function(l){delete l.rtx}),a.recvEncodingParameters.length?c.encodings=a.recvEncodingParameters:c.encodings=[{}],c.rtcp={compound:a.rtcpParameters.compound},a.rtcpParameters.cname&&(c.rtcp.cname=a.rtcpParameters.cname),a.sendEncodingParameters.length&&(c.rtcp.ssrc=a.sendEncodingParameters[0].ssrc),a.rtpReceiver.receive(c))},n.prototype.setLocalDescription=function(a){var s,d,c=this;if(["offer","answer"].indexOf(a.type)===-1)return Promise.reject(fe("TypeError",'Unsupported type "'+a.type+'"'));if(!Pn("setLocalDescription",a.type,c.signalingState)||c._isClosed)return Promise.reject(fe("InvalidStateError","Can not set local "+a.type+" in state "+c.signalingState));if(a.type==="offer")s=V.splitSections(a.sdp),d=s.shift(),s.forEach(function(u,h){var p=V.parseRtpParameters(u);c.transceivers[h].localCapabilities=p}),c.transceivers.forEach(function(u,h){c._gather(u.mid,h)});else if(a.type==="answer"){s=V.splitSections(c._remoteDescription.sdp),d=s.shift();var l=V.matchPrefix(d,"a=ice-lite").length>0;s.forEach(function(u,h){var p=c.transceivers[h],w=p.iceGatherer,C=p.iceTransport,f=p.dtlsTransport,v=p.localCapabilities,g=p.remoteCapabilities;if(!(V.isRejected(u)&&V.matchPrefix(u,"a=bundle-only").length===0)&&!p.rejected){var b=V.getIceParameters(u,d),x=V.getDtlsParameters(u,d);l&&(x.role="server"),c.usingBundle&&h!==0||(c._gather(p.mid,h),C.state==="new"&&C.start(w,b,l?"controlling":"controlled"),f.state==="new"&&f.start(x));var A=mr(v,g);c._transceive(p,A.codecs.length>0,!1)}})}return c._localDescription={type:a.type,sdp:a.sdp},a.type==="offer"?c._updateSignalingState("have-local-offer"):c._updateSignalingState("stable"),Promise.resolve()},n.prototype.setRemoteDescription=function(a){var s=this;if(["offer","answer"].indexOf(a.type)===-1)return Promise.reject(fe("TypeError",'Unsupported type "'+a.type+'"'));if(!Pn("setRemoteDescription",a.type,s.signalingState)||s._isClosed)return Promise.reject(fe("InvalidStateError","Can not set remote "+a.type+" in state "+s.signalingState));var d={};s.remoteStreams.forEach(function(C){d[C.id]=C});var c=[],l=V.splitSections(a.sdp),u=l.shift(),h=V.matchPrefix(u,"a=ice-lite").length>0,p=V.matchPrefix(u,"a=group:BUNDLE ").length>0;s.usingBundle=p;var w=V.matchPrefix(u,"a=ice-options:")[0];return s.canTrickleIceCandidates=!!w&&w.substr(14).split(" ").indexOf("trickle")>=0,l.forEach(function(C,f){var v=V.splitLines(C),g=V.getKind(C),b=V.isRejected(C)&&V.matchPrefix(C,"a=bundle-only").length===0,x=v[0].substr(2).split(" ")[2],A=V.getDirection(C,u),R=V.parseMsid(C),k=V.getMid(C)||V.generateIdentifier();if(b||g==="application"&&(x==="DTLS/SCTP"||x==="UDP/DTLS/SCTP"))s.transceivers[f]={mid:k,kind:g,protocol:x,rejected:!0};else{var _,T,E,K,B,H,W,$,J;!b&&s.transceivers[f]&&s.transceivers[f].rejected&&(s.transceivers[f]=s._createTransceiver(g,!0));var q,de,oe=V.parseRtpParameters(C);b||(q=V.getIceParameters(C,u),(de=V.getDtlsParameters(C,u)).role="client"),W=V.parseRtpEncodingParameters(C);var le=V.parseRtcpParameters(C),Ie=V.matchPrefix(C,"a=end-of-candidates",u).length>0,pe=V.matchPrefix(C,"a=candidate:").map(function(se){return V.parseCandidate(se)}).filter(function(se){return se.component===1});if((a.type==="offer"||a.type==="answer")&&!b&&p&&f>0&&s.transceivers[f]&&(s._disposeIceAndDtlsTransports(f),s.transceivers[f].iceGatherer=s.transceivers[0].iceGatherer,s.transceivers[f].iceTransport=s.transceivers[0].iceTransport,s.transceivers[f].dtlsTransport=s.transceivers[0].dtlsTransport,s.transceivers[f].rtpSender&&s.transceivers[f].rtpSender.setTransport(s.transceivers[0].dtlsTransport),s.transceivers[f].rtpReceiver&&s.transceivers[f].rtpReceiver.setTransport(s.transceivers[0].dtlsTransport)),a.type!=="offer"||b)a.type==="answer"&&!b&&(T=(_=s.transceivers[f]).iceGatherer,E=_.iceTransport,K=_.dtlsTransport,B=_.rtpReceiver,H=_.sendEncodingParameters,$=_.localCapabilities,s.transceivers[f].recvEncodingParameters=W,s.transceivers[f].remoteCapabilities=oe,s.transceivers[f].rtcpParameters=le,pe.length&&E.state==="new"&&(!h&&!Ie||p&&f!==0?pe.forEach(function(se){$r(_.iceTransport,se)}):E.setRemoteCandidates(pe)),p&&f!==0||(E.state==="new"&&E.start(T,q,"controlling"),K.state==="new"&&K.start(de)),!mr(_.localCapabilities,_.remoteCapabilities).codecs.filter(function(se){return se.name.toLowerCase()==="rtx"}).length&&_.sendEncodingParameters[0].rtx&&delete _.sendEncodingParameters[0].rtx,s._transceive(_,A==="sendrecv"||A==="recvonly",A==="sendrecv"||A==="sendonly"),!B||A!=="sendrecv"&&A!=="sendonly"?delete _.rtpReceiver:(J=B.track,R?(d[R.stream]||(d[R.stream]=new e.MediaStream),t(J,d[R.stream]),c.push([J,B,d[R.stream]])):(d.default||(d.default=new e.MediaStream),t(J,d.default),c.push([J,B,d.default]))));else{(_=s.transceivers[f]||s._createTransceiver(g)).mid=k,_.iceGatherer||(_.iceGatherer=s._createIceGatherer(f,p)),pe.length&&_.iceTransport.state==="new"&&(!Ie||p&&f!==0?pe.forEach(function(se){$r(_.iceTransport,se)}):_.iceTransport.setRemoteCandidates(pe)),$=e.RTCRtpReceiver.getCapabilities(g),r<15019&&($.codecs=$.codecs.filter(function(se){return se.name!=="rtx"})),H=_.sendEncodingParameters||[{ssrc:1001*(2*f+2)}];var De,Ze=!1;A==="sendrecv"||A==="sendonly"?(Ze=!_.rtpReceiver,B=_.rtpReceiver||new e.RTCRtpReceiver(_.dtlsTransport,g),Ze&&(J=B.track,R&&R.stream==="-"||(R?(d[R.stream]||(d[R.stream]=new e.MediaStream,Object.defineProperty(d[R.stream],"id",{get:function(){return R.stream}})),Object.defineProperty(J,"id",{get:function(){return R.track}}),De=d[R.stream]):(d.default||(d.default=new e.MediaStream),De=d.default)),De&&(t(J,De),_.associatedRemoteMediaStreams.push(De)),c.push([J,B,De]))):_.rtpReceiver&&_.rtpReceiver.track&&(_.associatedRemoteMediaStreams.forEach(function(se){var je=se.getTracks().find(function(ge){return ge.id===_.rtpReceiver.track.id});je&&function(ge,qe){qe.removeTrack(ge),qe.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:ge}))}(je,se)}),_.associatedRemoteMediaStreams=[]),_.localCapabilities=$,_.remoteCapabilities=oe,_.rtpReceiver=B,_.rtcpParameters=le,_.sendEncodingParameters=H,_.recvEncodingParameters=W,s._transceive(s.transceivers[f],!1,Ze)}}}),s._dtlsRole===void 0&&(s._dtlsRole=a.type==="offer"?"active":"passive"),s._remoteDescription={type:a.type,sdp:a.sdp},a.type==="offer"?s._updateSignalingState("have-remote-offer"):s._updateSignalingState("stable"),Object.keys(d).forEach(function(C){var f=d[C];if(f.getTracks().length){if(s.remoteStreams.indexOf(f)===-1){s.remoteStreams.push(f);var v=new Event("addstream");v.stream=f,e.setTimeout(function(){s._dispatchEvent("addstream",v)})}c.forEach(function(g){var b=g[0],x=g[1];f.id===g[2].id&&i(s,b,x,[f])})}}),c.forEach(function(C){C[2]||i(s,C[0],C[1],[])}),e.setTimeout(function(){s&&s.transceivers&&s.transceivers.forEach(function(C){C.iceTransport&&C.iceTransport.state==="new"&&C.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),C.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},n.prototype.close=function(){this.transceivers.forEach(function(a){a.iceTransport&&a.iceTransport.stop(),a.dtlsTransport&&a.dtlsTransport.stop(),a.rtpSender&&a.rtpSender.stop(),a.rtpReceiver&&a.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},n.prototype._updateSignalingState=function(a){this.signalingState=a;var s=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",s)},n.prototype._maybeFireNegotiationNeeded=function(){var a=this;this.signalingState==="stable"&&this.needNegotiation!==!0&&(this.needNegotiation=!0,e.setTimeout(function(){if(a.needNegotiation){a.needNegotiation=!1;var s=new Event("negotiationneeded");a._dispatchEvent("negotiationneeded",s)}},0))},n.prototype._updateIceConnectionState=function(){var a,s={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(c){c.iceTransport&&!c.rejected&&s[c.iceTransport.state]++}),a="new",s.failed>0?a="failed":s.checking>0?a="checking":s.disconnected>0?a="disconnected":s.new>0?a="new":s.connected>0?a="connected":s.completed>0&&(a="completed"),a!==this.iceConnectionState){this.iceConnectionState=a;var d=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",d)}},n.prototype._updateConnectionState=function(){var a,s={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(c){c.iceTransport&&c.dtlsTransport&&!c.rejected&&(s[c.iceTransport.state]++,s[c.dtlsTransport.state]++)}),s.connected+=s.completed,a="new",s.failed>0?a="failed":s.connecting>0?a="connecting":s.disconnected>0?a="disconnected":s.new>0?a="new":s.connected>0&&(a="connected"),a!==this.connectionState){this.connectionState=a;var d=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",d)}},n.prototype.createOffer=function(){var a=this;if(a._isClosed)return Promise.reject(fe("InvalidStateError","Can not call createOffer after close"));var s=a.transceivers.filter(function(h){return h.kind==="audio"}).length,d=a.transceivers.filter(function(h){return h.kind==="video"}).length,c=arguments[0];if(c){if(c.mandatory||c.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");c.offerToReceiveAudio!==void 0&&(s=c.offerToReceiveAudio===!0?1:c.offerToReceiveAudio===!1?0:c.offerToReceiveAudio),c.offerToReceiveVideo!==void 0&&(d=c.offerToReceiveVideo===!0?1:c.offerToReceiveVideo===!1?0:c.offerToReceiveVideo)}for(a.transceivers.forEach(function(h){h.kind==="audio"?--s<0&&(h.wantReceive=!1):h.kind==="video"&&--d<0&&(h.wantReceive=!1)});s>0||d>0;)s>0&&(a._createTransceiver("audio"),s--),d>0&&(a._createTransceiver("video"),d--);var l=V.writeSessionBoilerplate(a._sdpSessionId,a._sdpSessionVersion++);a.transceivers.forEach(function(h,p){var w=h.track,C=h.kind,f=h.mid||V.generateIdentifier();h.mid=f,h.iceGatherer||(h.iceGatherer=a._createIceGatherer(p,a.usingBundle));var v=e.RTCRtpSender.getCapabilities(C);r<15019&&(v.codecs=v.codecs.filter(function(b){return b.name!=="rtx"})),v.codecs.forEach(function(b){b.name==="H264"&&b.parameters["level-asymmetry-allowed"]===void 0&&(b.parameters["level-asymmetry-allowed"]="1"),h.remoteCapabilities&&h.remoteCapabilities.codecs&&h.remoteCapabilities.codecs.forEach(function(x){b.name.toLowerCase()===x.name.toLowerCase()&&b.clockRate===x.clockRate&&(b.preferredPayloadType=x.payloadType)})}),v.headerExtensions.forEach(function(b){(h.remoteCapabilities&&h.remoteCapabilities.headerExtensions||[]).forEach(function(x){b.uri===x.uri&&(b.id=x.id)})});var g=h.sendEncodingParameters||[{ssrc:1001*(2*p+1)}];w&&r>=15019&&C==="video"&&!g[0].rtx&&(g[0].rtx={ssrc:g[0].ssrc+1}),h.wantReceive&&(h.rtpReceiver=new e.RTCRtpReceiver(h.dtlsTransport,C)),h.localCapabilities=v,h.sendEncodingParameters=g}),a._config.bundlePolicy!=="max-compat"&&(l+="a=group:BUNDLE "+a.transceivers.map(function(h){return h.mid}).join(" ")+`\r
`),l+=`a=ice-options:trickle\r
`,a.transceivers.forEach(function(h,p){l+=xn(h,h.localCapabilities,"offer",h.stream,a._dtlsRole),l+=`a=rtcp-rsize\r
`,!h.iceGatherer||a.iceGatheringState==="new"||p!==0&&a.usingBundle||(h.iceGatherer.getLocalCandidates().forEach(function(w){w.component=1,l+="a="+V.writeCandidate(w)+`\r
`}),h.iceGatherer.state==="completed"&&(l+=`a=end-of-candidates\r
`))});var u=new e.RTCSessionDescription({type:"offer",sdp:l});return Promise.resolve(u)},n.prototype.createAnswer=function(){var a=this;if(a._isClosed)return Promise.reject(fe("InvalidStateError","Can not call createAnswer after close"));if(a.signalingState!=="have-remote-offer"&&a.signalingState!=="have-local-pranswer")return Promise.reject(fe("InvalidStateError","Can not call createAnswer in signalingState "+a.signalingState));var s=V.writeSessionBoilerplate(a._sdpSessionId,a._sdpSessionVersion++);a.usingBundle&&(s+="a=group:BUNDLE "+a.transceivers.map(function(l){return l.mid}).join(" ")+`\r
`),s+=`a=ice-options:trickle\r
`;var d=V.getMediaSections(a._remoteDescription.sdp).length;a.transceivers.forEach(function(l,u){if(!(u+1>d)){if(l.rejected)return l.kind==="application"?l.protocol==="DTLS/SCTP"?s+=`m=application 0 DTLS/SCTP 5000\r
`:s+="m=application 0 "+l.protocol+` webrtc-datachannel\r
`:l.kind==="audio"?s+=`m=audio 0 UDP/TLS/RTP/SAVPF 0\r
a=rtpmap:0 PCMU/8000\r
`:l.kind==="video"&&(s+=`m=video 0 UDP/TLS/RTP/SAVPF 120\r
a=rtpmap:120 VP8/90000\r
`),void(s+=`c=IN IP4 0.0.0.0\r
a=inactive\r
a=mid:`+l.mid+`\r
`);var h;l.stream&&(l.kind==="audio"?h=l.stream.getAudioTracks()[0]:l.kind==="video"&&(h=l.stream.getVideoTracks()[0]),h&&r>=15019&&l.kind==="video"&&!l.sendEncodingParameters[0].rtx&&(l.sendEncodingParameters[0].rtx={ssrc:l.sendEncodingParameters[0].ssrc+1}));var p=mr(l.localCapabilities,l.remoteCapabilities);!p.codecs.filter(function(w){return w.name.toLowerCase()==="rtx"}).length&&l.sendEncodingParameters[0].rtx&&delete l.sendEncodingParameters[0].rtx,s+=xn(l,p,"answer",l.stream,a._dtlsRole),l.rtcpParameters&&l.rtcpParameters.reducedSize&&(s+=`a=rtcp-rsize\r
`)}});var c=new e.RTCSessionDescription({type:"answer",sdp:s});return Promise.resolve(c)},n.prototype.addIceCandidate=function(a){var s,d=this;return a&&a.sdpMLineIndex===void 0&&!a.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(c,l){if(!d._remoteDescription)return l(fe("InvalidStateError","Can not add ICE candidate without a remote description"));if(a&&a.candidate!==""){var u=a.sdpMLineIndex;if(a.sdpMid){for(var h=0;h<d.transceivers.length;h++)if(d.transceivers[h].mid===a.sdpMid){u=h;break}}var p=d.transceivers[u];if(!p)return l(fe("OperationError","Can not add ICE candidate"));if(p.rejected)return c();var w=Object.keys(a.candidate).length>0?V.parseCandidate(a.candidate):{};if(w.protocol==="tcp"&&(w.port===0||w.port===9)||w.component&&w.component!==1)return c();if((u===0||u>0&&p.iceTransport!==d.transceivers[0].iceTransport)&&!$r(p.iceTransport,w))return l(fe("OperationError","Can not add ICE candidate"));var C=a.candidate.trim();C.indexOf("a=")===0&&(C=C.substr(2)),(s=V.getMediaSections(d._remoteDescription.sdp))[u]+="a="+(w.type?C:"end-of-candidates")+`\r
`,d._remoteDescription.sdp=V.getDescription(d._remoteDescription.sdp)+s.join("")}else for(var f=0;f<d.transceivers.length&&(d.transceivers[f].rejected||(d.transceivers[f].iceTransport.addRemoteCandidate({}),(s=V.getMediaSections(d._remoteDescription.sdp))[f]+=`a=end-of-candidates\r
`,d._remoteDescription.sdp=V.getDescription(d._remoteDescription.sdp)+s.join(""),!d.usingBundle));f++);c()})},n.prototype.getStats=function(a){if(a&&a instanceof e.MediaStreamTrack){var s=null;if(this.transceivers.forEach(function(c){c.rtpSender&&c.rtpSender.track===a?s=c.rtpSender:c.rtpReceiver&&c.rtpReceiver.track===a&&(s=c.rtpReceiver)}),!s)throw fe("InvalidAccessError","Invalid selector.");return s.getStats()}var d=[];return this.transceivers.forEach(function(c){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(l){c[l]&&d.push(c[l].getStats())})}),Promise.all(d).then(function(c){var l=new Map;return c.forEach(function(u){u.forEach(function(h){l.set(h.id,h)})}),l})},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(a){var s=e[a];if(s&&s.prototype&&s.prototype.getStats){var d=s.prototype.getStats;s.prototype.getStats=function(){return d.apply(this).then(function(c){var l=new Map;return Object.keys(c).forEach(function(u){var h;c[u].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(h=c[u]).type]||h.type,l.set(u,c[u])}),l})}}});var o=["createOffer","createAnswer"];return o.forEach(function(a){var s=n.prototype[a];n.prototype[a]=function(){var d=arguments;return typeof d[0]=="function"||typeof d[1]=="function"?s.apply(this,[arguments[2]]).then(function(c){typeof d[0]=="function"&&d[0].apply(null,[c])},function(c){typeof d[1]=="function"&&d[1].apply(null,[c])}):s.apply(this,arguments)}}),(o=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(a){var s=n.prototype[a];n.prototype[a]=function(){var d=arguments;return typeof d[1]=="function"||typeof d[2]=="function"?s.apply(this,arguments).then(function(){typeof d[1]=="function"&&d[1].apply(null)},function(c){typeof d[2]=="function"&&d[2].apply(null,[c])}):s.apply(this,arguments)}}),["getStats"].forEach(function(a){var s=n.prototype[a];n.prototype[a]=function(){var d=arguments;return typeof d[1]=="function"?s.apply(this,arguments).then(function(){typeof d[1]=="function"&&d[1].apply(null)}):s.apply(this,arguments)}}),n};function An(e){const r=e&&e.navigator,t=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(i){return t(i).catch(n=>Promise.reject(function(o){return{name:{PermissionDeniedError:"NotAllowedError"}[o.name]||o.name,message:o.message,constraint:o.constraint,toString(){return this.name}}}(n)))}}function In(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}function qr(e,r){if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(i){return i}),e.RTCSessionDescription||(e.RTCSessionDescription=function(i){return i}),r.version<15025)){const i=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set(n){i.set.call(this,n);const o=new Event("enabled");o.enabled=n,this.dispatchEvent(o)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=new e.RTCDtmfSender(this):this.track.kind==="video"&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);const t=Fo(e,r.version);e.RTCPeerConnection=function(i){return i&&i.iceServers&&(i.iceServers=function(n){let o=!1;return(n=JSON.parse(JSON.stringify(n))).filter(a=>{if(a&&(a.urls||a.url)){let s=a.urls||a.url;a.url&&!a.urls&&pr("RTCIceServer.url","RTCIceServer.urls");const d=typeof s=="string";return d&&(s=[s]),s=s.filter(c=>{if(c.indexOf("stun:")===0)return!1;const l=c.startsWith("turn")&&!c.startsWith("turn:[")&&c.includes("transport=udp");return l&&!o?(o=!0,!0):l&&!o}),delete a.url,a.urls=d?s[0]:s,!!s.length}})}(i.iceServers,r.version),Yr("ICE servers after filtering:",i.iceServers)),new t(i)},e.RTCPeerConnection.prototype=t.prototype}function Dn(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}var Ln=Object.freeze({__proto__:null,shimPeerConnection:qr,shimReplaceTrack:Dn,shimGetUserMedia:An,shimGetDisplayMedia:In});function On(e,r){const t=e&&e.navigator,i=e&&e.MediaStreamTrack;if(t.getUserMedia=function(n,o,a){pr("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),t.mediaDevices.getUserMedia(n).then(o,a)},!(r.version>55&&"autoGainControl"in t.mediaDevices.getSupportedConstraints())){const n=function(a,s,d){s in a&&!(d in a)&&(a[d]=a[s],delete a[s])},o=t.mediaDevices.getUserMedia.bind(t.mediaDevices);if(t.mediaDevices.getUserMedia=function(a){return typeof a=="object"&&typeof a.audio=="object"&&(a=JSON.parse(JSON.stringify(a)),n(a.audio,"autoGainControl","mozAutoGainControl"),n(a.audio,"noiseSuppression","mozNoiseSuppression")),o(a)},i&&i.prototype.getSettings){const a=i.prototype.getSettings;i.prototype.getSettings=function(){const s=a.apply(this,arguments);return n(s,"mozAutoGainControl","autoGainControl"),n(s,"mozNoiseSuppression","noiseSuppression"),s}}if(i&&i.prototype.applyConstraints){const a=i.prototype.applyConstraints;i.prototype.applyConstraints=function(s){return this.kind==="audio"&&typeof s=="object"&&(s=JSON.parse(JSON.stringify(s)),n(s,"autoGainControl","mozAutoGainControl"),n(s,"noiseSuppression","mozNoiseSuppression")),a.apply(this,[s])}}}}function Mn(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Qr(e,r){if(typeof e!="object"||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),r.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const o=e.RTCPeerConnection.prototype[n],a={[n](){return arguments[0]=new(n==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)}};e.RTCPeerConnection.prototype[n]=a[n]});const t={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[n,o,a]=arguments;return i.apply(this,[n||null]).then(s=>{if(r.version<53&&!o)try{s.forEach(d=>{d.type=t[d.type]||d.type})}catch(d){if(d.name!=="TypeError")throw d;s.forEach((c,l)=>{s.set(l,Object.assign({},c,{type:t[c.type]||c.type}))})}return s}).then(o,a)}}function Bn(e){if(typeof e!="object"||!e.RTCPeerConnection||!e.RTCRtpSender||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const r=e.RTCPeerConnection.prototype.getSenders;r&&(e.RTCPeerConnection.prototype.getSenders=function(){const i=r.apply(this,[]);return i.forEach(n=>n._pc=this),i});const t=e.RTCPeerConnection.prototype.addTrack;t&&(e.RTCPeerConnection.prototype.addTrack=function(){const i=t.apply(this,arguments);return i._pc=this,i}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Nn(e){if(typeof e!="object"||!e.RTCPeerConnection||!e.RTCRtpSender||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const r=e.RTCPeerConnection.prototype.getReceivers;r&&(e.RTCPeerConnection.prototype.getReceivers=function(){const t=r.apply(this,[]);return t.forEach(i=>i._pc=this),t}),_t(e,"track",t=>(t.receiver._pc=t.srcElement,t)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Fn(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(r){pr("removeStream","removeTrack"),this.getSenders().forEach(t=>{t.track&&r.getTracks().includes(t.track)&&this.removeTrack(t)})})}function jn(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function zn(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype.addTransceiver;r&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const t=arguments[1],i=t&&"sendEncodings"in t;i&&t.sendEncodings.forEach(o=>{if("rid"in o&&!/^[a-z0-9]{0,16}$/i.test(o.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in o&&!(parseFloat(o.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in o&&!(parseFloat(o.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const n=r.apply(this,arguments);if(i){const{sender:o}=n,a=o.getParameters();(!("encodings"in a)||a.encodings.length===1&&Object.keys(a.encodings[0]).length===0)&&(a.encodings=t.sendEncodings,o.sendEncodings=t.sendEncodings,this.setParametersPromises.push(o.setParameters(a).then(()=>{delete o.sendEncodings}).catch(()=>{delete o.sendEncodings})))}return n})}function Vn(e){if(typeof e!="object"||!e.RTCRtpSender)return;const r=e.RTCRtpSender.prototype.getParameters;r&&(e.RTCRtpSender.prototype.getParameters=function(){const t=r.apply(this,arguments);return"encodings"in t||(t.encodings=[].concat(this.sendEncodings||[{}])),t})}function Gn(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>r.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):r.apply(this,arguments)}}function Un(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>r.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):r.apply(this,arguments)}}var Wn=Object.freeze({__proto__:null,shimOnTrack:Mn,shimPeerConnection:Qr,shimSenderGetStats:Bn,shimReceiverGetStats:Nn,shimRemoveStream:Fn,shimRTCDataChannel:jn,shimAddTransceiver:zn,shimGetParameters:Vn,shimCreateOffer:Gn,shimCreateAnswer:Un,shimGetUserMedia:On,shimGetDisplayMedia:function(e,r){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(t){if(!t||!t.video){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return t.video===!0?t.video={mediaSource:r}:t.video.mediaSource=r,e.navigator.mediaDevices.getUserMedia(t)})}});function Zn(e){if(typeof e=="object"&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(t){this._localStreams||(this._localStreams=[]),this._localStreams.includes(t)||this._localStreams.push(t),t.getAudioTracks().forEach(i=>r.call(this,i,t)),t.getVideoTracks().forEach(i=>r.call(this,i,t))},e.RTCPeerConnection.prototype.addTrack=function(t,...i){return i&&i.forEach(n=>{this._localStreams?this._localStreams.includes(n)||this._localStreams.push(n):this._localStreams=[n]}),r.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(r){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(r);if(t===-1)return;this._localStreams.splice(t,1);const i=r.getTracks();this.getSenders().forEach(n=>{i.includes(n.track)&&this.removeTrack(n)})})}}function Hn(e){if(typeof e=="object"&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(t){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=t),this.addEventListener("track",this._onaddstreampoly=i=>{i.streams.forEach(n=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(n))return;this._remoteStreams.push(n);const o=new Event("addstream");o.stream=n,this.dispatchEvent(o)})})}});const r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const t=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(n=>{if(t._remoteStreams||(t._remoteStreams=[]),t._remoteStreams.indexOf(n)>=0)return;t._remoteStreams.push(n);const o=new Event("addstream");o.stream=n,t.dispatchEvent(o)})}),r.apply(t,arguments)}}}function Xn(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,t=r.createOffer,i=r.createAnswer,n=r.setLocalDescription,o=r.setRemoteDescription,a=r.addIceCandidate;r.createOffer=function(d,c){const l=arguments.length>=2?arguments[2]:arguments[0],u=t.apply(this,[l]);return c?(u.then(d,c),Promise.resolve()):u},r.createAnswer=function(d,c){const l=arguments.length>=2?arguments[2]:arguments[0],u=i.apply(this,[l]);return c?(u.then(d,c),Promise.resolve()):u};let s=function(d,c,l){const u=n.apply(this,[d]);return l?(u.then(c,l),Promise.resolve()):u};r.setLocalDescription=s,s=function(d,c,l){const u=o.apply(this,[d]);return l?(u.then(c,l),Promise.resolve()):u},r.setRemoteDescription=s,s=function(d,c,l){const u=a.apply(this,[d]);return l?(u.then(c,l),Promise.resolve()):u},r.addIceCandidate=s}function Yn(e){const r=e&&e.navigator;if(r.mediaDevices&&r.mediaDevices.getUserMedia){const t=r.mediaDevices,i=t.getUserMedia.bind(t);r.mediaDevices.getUserMedia=n=>i(Jn(n))}!r.getUserMedia&&r.mediaDevices&&r.mediaDevices.getUserMedia&&(r.getUserMedia=(function(t,i,n){r.mediaDevices.getUserMedia(t).then(i,n)}).bind(r))}function Jn(e){return e&&e.video!==void 0?Object.assign({},e,{video:fn(e.video)}):e}function Kn(e){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection;e.RTCPeerConnection=function(t,i){if(t&&t.iceServers){const n=[];for(let o=0;o<t.iceServers.length;o++){let a=t.iceServers[o];!a.hasOwnProperty("urls")&&a.hasOwnProperty("url")?(pr("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,n.push(a)):n.push(t.iceServers[o])}t.iceServers=n}return new r(t,i)},e.RTCPeerConnection.prototype=r.prototype,"generateCertificate"in r&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>r.generateCertificate})}function $n(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function qn(e){const r=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(t){if(t){t.offerToReceiveAudio!==void 0&&(t.offerToReceiveAudio=!!t.offerToReceiveAudio);const i=this.getTransceivers().find(o=>o.receiver.track.kind==="audio");t.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):t.offerToReceiveAudio!==!0||i||this.addTransceiver("audio"),t.offerToReceiveVideo!==void 0&&(t.offerToReceiveVideo=!!t.offerToReceiveVideo);const n=this.getTransceivers().find(o=>o.receiver.track.kind==="video");t.offerToReceiveVideo===!1&&n?n.direction==="sendrecv"?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":n.direction==="recvonly"&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):t.offerToReceiveVideo!==!0||n||this.addTransceiver("video")}return r.apply(this,arguments)}}function Qn(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var ea=Object.freeze({__proto__:null,shimLocalStreamsAPI:Zn,shimRemoteStreamsAPI:Hn,shimCallbacksAPI:Xn,shimGetUserMedia:Yn,shimConstraints:Jn,shimRTCIceServerUrls:Kn,shimTrackEventTransceiver:$n,shimCreateOfferLegacy:qn,shimAudioContext:Qn});function fr(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const r=e.RTCIceCandidate;e.RTCIceCandidate=function(t){if(typeof t=="object"&&t.candidate&&t.candidate.indexOf("a=")===0&&((t=JSON.parse(JSON.stringify(t))).candidate=t.candidate.substr(2)),t.candidate&&t.candidate.length){const i=new r(t),n=V.parseCandidate(t.candidate),o=Object.assign(i,n);return o.toJSON=function(){return{candidate:o.candidate,sdpMid:o.sdpMid,sdpMLineIndex:o.sdpMLineIndex,usernameFragment:o.usernameFragment}},o}return new r(t)},e.RTCIceCandidate.prototype=r.prototype,_t(e,"icecandidate",t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t))}function Mt(e,r){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return this._sctp===void 0?null:this._sctp}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,r.browser==="chrome"&&r.version>=76){const{sdpSemantics:i}=this.getConfiguration();i==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return this._sctp===void 0?null:this._sctp},enumerable:!0,configurable:!0})}if(function(i){if(!i||!i.sdp)return!1;const n=V.splitSections(i.sdp);return n.shift(),n.some(o=>{const a=V.parseMLine(o);return a&&a.kind==="application"&&a.protocol.indexOf("SCTP")!==-1})}(arguments[0])){const i=function(d){const c=d.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(c===null||c.length<2)return-1;const l=parseInt(c[1],10);return l!=l?-1:l}(arguments[0]),n=function(d){let c=65536;return r.browser==="firefox"&&(c=r.version<57?d===-1?16384:2147483637:r.version<60?r.version===57?65535:65536:2147483637),c}(i),o=function(d,c){let l=65536;r.browser==="firefox"&&r.version===57&&(l=65535);const u=V.matchPrefix(d.sdp,"a=max-message-size:");return u.length>0?l=parseInt(u[0].substr(19),10):r.browser==="firefox"&&c!==-1&&(l=2147483637),l}(arguments[0],i);let a;a=n===0&&o===0?Number.POSITIVE_INFINITY:n===0||o===0?Math.max(n,o):Math.min(n,o);const s={};Object.defineProperty(s,"maxMessageSize",{get:()=>a}),this._sctp=s}return t.apply(this,arguments)}}function Bt(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function r(i,n){const o=i.send;i.send=function(){const a=arguments[0],s=a.length||a.size||a.byteLength;if(i.readyState==="open"&&n.sctp&&s>n.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+n.sctp.maxMessageSize+" bytes)");return o.apply(i,arguments)}}const t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const i=t.apply(this,arguments);return r(i,this),i},_t(e,"datachannel",i=>(r(i.channel,i.target),i))}function ei(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const r=e.RTCPeerConnection.prototype;Object.defineProperty(r,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(r,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(t){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),t&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=t)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(t=>{const i=r[t];r[t]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=n=>{const o=n.target;if(o._lastConnectionState!==o.connectionState){o._lastConnectionState=o.connectionState;const a=new Event("connectionstatechange",n);o.dispatchEvent(a)}return n},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),i.apply(this,arguments)}})}function ti(e,r){if(!e.RTCPeerConnection||r.browser==="chrome"&&r.version>=71||r.browser==="safari"&&r.version>=605)return;const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const n=i.sdp.split(`
`).filter(o=>o.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&i instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:i.type,sdp:n}):i.sdp=n}return t.apply(this,arguments)}}function gr(e,r){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype.addIceCandidate;t&&t.length!==0&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(r.browser==="chrome"&&r.version<78||r.browser==="firefox"&&r.version<68||r.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}var jo=Object.freeze({__proto__:null,shimRTCIceCandidate:fr,shimMaxMessageSize:Mt,shimSendThrowTypeError:Bt,shimConnectionState:ei,removeExtmapAllowMixed:ti,shimAddIceCandidateNullOrEmpty:gr});const ri=function({window:e}={},r={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const t=Yr,i=function(o){const a={browser:null,version:null};if(o===void 0||!o.navigator)return a.browser="Not a browser.",a;const{navigator:s}=o;if(s.mozGetUserMedia)a.browser="firefox",a.version=Ot(s.userAgent,/Firefox\/(\d+)\./,1);else if(s.webkitGetUserMedia||o.isSecureContext===!1&&o.webkitRTCPeerConnection&&!o.RTCIceGatherer)a.browser="chrome",a.version=Ot(s.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(s.mediaDevices&&s.userAgent.match(/Edge\/(\d+).(\d+)$/))a.browser="edge",a.version=Ot(s.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!o.RTCPeerConnection||!s.userAgent.match(/AppleWebKit\/(\d+)\./))return a.browser="Not a supported browser.",a;a.browser="safari",a.version=Ot(s.userAgent,/AppleWebKit\/(\d+)\./,1),a.supportsUnifiedPlan=o.RTCRtpTransceiver&&"currentDirection"in o.RTCRtpTransceiver.prototype}return a}(e),n={browserDetails:i,commonShim:jo,extractVersion:Ot,disableLog:Bo,disableWarnings:No};switch(i.browser){case"chrome":if(!Rn||!Kr||!r.shimChrome)return t("Chrome shim is not included in this adapter release."),n;if(i.version===null)return t("Chrome shim can not determine version, not shimming."),n;t("adapter.js shimming chrome."),n.browserShim=Rn,gr(e,i),wn(e,i),yn(e),Kr(e,i),bn(e),Cn(e,i),_n(e),Sn(e),Tn(e),En(e,i),fr(e),ei(e),Mt(e,i),Bt(e),ti(e,i);break;case"firefox":if(!Wn||!Qr||!r.shimFirefox)return t("Firefox shim is not included in this adapter release."),n;t("adapter.js shimming firefox."),n.browserShim=Wn,gr(e,i),On(e,i),Qr(e,i),Mn(e),Fn(e),Bn(e),Nn(e),jn(e),zn(e),Vn(e),Gn(e),Un(e),fr(e),ei(e),Mt(e,i),Bt(e);break;case"edge":if(!Ln||!qr||!r.shimEdge)return t("MS edge shim is not included in this adapter release."),n;t("adapter.js shimming edge."),n.browserShim=Ln,An(e),In(e),qr(e,i),Dn(e),Mt(e,i),Bt(e);break;case"safari":if(!ea||!r.shimSafari)return t("Safari shim is not included in this adapter release."),n;t("adapter.js shimming safari."),n.browserShim=ea,gr(e,i),Kn(e),qn(e),Xn(e),Zn(e),Hn(e),$n(e),Yn(e),Qn(e),fr(e),Mt(e,i),Bt(e),ti(e,i);break;default:t("Unsupported browser!")}return n}({window:typeof window>"u"?void 0:window}),zo={browser:ri.browserDetails.browser,version:ri.browserDetails.version,supportsUnifiedPlan:ri.browserDetails.supportsUnifiedPlan};function ta(e){return U(this,void 0,void 0,function*(){const r=yield e.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});return!!r.sdp&&r.sdp.toLowerCase().indexOf("h264")!==-1})}function Vo(){return U(this,void 0,void 0,function*(){console.debug(JSON.stringify(zo));const e=!!window.RTCPeerConnection;if(!e)return{peerConnection:!1,H264:!1,getStats:!1,jitterBufferTarget:!1};const r=new RTCPeerConnection,t=yield ta(r),i=!!r.getStats,n=function(s){const d=s.addTransceiver("video",{direction:"recvonly"}),c=d.receiver.jitterBufferTarget!==void 0;return d.stop(),c}(r);r.close();const o=new RTCPeerConnection,a=yield ta(o);return o.close(),{peerConnection:e,H264:t||a,getStats:i,jitterBufferTarget:n}})}var Go=ft(function(e,r){(function(t,i){var n="function",o="undefined",a="object",s="string",d="major",c="model",l="name",u="type",h="vendor",p="version",w="architecture",C="console",f="mobile",v="tablet",g="smarttv",b="wearable",x="embedded",A="Amazon",R="Apple",k="ASUS",_="BlackBerry",T="Browser",E="Chrome",K="Firefox",B="Google",H="Huawei",W="LG",$="Microsoft",J="Motorola",q="Opera",de="Samsung",oe="Sharp",le="Sony",Ie="Xiaomi",pe="Zebra",De="Facebook",Ze="Chromium OS",se="Mac OS",je=" Browser",ge=function(z){for(var F={},D=0;D<z.length;D++)F[z[D].toUpperCase()]=z[D];return F},qe=function(z,F){return typeof z===s&&me(F).indexOf(me(z))!==-1},me=function(z){return z.toLowerCase()},m=function(z,F){if(typeof z===s)return z=z.replace(/^\s\s*/,""),typeof F===o?z:z.substring(0,500)},y=function(z,F){for(var D,re,ae,X,be,j,ve=0;ve<F.length&&!be;){var ke=F[ve],Ce=F[ve+1];for(D=re=0;D<ke.length&&!be&&ke[D];)if(be=ke[D++].exec(z))for(ae=0;ae<Ce.length;ae++)j=be[++re],typeof(X=Ce[ae])===a&&X.length>0?X.length===2?typeof X[1]==n?this[X[0]]=X[1].call(this,j):this[X[0]]=X[1]:X.length===3?typeof X[1]!==n||X[1].exec&&X[1].test?this[X[0]]=j?j.replace(X[1],X[2]):i:this[X[0]]=j?X[1].call(this,j,X[2]):i:X.length===4&&(this[X[0]]=j?X[3].call(this,j.replace(X[1],X[2])):i):this[X]=j||i;ve+=2}},S=function(z,F){for(var D in F)if(typeof F[D]===a&&F[D].length>0){for(var re=0;re<F[D].length;re++)if(qe(F[D][re],z))return D==="?"?i:D}else if(qe(F[D],z))return D==="?"?i:D;return F.hasOwnProperty("*")?F["*"]:z},P={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},M={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[p,[l,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[p,[l,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[l,p],[/opios[\/ ]+([\w\.]+)/i],[p,[l,q+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[p,[l,q+" GX"]],[/\bopr\/([\w\.]+)/i],[p,[l,q]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[p,[l,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[p,[l,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\/([-\w\.]+)/i,/(heytap|ovi|115)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[l,p],[/quark(?:pc)?\/([-\w\.]+)/i],[p,[l,"Quark"]],[/\bddg\/([\w\.]+)/i],[p,[l,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[p,[l,"UC"+T]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[p,[l,"WeChat"]],[/konqueror\/([\w\.]+)/i],[p,[l,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[p,[l,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[p,[l,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[p,[l,"Smart Lenovo "+T]],[/(avast|avg)\/([\w\.]+)/i],[[l,/(.+)/,"$1 Secure "+T],p],[/\bfocus\/([\w\.]+)/i],[p,[l,K+" Focus"]],[/\bopt\/([\w\.]+)/i],[p,[l,q+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[p,[l,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[p,[l,"Dolphin"]],[/coast\/([\w\.]+)/i],[p,[l,q+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[p,[l,"MIUI"+je]],[/fxios\/([\w\.-]+)/i],[p,[l,K]],[/\bqihoobrowser\/?([\w\.]*)/i],[p,[l,"360"]],[/\b(qq)\/([\w\.]+)/i],[[l,/(.+)/,"$1Browser"],p],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[l,/(.+)/,"$1"+je],p],[/samsungbrowser\/([\w\.]+)/i],[p,[l,de+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[p,[l,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[l,"Sogou Mobile"],p],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[l,p],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[l],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[p,l],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[l,De],p],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[l,p],[/\bgsa\/([\w\.]+) .*safari\//i],[p,[l,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[p,[l,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[p,[l,E+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[l,E+" WebView"],p],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[p,[l,"Android "+T]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[l,p],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[p,[l,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[p,l],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[l,[p,S,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[l,p],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[l,"Netscape"],p],[/(wolvic|librewolf)\/([\w\.]+)/i],[l,p],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[p,[l,K+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[l,[p,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[l,[p,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[w,"amd64"]],[/(ia32(?=;))/i],[[w,me]],[/((?:i[346]|x)86)[;\)]/i],[[w,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[w,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[w,"armhf"]],[/windows (ce|mobile); ppc;/i],[[w,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[w,/ower/,"",me]],[/(sun4\w)[;\)]/i],[[w,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[w,me]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[c,[h,de],[u,v]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[c,[h,de],[u,f]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[c,[h,R],[u,f]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[c,[h,R],[u,v]],[/(macintosh);/i],[c,[h,R]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[c,[h,oe],[u,f]],[/(?:honor)([-\w ]+)[;\)]/i],[c,[h,"Honor"],[u,f]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[c,[h,H],[u,v]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[c,[h,H],[u,f]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[c,/_/g," "],[h,Ie],[u,f]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[c,/_/g," "],[h,Ie],[u,v]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[c,[h,"OPPO"],[u,f]],[/\b(opd2\d{3}a?) bui/i],[c,[h,"OPPO"],[u,v]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[c,[h,"Vivo"],[u,f]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[c,[h,"Realme"],[u,f]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[c,[h,J],[u,f]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[c,[h,J],[u,v]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[c,[h,W],[u,v]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[c,[h,W],[u,f]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[c,[h,"Lenovo"],[u,v]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[c,/_/g," "],[h,"Nokia"],[u,f]],[/(pixel c)\b/i],[c,[h,B],[u,v]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[c,[h,B],[u,f]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[c,[h,le],[u,f]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[c,"Xperia Tablet"],[h,le],[u,v]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[c,[h,"OnePlus"],[u,f]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[c,[h,A],[u,v]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[c,/(.+)/g,"Fire Phone $1"],[h,A],[u,f]],[/(playbook);[-\w\),; ]+(rim)/i],[c,h,[u,v]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[c,[h,_],[u,f]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[c,[h,k],[u,v]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[c,[h,k],[u,f]],[/(nexus 9)/i],[c,[h,"HTC"],[u,v]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[h,[c,/_/g," "],[u,f]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[c,[h,"TCL"],[u,v]],[/(itel) ((\w+))/i],[[h,me],c,[u,S,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[c,[h,"Acer"],[u,v]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[c,[h,"Meizu"],[u,f]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[c,[h,"Ulefone"],[u,f]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[c,[h,"Energizer"],[u,f]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[c,[h,"Cat"],[u,f]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[c,[h,"Smartfren"],[u,f]],[/droid.+; (a(?:015|06[35]|142p?))/i],[c,[h,"Nothing"],[u,f]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (imo) ((?!tab)[\w ]+?)(?: bui|\))/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[h,c,[u,f]],[/(imo) (tab \w+)/i,/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[h,c,[u,v]],[/(surface duo)/i],[c,[h,$],[u,v]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[c,[h,"Fairphone"],[u,f]],[/(u304aa)/i],[c,[h,"AT&T"],[u,f]],[/\bsie-(\w*)/i],[c,[h,"Siemens"],[u,f]],[/\b(rct\w+) b/i],[c,[h,"RCA"],[u,v]],[/\b(venue[\d ]{2,7}) b/i],[c,[h,"Dell"],[u,v]],[/\b(q(?:mv|ta)\w+) b/i],[c,[h,"Verizon"],[u,v]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[c,[h,"Barnes & Noble"],[u,v]],[/\b(tm\d{3}\w+) b/i],[c,[h,"NuVision"],[u,v]],[/\b(k88) b/i],[c,[h,"ZTE"],[u,v]],[/\b(nx\d{3}j) b/i],[c,[h,"ZTE"],[u,f]],[/\b(gen\d{3}) b.+49h/i],[c,[h,"Swiss"],[u,f]],[/\b(zur\d{3}) b/i],[c,[h,"Swiss"],[u,v]],[/\b((zeki)?tb.*\b) b/i],[c,[h,"Zeki"],[u,v]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[h,"Dragon Touch"],c,[u,v]],[/\b(ns-?\w{0,9}) b/i],[c,[h,"Insignia"],[u,v]],[/\b((nxa|next)-?\w{0,9}) b/i],[c,[h,"NextBook"],[u,v]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[h,"Voice"],c,[u,f]],[/\b(lvtel\-)?(v1[12]) b/i],[[h,"LvTel"],c,[u,f]],[/\b(ph-1) /i],[c,[h,"Essential"],[u,f]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[c,[h,"Envizen"],[u,v]],[/\b(trio[-\w\. ]+) b/i],[c,[h,"MachSpeed"],[u,v]],[/\btu_(1491) b/i],[c,[h,"Rotor"],[u,v]],[/(shield[\w ]+) b/i],[c,[h,"Nvidia"],[u,v]],[/(sprint) (\w+)/i],[h,c,[u,f]],[/(kin\.[onetw]{3})/i],[[c,/\./g," "],[h,$],[u,f]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[c,[h,pe],[u,v]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[c,[h,pe],[u,f]],[/smart-tv.+(samsung)/i],[h,[u,g]],[/hbbtv.+maple;(\d+)/i],[[c,/^/,"SmartTV"],[h,de],[u,g]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[h,W],[u,g]],[/(apple) ?tv/i],[h,[c,R+" TV"],[u,g]],[/crkey/i],[[c,E+"cast"],[h,B],[u,g]],[/droid.+aft(\w+)( bui|\))/i],[c,[h,A],[u,g]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[c,[h,oe],[u,g]],[/(bravia[\w ]+)( bui|\))/i],[c,[h,le],[u,g]],[/(mitv-\w{5}) bui/i],[c,[h,Ie],[u,g]],[/Hbbtv.*(technisat) (.*);/i],[h,c,[u,g]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[h,m],[c,m],[u,g]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[u,g]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[h,c,[u,C]],[/droid.+; (shield) bui/i],[c,[h,"Nvidia"],[u,C]],[/(playstation [345portablevi]+)/i],[c,[h,le],[u,C]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[c,[h,$],[u,C]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[c,[h,de],[u,b]],[/((pebble))app/i],[h,c,[u,b]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[c,[h,R],[u,b]],[/droid.+; (glass) \d/i],[c,[h,B],[u,b]],[/droid.+; (wt63?0{2,3})\)/i],[c,[h,pe],[u,b]],[/droid.+; (glass) \d/i],[c,[h,B],[u,b]],[/(pico) (4|neo3(?: link|pro)?)/i],[h,c,[u,b]],[/; (quest( \d| pro)?)/i],[c,[h,De],[u,b]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[h,[u,x]],[/(aeobc)\b/i],[c,[h,A],[u,x]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[c,[u,f]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[c,[u,v]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[u,v]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[u,f]],[/(android[-\w\. ]{0,9});.+buil/i],[c,[h,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[p,[l,"EdgeHTML"]],[/(arkweb)\/([\w\.]+)/i],[l,p],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[p,[l,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[l,p],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[p,l]],os:[[/microsoft (windows) (vista|xp)/i],[l,p],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[l,[p,S,P]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[p,S,P],[l,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[p,/_/g,"."],[l,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[l,se],[p,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[p,l],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish|openharmony)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[l,p],[/\(bb(10);/i],[p,[l,_]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[p,[l,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[p,[l,K+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[p,[l,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[p,[l,"watchOS"]],[/crkey\/([\d\.]+)/i],[p,[l,E+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[l,Ze],p],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[l,p],[/(sunos) ?([\w\.\d]*)/i],[[l,"Solaris"],p],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[l,p]]},I=function(z,F){if(typeof z===a&&(F=z,z=i),!(this instanceof I))return new I(z,F).getResult();var D=typeof t!==o&&t.navigator?t.navigator:i,re=z||(D&&D.userAgent?D.userAgent:""),ae=D&&D.userAgentData?D.userAgentData:i,X=F?function(j,ve){var ke={};for(var Ce in j)ve[Ce]&&ve[Ce].length%2==0?ke[Ce]=ve[Ce].concat(j[Ce]):ke[Ce]=j[Ce];return ke}(M,F):M,be=D&&D.userAgent==re;return this.getBrowser=function(){var j={};return j[l]=i,j[p]=i,y.call(j,re,X.browser),j[d]=function(ve){return typeof ve===s?ve.replace(/[^\d\.]/g,"").split(".")[0]:i}(j[p]),be&&D&&D.brave&&typeof D.brave.isBrave==n&&(j[l]="Brave"),j},this.getCPU=function(){var j={};return j[w]=i,y.call(j,re,X.cpu),j},this.getDevice=function(){var j={};return j[h]=i,j[c]=i,j[u]=i,y.call(j,re,X.device),be&&!j[u]&&ae&&ae.mobile&&(j[u]=f),be&&j[c]=="Macintosh"&&D&&typeof D.standalone!==o&&D.maxTouchPoints&&D.maxTouchPoints>2&&(j[c]="iPad",j[u]=v),j},this.getEngine=function(){var j={};return j[l]=i,j[p]=i,y.call(j,re,X.engine),j},this.getOS=function(){var j={};return j[l]=i,j[p]=i,y.call(j,re,X.os),be&&!j[l]&&ae&&ae.platform&&ae.platform!="Unknown"&&(j[l]=ae.platform.replace(/chrome os/i,Ze).replace(/macos/i,se)),j},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return re},this.setUA=function(j){return re=typeof j===s&&j.length>500?m(j,500):j,this},this.setUA(re),this};I.VERSION="1.0.40",I.BROWSER=ge([l,p,d]),I.CPU=ge([w]),I.DEVICE=ge([c,h,u,C,f,g,v,b,x]),I.ENGINE=I.OS=ge([l,p]),e.exports&&(r=e.exports=I),r.UAParser=I;var L=typeof t!==o&&(t.jQuery||t.Zepto);if(L&&!L.ua){var N=new I;L.ua=N.getResult(),L.ua.get=function(){return N.getUA()},L.ua.set=function(z){N.setUA(z);var F=N.getResult();for(var D in F)L.ua[D]=F[D]}}})(typeof window=="object"?window:mt)});const Nt=new Go.UAParser().getResult(),ra={osName:Nt.os.name||"",osVersion:Nt.os.version||"",browserName:Nt.browser.name||"",browserVersion:Nt.browser.version||""},Uo=Nt.browser.name==="WeChat",ia=(e,r,t,i)=>{const n=r-e,o=i-t;if(n<=0||o<=0)return 0;const a=n/o;return a>1?100:100*a};class Wo{constructor(r,t){this.pc=r,this.emitterId=t,this.intervalTimer=null}startReportStats(){this.intervalTimer=setInterval(()=>{let r,t,i=Object.assign({},io);i.videoFrameDecodedList=[],i.videoTotalFreezesDuration=[],this.pc.getStats().then(n=>{r=n}).then(()=>this.calcFreezeing(r,i,500)).then(n=>this.calcFreezeing(n,i,500)).then(n=>this.calcFreezeing(n,i,500)).then(n=>this.calcFreezeing(n,i,500)).then(n=>{t=n;const o=this.calcStatReport(r,t,i);var a,s;a=o,s=this.emitterId,Dt("stats",a,s);const d=function(c,l){var u={};for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&l.indexOf(h)<0&&(u[h]=c[h]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function"){var p=0;for(h=Object.getOwnPropertySymbols(c);p<h.length;p++)l.indexOf(h[p])<0&&Object.prototype.propertyIsEnumerable.call(c,h[p])&&(u[h[p]]=c[h[p]])}return u}(o,["videoPacketLostRate","videoTotalFreezesDuration","videoFrameDecodedList","videoAvgPacketProcessingDelay","videoAvgJitterBufferTargetDelay","videoAvgJitterBufferDelay","videoAvgInterframeDelay","audioAvgInterframeDelay","audioAvgJitterBufferDelay","audioAvgJitterBufferTargetDelay","audioAvgPacketProcessingDelay"]);O.debug(`stats: ${at(d,this.emitterId)}`,this.emitterId)}).catch(n=>{O.warning(`pc.getStats error: ${n.toString()}`,this.emitterId)})},2e3)}stopReportStats(){this.intervalTimer&&clearInterval(this.intervalTimer)}calcFreezeing(r,t,i){return U(this,void 0,void 0,function*(){yield new Promise(o=>setTimeout(o,i));const n=yield this.pc.getStats();return n.forEach(o=>{if(o.isRemote!==!0&&o.type==="inbound-rtp"&&(o.kind==="video"||o.mediaType==="video"||o.id.toLocaleLowerCase().includes("video"))){const a=r.get(o.id);if(!a)return;t.videoFrameDecodedList.push(o.framesDecoded-a.framesDecoded);const s=o.totalFreezesDuration-a.totalFreezesDuration;t.videoTotalFreezesDuration.push(Z(s))}}),n})}getRtt(r){if(r)return r.roundTripTime?1e3*r.roundTripTime:r.googRtt?r.googRtt:r.mozRtt?r.mozRtt:void 0}calcStatReport(r,t,i){return t.forEach(n=>{if(n.isRemote!==!0&&(n.type==="candidate-pair"&&n.state==="succeeded"&&(t.forEach(o=>{o.type==="remote-candidate"&&o.id===n.remoteCandidateId&&(i.ip=o.ip,i.protocol=o.protocol)}),i.rtt=1e3*n.currentRoundTripTime),n.type==="codec"&&(/^audio\//.test(n.mimeType)?i.audioDecoderName=n.mimeType:/^video\//.test(n.mimeType)&&(i.videoDecoderName=n.mimeType)),n.type==="inbound-rtp")){if(n.kind==="audio"||n.mediaType==="audio"||n.id.toLocaleLowerCase().includes("audio")){const o=r.get(n.id);if(!o)return;const a=n.timestamp-o.timestamp,s=(n.jitterBufferEmittedCount-o.jitterBufferEmittedCount)/a,d=(n.jitterBufferDelay-o.jitterBufferDelay)/a,c=(n.jitterBufferTargetDelay-o.jitterBufferTargetDelay)/a,l=n.totalProcessingDelay?(n.totalProcessingDelay-o.totalProcessingDelay)/a:-1,u=ia(o.packetsLost,n.packetsLost,o.packetsReceived+o.packetsLost,n.packetsReceived+n.packetsLost);i.audioAvgJitterBufferDelay=s?1e3*d/s:-1,i.audioAvgJitterBufferTargetDelay=s?1e3*c/s:-1,i.audioAvgPacketProcessingDelay=l!==-1&&s?1e3*l/s:-1,i.audioPacketReceived=n.packetsReceived-o.packetsReceived,i.audioPacketLostRate=u,i.audioTotalSamplesReceived=n.totalSamplesReceived,i.audioPacketDiscarded=n.packetsDiscarded-o.packetsDiscarded,i.audioPacketLost=n.packetsLost-o.packetsLost,i.audioBytesReceived=n.bytesReceived-o.bytesReceived,i.audioEstimatedPlayoutTimestamp=n.estimatedPlayoutTimestamp,i.audioLastPacketReceivedTimestamp=n.lastPacketReceivedTimestamp,i.audioAvgInterframeDelay=-1,i.audioFps=-1,t.forEach(h=>{if(h.type==="codec"&&/^audio\//.test(h.mimeType)){const p=h.clockRate;if(h.sdpFmtpLine){const w=h.sdpFmtpLine.match(/minptime=(\d+)/),C=w?parseInt(w[1]):null;i.audioDecoderName=h.mimeType,C?(i.audioAvgInterframeDelay=1e3*n.totalSamplesDuration/(n.totalSamplesReceived/(20*p*.001)),i.audioFps=1e3/i.audioAvgInterframeDelay):h.mimeType&&/opus/.test(h.mimeType)&&(i.audioAvgInterframeDelay=1e3*n.totalSamplesDuration/(n.totalSamplesReceived/(p*20*.001)),i.audioFps=1e3/i.audioAvgInterframeDelay)}}}),i.audioBitrate=1e6*nn(8*(n.bytesReceived-o.bytesReceived)/1e3/a,2),i.lastAudioPacketReceivedTimestamp=n.lastPacketReceivedTimestamp,i.timestamp=n.timestamp}if(n.kind==="video"||n.mediaType==="video"||n.id.toLocaleLowerCase().includes("video")){const o=r.get(n.id);if(!o)return;const a=n.timestamp-o.timestamp,s=(n.jitterBufferEmittedCount-o.jitterBufferEmittedCount)/a,d=(n.jitterBufferDelay-o.jitterBufferDelay)/a,c=(n.jitterBufferTargetDelay-o.jitterBufferTargetDelay)/a,l=(n.totalProcessingDelay-o.totalProcessingDelay)/a,u=ia(o.packetsLost,n.packetsLost,o.packetsReceived+o.packetsLost,n.packetsReceived+n.packetsLost);if(i.videoAvgJitterBufferDelay=s?1e3*d/s:-1,i.videoAvgJitterBufferTargetDelay=s?1e3*c/s:-1,i.videoAvgPacketProcessingDelay=s?1e3*l/s:-1,i.videoDroppedFrames=1e3*(n.framesDropped-o.framesDropped)/a,i.videoPacketReceived=n.packetsReceived-o.packetsReceived,i.videoPacketLost=n.packetsLost-o.packetsLost,i.videoPacketLostRate=u,i.videoNackCount=n.nackCount-o.nackCount,i.videoFirCount=n.firCount-o.firCount,i.videoPliCount=n.pliCount-o.pliCount,i.videoFrameDecoded=1e3*(n.framesDecoded-o.framesDecoded)/a,i.videoFrameReceived=1e3*(n.framesReceived-o.framesReceived)/a,i.videoDecodeCostMs=1e3*(n.totalDecodeTime-o.totalDecodeTime)/i.videoFrameDecoded,i.videoKeyFramesDecoded=1e3*(n.keyFramesDecoded-o.keyFramesDecoded)/a,i.videoBytesReceived=n.bytesReceived-o.bytesReceived,i.videoFecPacketReceived=n.fecPacketsReceived-o.fecPacketsReceived,i.videoAvgInterframeDelay=n.framesReceived?1e3*n.totalInterFrameDelay/n.framesReceived:-1,i.videoEstimatedPlayoutTimestamp=n.estimatedPlayoutTimestamp,i.videoLastPacketReceivedTimestamp=n.lastPacketReceivedTimestamp,i.videoBitrate=1e6*nn(8*(n.bytesReceived-o.bytesReceived)/1e3/a,2),i.lastVideoPacketReceivedTimestamp=n.lastPacketReceivedTimestamp,i.timestamp=n.timestamp,i.constTime=n.timestamp-o.timestamp,n.frameWidth?(i.videoFrameWidth=n.frameWidth,i.videoFrameHeight=n.frameHeight):this.pc.getReceivers().forEach(h=>{h.track.kind==="video"&&(i.videoFrameWidth=h.track.getSettings().width||0,i.videoFrameHeight=h.track.getSettings().height||0)}),n.framesPerSecond)i.videoFps=n.framesPerSecond;else if(n.framesDecoded&&o.framesDecoded){const h=n.framesDecoded-o.framesDecoded,p=(n.timestamp-o.timestamp)/1e3;i.videoFps=Math.floor(h/p)}}}}),i}}function Zo(e,r,t){var i=r,n=function(d,c){var l=atob(d);return l}(e),o=n.indexOf(`
`,10)+1,a=n.substring(o)+("//# sourceMappingURL="+i),s=new Blob([a],{type:"application/javascript"});return URL.createObjectURL(s)}function Ho(e,r,t){var i;return function(n){return i=i||Zo(e,r),new Worker(i,n)}}var Xo=Ho("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7dmFyIG49ZnVuY3Rpb24obix0LGUscil7cmV0dXJuIG5ldyhlfHwoZT1Qcm9taXNlKSkoKGZ1bmN0aW9uKG8sYSl7ZnVuY3Rpb24gaShuKXt0cnl7YyhyLm5leHQobikpfWNhdGNoKG4pe2Eobil9fWZ1bmN0aW9uIHMobil7dHJ5e2Moci50aHJvdyhuKSl9Y2F0Y2gobil7YShuKX19ZnVuY3Rpb24gYyhuKXt2YXIgdDtuLmRvbmU/byhuLnZhbHVlKToodD1uLnZhbHVlLHQgaW5zdGFuY2VvZiBlP3Q6bmV3IGUoKGZ1bmN0aW9uKG4pe24odCl9KSkpLnRoZW4oaSxzKX1jKChyPXIuYXBwbHkobix0fHxbXSkpLm5leHQoKSl9KSl9O2xldCB0PURhdGUubm93KCk7YWRkRXZlbnRMaXN0ZW5lcigicnRjdHJhbnNmb3JtIiwoZT0+e2NvbnN0IHI9bmV3IFRyYW5zZm9ybVN0cmVhbSh7c3RhcnQoKXt9LGZsdXNoKCl7fSx0cmFuc2Zvcm0oZSxyKXtyZXR1cm4gbih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2UgaW5zdGFuY2VvZiBSVENFbmNvZGVkVmlkZW9GcmFtZSYmKERhdGUubm93KCktdD49MTAwJiZzZWxmLnBvc3RNZXNzYWdlKERhdGUubm93KCktdCksdD1EYXRlLm5vdygpKSxyLmVucXVldWUoZSl9KSl9fSk7ZS50cmFuc2Zvcm1lci5yZWFkYWJsZS5waXBlVGhyb3VnaChyKS5waXBlVG8oZS50cmFuc2Zvcm1lci53cml0YWJsZSl9KSl9KCk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXdvcmtlci5qcy5tYXAKCg==","data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid29ya2VyLmpzIiwic291cmNlcyI6W10sInNvdXJjZXNDb250ZW50IjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiJ9");class na{static isValid(r){try{return new URL(r),!0}catch{return!1}}constructor(r,t,i){this.url=r,this.emitterId=t,this.jitterBuffer=i,this.disposers=[],this.timer=null,this.controller=null,this.pc=this.initPc()}listen(r,t){this.pc.addEventListener(r,t),this.addDisposer(()=>this.pc.removeEventListener(r,t))}addDisposer(r){this.disposers.push(r)}dispose(){var r,t,i;this.disposers.forEach(n=>n()),this.disposers=[],(r=this.videoTrack)===null||r===void 0||r.stop(),(t=this.audioTrack)===null||t===void 0||t.stop(),this.timer&&clearTimeout(this.timer),(i=this.controller)===null||i===void 0||i.terminate(),this.pc.close()}processReceivedTrack(r){let t=new MediaStream,i=this;return this.listen("track",n=>U(this,void 0,void 0,function*(){if(n.track.kind==="video"&&!r||n.track.kind==="audio"){switch(n.track.kind){case"video":const o=new MediaStreamTrackProcessor({track:n.track}),a=new MediaStreamTrackGenerator({kind:"video"});let s=Date.now();const d=new TransformStream({transform(c,l){i.controller=l,Date.now()-s>=100&&cn(Date.now()-s,i.emitterId),s=Date.now(),l.enqueue(c)}});o.readable.pipeThrough(d).pipeTo(a.writable).catch(c=>{}),this.videoTrack=a.track,t.addTrack(a);break;case"audio":this.audioTrack=n.track,t.addTrack(n.track)}O.log(`media stream added ${n.track.kind} track, id: ${n.track.id}`,this.emitterId)}})),t}transformReceivedTrack(r){const t=this;let i=new MediaStream;return this.listen("track",n=>U(this,void 0,void 0,function*(){if(n.track.kind==="video"&&!r||n.track.kind==="audio"){switch(n.track.kind){case"video":const o=new Xo;o.onmessage=a=>{cn(a.data,t.emitterId)},this.videoTrack=n.track,n.receiver.transform=new RTCRtpScriptTransform(o,{name:"receiverTransform"});break;case"audio":this.audioTrack=n.track}i.addTrack(n.track),O.log(`media stream added ${n.track.kind} track, id: ${n.track.id}`,this.emitterId)}})),i}normalReceivedTrack(r){const t=new MediaStream;return this.listen("track",i=>{if(i.track.kind==="video"&&!r||i.track.kind==="audio"){switch(i.track.kind){case"video":this.videoTrack=i.track;break;case"audio":this.audioTrack=i.track}t.addTrack(i.track),O.log(`media stream added ${i.track.kind} track, id: ${i.track.id}`,this.emitterId)}}),t}connect(r){return U(this,void 0,void 0,function*(){this.logEvents();let t=new MediaStream;t="RTCRtpScriptTransform"in window?this.transformReceivedTrack(r):"MediaStreamTrackGenerator"in window?this.processReceivedTrack(r):this.normalReceivedTrack(r),yield Promise.all([this.waitPcConnected(),this.negotiate()]);const i=this.pc.getReceivers();for(let o of i)o.jitterBufferTarget!==void 0&&(o.jitterBufferTarget=this.jitterBuffer);const n=new Wo(this.pc,this.emitterId);return n.startReportStats(),this.addDisposer(()=>n.stopReportStats()),t})}logEvents(){this.listen("negotiationneeded",()=>{O.debug("pc.onnegotiationneeded",this.emitterId)}),this.listen("icecandidate",r=>{O.debug("pc.onicecandidate: "+at(r.candidate,this.emitterId),this.emitterId)}),this.listen("iceconnectionstatechange",()=>{O.debug("pc.oniceconnectionstatechange: "+this.pc.iceConnectionState,this.emitterId)}),this.listen("icegatheringstatechange",()=>{O.debug("pc.onicegatheringstatechange : "+this.pc.iceGatheringState,this.emitterId)}),this.listen("signalingstatechange",()=>{O.debug("pc.onsignalingstatechange: "+this.pc.signalingState,this.emitterId)}),this.listen("connectionstatechange",()=>{O.debug("pc.onconnectionstatechange: "+this.pc.connectionState,this.emitterId)}),this.listen("track",r=>{O.debug(`pc.ontrack: ${r.track.kind}, id: ${r.track.id}`,this.emitterId)})}addRRTR(r){const t=r.split(`\r
`);for(let i=0;i<t.length;i++){const n=/a=rtpmap:(\d+)\s+(H264|H265|VP8|VP9)/i;if(n.test(t[i])){const o=t[i].match(n),a=o?o[1]:null;t.splice(i+1,0,`a=rtcp-fb:${a} rrtr`)}}return t.join(`\r
`)}waitPcConnected(){const r="connectionState"in this.pc,t=r?"connectionstatechange":"iceconnectionstatechange",i=r?"peer connection":"peer connection ice";return new Promise((n,o)=>{this.listen(t,()=>{this.timer&&clearTimeout(this.timer);let a=r?this.pc.connectionState:this.pc.iceConnectionState;a==="connected"?(O.log(`${i} is connected.`,this.emitterId),n()):a==="disconnected"?(O.warning(`${i} reconnecting`,this.emitterId),this.timer=setTimeout(()=>{(r?this.pc.connectionState:this.pc.iceConnectionState)==="disconnected"&&(O.warning(`${i} reconnect timeout`,this.emitterId),ln(`${i} reconnect timeout`,this.emitterId),o(new G(`${i} reconnect timeout`)))},5e3)):a==="failed"?(O.warning(`${i} failed`,this.emitterId),ln(`${i} state error: `+a,this.emitterId),o(new G(`${i} state error: `+a))):a==="closed"&&(O.error(`${i} closed.`,this.emitterId),o(new G(`${i} closed.`)))})})}}class vr extends na{constructor(){super(...arguments),this.protocol="WHEP",this.sessionId=void 0,this.ips=[]}static isValid(r){const t=new URL(r);t.search="",t.hash="";const i=t.toString();return/(whep\/)$/.test(i)||/(.whep)$/.test(i)}getSessionId(){return this.sessionId}getIps(){return this.ips}initPc(){const r=new RTCPeerConnection({bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",iceTransportPolicy:"all"});return r.addTransceiver("video",{direction:"recvonly"}),r.addTransceiver("audio",{direction:"recvonly"}),r}negotiate(){return U(this,void 0,void 0,function*(){const r=yield this.pc.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}),{type:t,sdp:i}=r,n=i?{type:t,sdp:this.addRRTR(i)}:r;O.debug(`whep client offer sdp:
${r.sdp}`,this.emitterId);try{yield this.pc.setLocalDescription(n)}catch(l){const u=`set local sdp error: 
`+n.sdp+`
`+at(l,this.emitterId);throw hr(u,this.emitterId),new G(u)}O.log("peer connection set local sdp ok.",this.emitterId);const{answer:o,location:a,sessionId:s,ips:d}=yield function(l,u,h){return U(this,void 0,void 0,function*(){const p={method:"POST",mode:"cors",credentials:"omit",headers:{"Content-Type":"application/sdp"},body:u};let w=null;"AbortController"in window&&(w=new AbortController,p.signal=w.signal);const f=yield Promise.race([fetch(l,p),lr(Mr,"fetchSdpAnswer")]).catch(b=>{let x;throw b instanceof Wr?(w==null||w.abort(),x="fetchSdpAnswer timeout: 8s"):x=`fetchSdpAnswer error: ${b.message}`,Xr(x,h),new G(x)});if(f.status===201){const b=yield f.text(),x=f.headers.get("Location");return{answer:b,location:x,sessionId:new URLSearchParams(x).get("whep-session"),ips:an(b)}}const v=yield f.text();if(f.status===500){const b=v||"Stream not exist or not online";throw dn(b,h),new G(b)}const g=`Unexpected response code: ${f.status}, msg: ${v}`;throw ur(g,h),new G(g)})}(this.url,n.sdp,this.emitterId);this.sessionId=s??void 0,this.ips=d,O.debug(`whep client answer sdp:
${o}`,this.emitterId),O.debug(`whep client answer location:
${a}`,this.emitterId);try{yield this.pc.setRemoteDescription(new RTCSessionDescription({type:"answer",sdp:o}))}catch(l){const u=`set remote sdp error: 
`+o+`
`+at(l,this.emitterId);throw hr(u,this.emitterId),new G(u)}O.log("peer connection set remote sdp ok.",this.emitterId);const c=a||this.url;this.addDisposer(()=>{(function(l,u){U(this,void 0,void 0,function*(){try{const h=yield fetch(l,{method:"DELETE",mode:"cors",credentials:"omit"});h.status>=200&&h.status<300?O.log("Disconnect stream succeed, endpoint: "+l,u):O.warning("Disconnect stream failed with status code "+h.status,u)}catch(h){h instanceof Error&&O.warning("Disconnect stream failed: "+h.message,u)}})})(c,this.emitterId)})})}}const aa=/[a-zA-Z0-9]{3,7}:\/\/([^/]+)\//;class wr extends na{constructor(){super(...arguments),this.protocol="PiliSRT",this.sessionId=void 0,this.ips=[]}static isValid(r){return aa.test(r)}initPc(){return new RTCPeerConnection}getSessionId(){return this.sessionId}getIps(){return this.ips}negotiate(){return U(this,void 0,void 0,function*(){let r;try{r=function(d){const c=aa.exec(d);if(!c)throw new Error("streamUrl invalid");const l=c[1];let u=location.protocol;return u!=="https:"&&u!=="http:"&&(u="http:"),`${u}//${l}${ao}`}(this.url)}catch{throw O.error(`stream url is invalid: ${this.url}`,this.emitterId),new G("stream url is invalid")}let t=yield this.pc.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});const{type:i,sdp:n}=t,o=n?{type:i,sdp:this.addRRTR(n)}:t;O.debug(`local offer: 
${t.sdp}`,this.emitterId);try{yield this.pc.setLocalDescription(o)}catch(d){const c=`set local sdp error: 
`+o.sdp+`
`+at(d,this.emitterId);throw hr(c,this.emitterId),new G(c)}O.log("peer connection set local sdp ok.",this.emitterId);const a=yield function(d,c,l,u){return U(this,void 0,void 0,function*(){const h={streamurl:c,clientip:JSON.stringify(Object.assign(Object.assign({},ra),{SDK_VERSION:xi})),sdp:l},p={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)};let w=null;"AbortController"in window&&(w=new AbortController,p.signal=w.signal);const f=yield Promise.race([fetch(d,p),lr(Mr,"pullStreamRequest")]).catch(g=>{let b;throw g instanceof Wr?(w==null||w.abort(),b="pullStreamRequest timeout: 8s"):b=`pullStreamRequest error: ${g.message}`,Xr(b,u),new G(b)});if(f.status!==200){const g=`pullStreamRequest, statusCode error: statusCode: ${f.status}, statusText: ${f.statusText}`;throw Xr(g,u),new G(g)}let v;try{v=yield f.json()}catch{const b=`parse response as json error: ${f.text()}`;throw ur(b,u),new G(b)}if([400,500].includes(v.code))throw ur(v.msg,u),new G(v.msg);if(v.code===403)throw((g,b)=>{ot({code:20002,errorType:"authFailed",msg:g},b),O.fatal(g,b)})(v.msg,u),new G(v.msg);if(v.code===404)throw dn(v.msg,u),new G(v.msg);if(![0,200].includes(v.code)){const g=`unexpected code: ${v.code}, msg: ${v.msg}`;throw ur(g,u),new G(g)}return v})}(r,this.url,o.sdp,this.emitterId);O.debug(`remote answer, 
${a.sdp}`,this.emitterId);const s=new RTCSessionDescription({type:"answer",sdp:a.sdp});try{yield this.pc.setRemoteDescription(s)}catch(d){const c=`set remote sdp error: 
`+s.sdp+`
`+at(d,this.emitterId);throw hr(c,this.emitterId),new G(c)}O.log("peer connection set remote sdp ok.",this.emitterId),this.sessionId=a.sessionid,this.ips=an(a.sdp)})}mungSDP(r){return r}}let ii=0;class Yo{constructor(r=""){this.playerEmitterId=r,this.connectTask=null,this.JitterBuffer=null}getSessionId(){return this.connectTask instanceof wr||this.connectTask instanceof vr?this.connectTask.getSessionId():void 0}getIps(){return this.connectTask instanceof wr||this.connectTask instanceof vr?this.connectTask.getIps():void 0}recycleClosedPC(){if(ii<100)return;ii=0;let r=document.createElement("img");r.src=window.URL.createObjectURL(new Blob([new ArrayBuffer(1e8)])),r.onerror=function(){window.URL.revokeObjectURL(this.src),r=null}}release(){var r;(r=this.connectTask)===null||r===void 0||r.dispose(),this.connectTask=null,this.recycleClosedPC()}setJitterBuffer(r){this.JitterBuffer=r}pullStream(r,t){if(this.release(),this.connectTask=function(i,n,o){return vr.isValid(i)?new vr(i,n,o):wr.isValid(i)?new wr(i,n,o):null}(r,this.playerEmitterId,this.JitterBuffer),!this.connectTask)throw O.error(`stream url is invalid: ${r}`,this.playerEmitterId),new G("stream url invalid");return ii++,this.connectTask.connect(t)}}var xe,Ye;(function(e){e.Config="Config",e.PlayerStateChanged="PlayerStateChanged",e.Error="Error",e.VideoStatistics="VideoStatistics",e.AudioStatistics="AudioStatistics"})(xe||(xe={})),function(e){e.idle="idle",e.init="init",e.ready="ready",e.playing="playing",e.stop="stop",e.error="error"}(Ye||(Ye={}));var Jo=ft(function(e){var r,t;r=mt,t=function(){Array.isArray===void 0&&(Array.isArray=function(m){return Object.prototype.toString.call(m)==="[object Array]"});var i=function(m,y){m=[m[0]>>>16,65535&m[0],m[1]>>>16,65535&m[1]],y=[y[0]>>>16,65535&y[0],y[1]>>>16,65535&y[1]];var S=[0,0,0,0];return S[3]+=m[3]+y[3],S[2]+=S[3]>>>16,S[3]&=65535,S[2]+=m[2]+y[2],S[1]+=S[2]>>>16,S[2]&=65535,S[1]+=m[1]+y[1],S[0]+=S[1]>>>16,S[1]&=65535,S[0]+=m[0]+y[0],S[0]&=65535,[S[0]<<16|S[1],S[2]<<16|S[3]]},n=function(m,y){m=[m[0]>>>16,65535&m[0],m[1]>>>16,65535&m[1]],y=[y[0]>>>16,65535&y[0],y[1]>>>16,65535&y[1]];var S=[0,0,0,0];return S[3]+=m[3]*y[3],S[2]+=S[3]>>>16,S[3]&=65535,S[2]+=m[2]*y[3],S[1]+=S[2]>>>16,S[2]&=65535,S[2]+=m[3]*y[2],S[1]+=S[2]>>>16,S[2]&=65535,S[1]+=m[1]*y[3],S[0]+=S[1]>>>16,S[1]&=65535,S[1]+=m[2]*y[2],S[0]+=S[1]>>>16,S[1]&=65535,S[1]+=m[3]*y[1],S[0]+=S[1]>>>16,S[1]&=65535,S[0]+=m[0]*y[3]+m[1]*y[2]+m[2]*y[1]+m[3]*y[0],S[0]&=65535,[S[0]<<16|S[1],S[2]<<16|S[3]]},o=function(m,y){return(y%=64)==32?[m[1],m[0]]:y<32?[m[0]<<y|m[1]>>>32-y,m[1]<<y|m[0]>>>32-y]:(y-=32,[m[1]<<y|m[0]>>>32-y,m[0]<<y|m[1]>>>32-y])},a=function(m,y){return(y%=64)==0?m:y<32?[m[0]<<y|m[1]>>>32-y,m[1]<<y]:[m[1]<<y-32,0]},s=function(m,y){return[m[0]^y[0],m[1]^y[1]]},d=function(m){return m=s(m,[0,m[0]>>>1]),m=n(m,[4283543511,3981806797]),m=s(m,[0,m[0]>>>1]),m=n(m,[3301882366,444984403]),m=s(m,[0,m[0]>>>1])},c=function(m,y){y=y||0;for(var S=(m=m||"").length%16,P=m.length-S,M=[0,y],I=[0,y],L=[0,0],N=[0,0],z=[2277735313,289559509],F=[1291169091,658871167],D=0;D<P;D+=16)L=[255&m.charCodeAt(D+4)|(255&m.charCodeAt(D+5))<<8|(255&m.charCodeAt(D+6))<<16|(255&m.charCodeAt(D+7))<<24,255&m.charCodeAt(D)|(255&m.charCodeAt(D+1))<<8|(255&m.charCodeAt(D+2))<<16|(255&m.charCodeAt(D+3))<<24],N=[255&m.charCodeAt(D+12)|(255&m.charCodeAt(D+13))<<8|(255&m.charCodeAt(D+14))<<16|(255&m.charCodeAt(D+15))<<24,255&m.charCodeAt(D+8)|(255&m.charCodeAt(D+9))<<8|(255&m.charCodeAt(D+10))<<16|(255&m.charCodeAt(D+11))<<24],L=n(L,z),L=o(L,31),L=n(L,F),M=s(M,L),M=o(M,27),M=i(M,I),M=i(n(M,[0,5]),[0,1390208809]),N=n(N,F),N=o(N,33),N=n(N,z),I=s(I,N),I=o(I,31),I=i(I,M),I=i(n(I,[0,5]),[0,944331445]);switch(L=[0,0],N=[0,0],S){case 15:N=s(N,a([0,m.charCodeAt(D+14)],48));case 14:N=s(N,a([0,m.charCodeAt(D+13)],40));case 13:N=s(N,a([0,m.charCodeAt(D+12)],32));case 12:N=s(N,a([0,m.charCodeAt(D+11)],24));case 11:N=s(N,a([0,m.charCodeAt(D+10)],16));case 10:N=s(N,a([0,m.charCodeAt(D+9)],8));case 9:N=s(N,[0,m.charCodeAt(D+8)]),N=n(N,F),N=o(N,33),N=n(N,z),I=s(I,N);case 8:L=s(L,a([0,m.charCodeAt(D+7)],56));case 7:L=s(L,a([0,m.charCodeAt(D+6)],48));case 6:L=s(L,a([0,m.charCodeAt(D+5)],40));case 5:L=s(L,a([0,m.charCodeAt(D+4)],32));case 4:L=s(L,a([0,m.charCodeAt(D+3)],24));case 3:L=s(L,a([0,m.charCodeAt(D+2)],16));case 2:L=s(L,a([0,m.charCodeAt(D+1)],8));case 1:L=s(L,[0,m.charCodeAt(D)]),L=n(L,z),L=o(L,31),L=n(L,F),M=s(M,L)}return M=s(M,[0,m.length]),I=s(I,[0,m.length]),M=i(M,I),I=i(I,M),M=d(M),I=d(I),M=i(M,I),I=i(I,M),("00000000"+(M[0]>>>0).toString(16)).slice(-8)+("00000000"+(M[1]>>>0).toString(16)).slice(-8)+("00000000"+(I[0]>>>0).toString(16)).slice(-8)+("00000000"+(I[1]>>>0).toString(16)).slice(-8)},l={preprocessor:null,audio:{timeout:1e3,excludeIOS11:!0},fonts:{swfContainerId:"fingerprintjs2",swfPath:"flash/compiled/FontList.swf",userDefinedFonts:[],extendedJsFonts:!1},screen:{detectScreenOrientation:!0},plugins:{sortPluginsFor:[/palemoon/i],excludeIE:!1},extraComponents:[],excludes:{enumerateDevices:!0,pixelRatio:!0,doNotTrack:!0,fontsFlash:!0,adBlock:!0},NOT_AVAILABLE:"not available",ERROR:"error",EXCLUDED:"excluded"},u=function(m,y){if(Array.prototype.forEach&&m.forEach===Array.prototype.forEach)m.forEach(y);else if(m.length===+m.length)for(var S=0,P=m.length;S<P;S++)y(m[S],S,m);else for(var M in m)m.hasOwnProperty(M)&&y(m[M],M,m)},h=function(m,y){var S=[];return m==null?S:Array.prototype.map&&m.map===Array.prototype.map?m.map(y):(u(m,function(P,M,I){S.push(y(P,M,I))}),S)},p=function(){return navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices},w=function(m){var y=[window.screen.width,window.screen.height];return m.screen.detectScreenOrientation&&y.sort().reverse(),y},C=function(m){if(window.screen.availWidth&&window.screen.availHeight){var y=[window.screen.availHeight,window.screen.availWidth];return m.screen.detectScreenOrientation&&y.sort().reverse(),y}return m.NOT_AVAILABLE},f=function(m){if(navigator.plugins==null)return m.NOT_AVAILABLE;for(var y=[],S=0,P=navigator.plugins.length;S<P;S++)navigator.plugins[S]&&y.push(navigator.plugins[S]);return g(m)&&(y=y.sort(function(M,I){return M.name>I.name?1:M.name<I.name?-1:0})),h(y,function(M){var I=h(M,function(L){return[L.type,L.suffixes]});return[M.name,M.description,I]})},v=function(m){var y=[];return Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(window,"ActiveXObject")||"ActiveXObject"in window?y=h(["AcroPDF.PDF","Adodb.Stream","AgControl.AgControl","DevalVRXCtrl.DevalVRXCtrl.1","MacromediaFlashPaper.MacromediaFlashPaper","Msxml2.DOMDocument","Msxml2.XMLHTTP","PDF.PdfCtrl","QuickTime.QuickTime","QuickTimeCheckObject.QuickTimeCheck.1","RealPlayer","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","Scripting.Dictionary","SWCtl.SWCtl","Shell.UIHelper","ShockwaveFlash.ShockwaveFlash","Skype.Detection","TDCCtl.TDCCtl","WMPlayer.OCX","rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1"],function(S){try{return new window.ActiveXObject(S),S}catch{return m.ERROR}}):y.push(m.NOT_AVAILABLE),navigator.plugins&&(y=y.concat(f(m))),y},g=function(m){for(var y=!1,S=0,P=m.plugins.sortPluginsFor.length;S<P;S++){var M=m.plugins.sortPluginsFor[S];if(navigator.userAgent.match(M)){y=!0;break}}return y},b=function(m){try{return!!window.sessionStorage}catch{return m.ERROR}},x=function(m){try{return!!window.localStorage}catch{return m.ERROR}},A=function(m){if(pe())return m.EXCLUDED;try{return!!window.indexedDB}catch{return m.ERROR}},R=function(m){return navigator.hardwareConcurrency?navigator.hardwareConcurrency:m.NOT_AVAILABLE},k=function(m){return navigator.cpuClass||m.NOT_AVAILABLE},_=function(m){return navigator.platform?navigator.platform:m.NOT_AVAILABLE},T=function(m){return navigator.doNotTrack?navigator.doNotTrack:navigator.msDoNotTrack?navigator.msDoNotTrack:window.doNotTrack?window.doNotTrack:m.NOT_AVAILABLE},E=function(){var m,y=0;navigator.maxTouchPoints!==void 0?y=navigator.maxTouchPoints:navigator.msMaxTouchPoints!==void 0&&(y=navigator.msMaxTouchPoints);try{document.createEvent("TouchEvent"),m=!0}catch{m=!1}return[y,m,"ontouchstart"in window]},K=function(m){var y=[],S=document.createElement("canvas");S.width=2e3,S.height=200,S.style.display="inline";var P=S.getContext("2d");return P.rect(0,0,10,10),P.rect(2,2,6,6),y.push("canvas winding:"+(P.isPointInPath(5,5,"evenodd")===!1?"yes":"no")),P.textBaseline="alphabetic",P.fillStyle="#f60",P.fillRect(125,1,62,20),P.fillStyle="#069",m.dontUseFakeFontInCanvas?P.font="11pt Arial":P.font="11pt no-real-font-123",P.fillText("Cwm fjordbank glyphs vext quiz, ðŸ˜ƒ",2,15),P.fillStyle="rgba(102, 204, 0, 0.2)",P.font="18pt Arial",P.fillText("Cwm fjordbank glyphs vext quiz, ðŸ˜ƒ",4,45),P.globalCompositeOperation="multiply",P.fillStyle="rgb(255,0,255)",P.beginPath(),P.arc(50,50,50,0,2*Math.PI,!0),P.closePath(),P.fill(),P.fillStyle="rgb(0,255,255)",P.beginPath(),P.arc(100,50,50,0,2*Math.PI,!0),P.closePath(),P.fill(),P.fillStyle="rgb(255,255,0)",P.beginPath(),P.arc(75,100,50,0,2*Math.PI,!0),P.closePath(),P.fill(),P.fillStyle="rgb(255,0,255)",P.arc(75,75,75,0,2*Math.PI,!0),P.arc(75,75,25,0,2*Math.PI,!0),P.fill("evenodd"),S.toDataURL&&y.push("canvas fp:"+S.toDataURL()),y},B=function(){var m,y=function(F){return m.clearColor(0,0,0,1),m.enable(m.DEPTH_TEST),m.depthFunc(m.LEQUAL),m.clear(m.COLOR_BUFFER_BIT|m.DEPTH_BUFFER_BIT),"["+F[0]+", "+F[1]+"]"};if(!(m=je()))return null;var S=[],P=m.createBuffer();m.bindBuffer(m.ARRAY_BUFFER,P);var M=new Float32Array([-.2,-.9,0,.4,-.26,0,0,.732134444,0]);m.bufferData(m.ARRAY_BUFFER,M,m.STATIC_DRAW),P.itemSize=3,P.numItems=3;var I=m.createProgram(),L=m.createShader(m.VERTEX_SHADER);m.shaderSource(L,"attribute vec2 attrVertex;varying vec2 varyinTexCoordinate;uniform vec2 uniformOffset;void main(){varyinTexCoordinate=attrVertex+uniformOffset;gl_Position=vec4(attrVertex,0,1);}"),m.compileShader(L);var N=m.createShader(m.FRAGMENT_SHADER);m.shaderSource(N,"precision mediump float;varying vec2 varyinTexCoordinate;void main() {gl_FragColor=vec4(varyinTexCoordinate,0,1);}"),m.compileShader(N),m.attachShader(I,L),m.attachShader(I,N),m.linkProgram(I),m.useProgram(I),I.vertexPosAttrib=m.getAttribLocation(I,"attrVertex"),I.offsetUniform=m.getUniformLocation(I,"uniformOffset"),m.enableVertexAttribArray(I.vertexPosArray),m.vertexAttribPointer(I.vertexPosAttrib,P.itemSize,m.FLOAT,!1,0,0),m.uniform2f(I.offsetUniform,1,1),m.drawArrays(m.TRIANGLE_STRIP,0,P.numItems);try{S.push(m.canvas.toDataURL())}catch{}S.push("extensions:"+(m.getSupportedExtensions()||[]).join(";")),S.push("webgl aliased line width range:"+y(m.getParameter(m.ALIASED_LINE_WIDTH_RANGE))),S.push("webgl aliased point size range:"+y(m.getParameter(m.ALIASED_POINT_SIZE_RANGE))),S.push("webgl alpha bits:"+m.getParameter(m.ALPHA_BITS)),S.push("webgl antialiasing:"+(m.getContextAttributes().antialias?"yes":"no")),S.push("webgl blue bits:"+m.getParameter(m.BLUE_BITS)),S.push("webgl depth bits:"+m.getParameter(m.DEPTH_BITS)),S.push("webgl green bits:"+m.getParameter(m.GREEN_BITS)),S.push("webgl max anisotropy:"+function(F){var D=F.getExtension("EXT_texture_filter_anisotropic")||F.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||F.getExtension("MOZ_EXT_texture_filter_anisotropic");if(D){var re=F.getParameter(D.MAX_TEXTURE_MAX_ANISOTROPY_EXT);return re===0&&(re=2),re}return null}(m)),S.push("webgl max combined texture image units:"+m.getParameter(m.MAX_COMBINED_TEXTURE_IMAGE_UNITS)),S.push("webgl max cube map texture size:"+m.getParameter(m.MAX_CUBE_MAP_TEXTURE_SIZE)),S.push("webgl max fragment uniform vectors:"+m.getParameter(m.MAX_FRAGMENT_UNIFORM_VECTORS)),S.push("webgl max render buffer size:"+m.getParameter(m.MAX_RENDERBUFFER_SIZE)),S.push("webgl max texture image units:"+m.getParameter(m.MAX_TEXTURE_IMAGE_UNITS)),S.push("webgl max texture size:"+m.getParameter(m.MAX_TEXTURE_SIZE)),S.push("webgl max varying vectors:"+m.getParameter(m.MAX_VARYING_VECTORS)),S.push("webgl max vertex attribs:"+m.getParameter(m.MAX_VERTEX_ATTRIBS)),S.push("webgl max vertex texture image units:"+m.getParameter(m.MAX_VERTEX_TEXTURE_IMAGE_UNITS)),S.push("webgl max vertex uniform vectors:"+m.getParameter(m.MAX_VERTEX_UNIFORM_VECTORS)),S.push("webgl max viewport dims:"+y(m.getParameter(m.MAX_VIEWPORT_DIMS))),S.push("webgl red bits:"+m.getParameter(m.RED_BITS)),S.push("webgl renderer:"+m.getParameter(m.RENDERER)),S.push("webgl shading language version:"+m.getParameter(m.SHADING_LANGUAGE_VERSION)),S.push("webgl stencil bits:"+m.getParameter(m.STENCIL_BITS)),S.push("webgl vendor:"+m.getParameter(m.VENDOR)),S.push("webgl version:"+m.getParameter(m.VERSION));try{var z=m.getExtension("WEBGL_debug_renderer_info");z&&(S.push("webgl unmasked vendor:"+m.getParameter(z.UNMASKED_VENDOR_WEBGL)),S.push("webgl unmasked renderer:"+m.getParameter(z.UNMASKED_RENDERER_WEBGL)))}catch{}return m.getShaderPrecisionFormat?(u(["FLOAT","INT"],function(F){u(["VERTEX","FRAGMENT"],function(D){u(["HIGH","MEDIUM","LOW"],function(re){u(["precision","rangeMin","rangeMax"],function(ae){var X=m.getShaderPrecisionFormat(m[D+"_SHADER"],m[re+"_"+F])[ae];ae!=="precision"&&(ae="precision "+ae);var be=["webgl ",D.toLowerCase()," shader ",re.toLowerCase()," ",F.toLowerCase()," ",ae,":",X].join("");S.push(be)})})})}),ge(m),S):(ge(m),S)},H=function(){try{var m=je(),y=m.getExtension("WEBGL_debug_renderer_info"),S=m.getParameter(y.UNMASKED_VENDOR_WEBGL)+"~"+m.getParameter(y.UNMASKED_RENDERER_WEBGL);return ge(m),S}catch{return null}},W=function(){var m=document.createElement("div");m.innerHTML="&nbsp;",m.className="adsbox";var y=!1;try{document.body.appendChild(m),y=document.getElementsByClassName("adsbox")[0].offsetHeight===0,document.body.removeChild(m)}catch{y=!1}return y},$=function(){if(navigator.languages!==void 0)try{if(navigator.languages[0].substr(0,2)!==navigator.language.substr(0,2))return!0}catch{return!0}return!1},J=function(){return window.screen.width<window.screen.availWidth||window.screen.height<window.screen.availHeight},q=function(){var m,y=navigator.userAgent.toLowerCase(),S=navigator.oscpu,P=navigator.platform.toLowerCase();return m=y.indexOf("windows phone")>=0?"Windows Phone":y.indexOf("windows")>=0||y.indexOf("win16")>=0||y.indexOf("win32")>=0||y.indexOf("win64")>=0||y.indexOf("win95")>=0||y.indexOf("win98")>=0||y.indexOf("winnt")>=0||y.indexOf("wow64")>=0?"Windows":y.indexOf("android")>=0?"Android":y.indexOf("linux")>=0||y.indexOf("cros")>=0||y.indexOf("x11")>=0?"Linux":y.indexOf("iphone")>=0||y.indexOf("ipad")>=0||y.indexOf("ipod")>=0||y.indexOf("crios")>=0||y.indexOf("fxios")>=0?"iOS":y.indexOf("macintosh")>=0||y.indexOf("mac_powerpc)")>=0?"Mac":"Other",("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)&&m!=="Windows"&&m!=="Windows Phone"&&m!=="Android"&&m!=="iOS"&&m!=="Other"&&y.indexOf("cros")===-1||S!==void 0&&((S=S.toLowerCase()).indexOf("win")>=0&&m!=="Windows"&&m!=="Windows Phone"||S.indexOf("linux")>=0&&m!=="Linux"&&m!=="Android"||S.indexOf("mac")>=0&&m!=="Mac"&&m!=="iOS"||(S.indexOf("win")===-1&&S.indexOf("linux")===-1&&S.indexOf("mac")===-1)!=(m==="Other"))?!0:P.indexOf("win")>=0&&m!=="Windows"&&m!=="Windows Phone"||(P.indexOf("linux")>=0||P.indexOf("android")>=0||P.indexOf("pike")>=0)&&m!=="Linux"&&m!=="Android"||(P.indexOf("mac")>=0||P.indexOf("ipad")>=0||P.indexOf("ipod")>=0||P.indexOf("iphone")>=0)&&m!=="Mac"&&m!=="iOS"||!(P.indexOf("arm")>=0&&m==="Windows Phone")&&!(P.indexOf("pike")>=0&&y.indexOf("opera mini")>=0)&&((P.indexOf("win")<0&&P.indexOf("linux")<0&&P.indexOf("mac")<0&&P.indexOf("iphone")<0&&P.indexOf("ipad")<0&&P.indexOf("ipod")<0)!=(m==="Other")||navigator.plugins===void 0&&m!=="Windows"&&m!=="Windows Phone")},de=function(){var m,y=navigator.userAgent.toLowerCase(),S=navigator.productSub;if(y.indexOf("edge/")>=0||y.indexOf("iemobile/")>=0||y.indexOf("opera mini")>=0)return!1;if(((m=y.indexOf("firefox/")>=0?"Firefox":y.indexOf("opera/")>=0||y.indexOf(" opr/")>=0?"Opera":y.indexOf("chrome/")>=0?"Chrome":y.indexOf("safari/")>=0?y.indexOf("android 1.")>=0||y.indexOf("android 2.")>=0||y.indexOf("android 3.")>=0||y.indexOf("android 4.")>=0?"AOSP":"Safari":y.indexOf("trident/")>=0?"Internet Explorer":"Other")=="Chrome"||m==="Safari"||m==="Opera")&&S!=="20030107")return!0;var P,M=eval.toString().length;if(M===37&&m!=="Safari"&&m!=="Firefox"&&m!=="Other"||M===39&&m!=="Internet Explorer"&&m!=="Other"||M===33&&m!=="Chrome"&&m!=="AOSP"&&m!=="Opera"&&m!=="Other")return!0;try{throw"a"}catch(I){try{I.toSource(),P=!0}catch{P=!1}}return P&&m!=="Firefox"&&m!=="Other"},oe=function(){var m=document.createElement("canvas");return!(!m.getContext||!m.getContext("2d"))},le=function(){if(!oe())return!1;var m=je(),y=!!window.WebGLRenderingContext&&!!m;return ge(m),y},Ie=function(){return navigator.appName==="Microsoft Internet Explorer"||!(navigator.appName!=="Netscape"||!/Trident/.test(navigator.userAgent))},pe=function(){return("msWriteProfilerMark"in window)+("msLaunchUri"in navigator)+("msSaveBlob"in navigator)>=2},De=function(){return window.swfobject!==void 0},Ze=function(){return window.swfobject.hasFlashPlayerVersion("9.0.0")},se=function(m,y){var S="___fp_swf_loaded";window[S]=function(I){m(I)};var P=y.fonts.swfContainerId;(function(I){var L=document.createElement("div");L.setAttribute("id",I.fonts.swfContainerId),document.body.appendChild(L)})();var M={onReady:S};window.swfobject.embedSWF(y.fonts.swfPath,P,"1","1","9.0.0",!1,M,{allowScriptAccess:"always",menu:"false"},{})},je=function(){var m=document.createElement("canvas"),y=null;try{y=m.getContext("webgl")||m.getContext("experimental-webgl")}catch{}return y||(y=null),y},ge=function(m){var y=m.getExtension("WEBGL_lose_context");y!=null&&y.loseContext()},qe=[{key:"userAgent",getData:function(m){m(navigator.userAgent)}},{key:"webdriver",getData:function(m,y){m(navigator.webdriver==null?y.NOT_AVAILABLE:navigator.webdriver)}},{key:"language",getData:function(m,y){m(navigator.language||navigator.userLanguage||navigator.browserLanguage||navigator.systemLanguage||y.NOT_AVAILABLE)}},{key:"colorDepth",getData:function(m,y){m(window.screen.colorDepth||y.NOT_AVAILABLE)}},{key:"deviceMemory",getData:function(m,y){m(navigator.deviceMemory||y.NOT_AVAILABLE)}},{key:"pixelRatio",getData:function(m,y){m(window.devicePixelRatio||y.NOT_AVAILABLE)}},{key:"hardwareConcurrency",getData:function(m,y){m(R(y))}},{key:"screenResolution",getData:function(m,y){m(w(y))}},{key:"availableScreenResolution",getData:function(m,y){m(C(y))}},{key:"timezoneOffset",getData:function(m){m(new Date().getTimezoneOffset())}},{key:"timezone",getData:function(m,y){window.Intl&&window.Intl.DateTimeFormat?m(new window.Intl.DateTimeFormat().resolvedOptions().timeZone||y.NOT_AVAILABLE):m(y.NOT_AVAILABLE)}},{key:"sessionStorage",getData:function(m,y){m(b(y))}},{key:"localStorage",getData:function(m,y){m(x(y))}},{key:"indexedDb",getData:function(m,y){m(A(y))}},{key:"addBehavior",getData:function(m){m(!!window.HTMLElement.prototype.addBehavior)}},{key:"openDatabase",getData:function(m){m(!!window.openDatabase)}},{key:"cpuClass",getData:function(m,y){m(k(y))}},{key:"platform",getData:function(m,y){m(_(y))}},{key:"doNotTrack",getData:function(m,y){m(T(y))}},{key:"plugins",getData:function(m,y){Ie()?y.plugins.excludeIE?m(y.EXCLUDED):m(v(y)):m(f(y))}},{key:"canvas",getData:function(m,y){oe()?m(K(y)):m(y.NOT_AVAILABLE)}},{key:"webgl",getData:function(m,y){le()?m(B()):m(y.NOT_AVAILABLE)}},{key:"webglVendorAndRenderer",getData:function(m){le()?m(H()):m()}},{key:"adBlock",getData:function(m){m(W())}},{key:"hasLiedLanguages",getData:function(m){m($())}},{key:"hasLiedResolution",getData:function(m){m(J())}},{key:"hasLiedOs",getData:function(m){m(q())}},{key:"hasLiedBrowser",getData:function(m){m(de())}},{key:"touchSupport",getData:function(m){m(E())}},{key:"fonts",getData:function(m,y){var S=["monospace","sans-serif","serif"],P=["Andale Mono","Arial","Arial Black","Arial Hebrew","Arial MT","Arial Narrow","Arial Rounded MT Bold","Arial Unicode MS","Bitstream Vera Sans Mono","Book Antiqua","Bookman Old Style","Calibri","Cambria","Cambria Math","Century","Century Gothic","Century Schoolbook","Comic Sans","Comic Sans MS","Consolas","Courier","Courier New","Geneva","Georgia","Helvetica","Helvetica Neue","Impact","Lucida Bright","Lucida Calligraphy","Lucida Console","Lucida Fax","LUCIDA GRANDE","Lucida Handwriting","Lucida Sans","Lucida Sans Typewriter","Lucida Sans Unicode","Microsoft Sans Serif","Monaco","Monotype Corsiva","MS Gothic","MS Outlook","MS PGothic","MS Reference Sans Serif","MS Sans Serif","MS Serif","MYRIAD","MYRIAD PRO","Palatino","Palatino Linotype","Segoe Print","Segoe Script","Segoe UI","Segoe UI Light","Segoe UI Semibold","Segoe UI Symbol","Tahoma","Times","Times New Roman","Times New Roman PS","Trebuchet MS","Verdana","Wingdings","Wingdings 2","Wingdings 3"];y.fonts.extendedJsFonts&&(P=P.concat(["Abadi MT Condensed Light","Academy Engraved LET","ADOBE CASLON PRO","Adobe Garamond","ADOBE GARAMOND PRO","Agency FB","Aharoni","Albertus Extra Bold","Albertus Medium","Algerian","Amazone BT","American Typewriter","American Typewriter Condensed","AmerType Md BT","Andalus","Angsana New","AngsanaUPC","Antique Olive","Aparajita","Apple Chancery","Apple Color Emoji","Apple SD Gothic Neo","Arabic Typesetting","ARCHER","ARNO PRO","Arrus BT","Aurora Cn BT","AvantGarde Bk BT","AvantGarde Md BT","AVENIR","Ayuthaya","Bandy","Bangla Sangam MN","Bank Gothic","BankGothic Md BT","Baskerville","Baskerville Old Face","Batang","BatangChe","Bauer Bodoni","Bauhaus 93","Bazooka","Bell MT","Bembo","Benguiat Bk BT","Berlin Sans FB","Berlin Sans FB Demi","Bernard MT Condensed","BernhardFashion BT","BernhardMod BT","Big Caslon","BinnerD","Blackadder ITC","BlairMdITC TT","Bodoni 72","Bodoni 72 Oldstyle","Bodoni 72 Smallcaps","Bodoni MT","Bodoni MT Black","Bodoni MT Condensed","Bodoni MT Poster Compressed","Bookshelf Symbol 7","Boulder","Bradley Hand","Bradley Hand ITC","Bremen Bd BT","Britannic Bold","Broadway","Browallia New","BrowalliaUPC","Brush Script MT","Californian FB","Calisto MT","Calligrapher","Candara","CaslonOpnface BT","Castellar","Centaur","Cezanne","CG Omega","CG Times","Chalkboard","Chalkboard SE","Chalkduster","Charlesworth","Charter Bd BT","Charter BT","Chaucer","ChelthmITC Bk BT","Chiller","Clarendon","Clarendon Condensed","CloisterBlack BT","Cochin","Colonna MT","Constantia","Cooper Black","Copperplate","Copperplate Gothic","Copperplate Gothic Bold","Copperplate Gothic Light","CopperplGoth Bd BT","Corbel","Cordia New","CordiaUPC","Cornerstone","Coronet","Cuckoo","Curlz MT","DaunPenh","Dauphin","David","DB LCD Temp","DELICIOUS","Denmark","DFKai-SB","Didot","DilleniaUPC","DIN","DokChampa","Dotum","DotumChe","Ebrima","Edwardian Script ITC","Elephant","English 111 Vivace BT","Engravers MT","EngraversGothic BT","Eras Bold ITC","Eras Demi ITC","Eras Light ITC","Eras Medium ITC","EucrosiaUPC","Euphemia","Euphemia UCAS","EUROSTILE","Exotc350 Bd BT","FangSong","Felix Titling","Fixedsys","FONTIN","Footlight MT Light","Forte","FrankRuehl","Fransiscan","Freefrm721 Blk BT","FreesiaUPC","Freestyle Script","French Script MT","FrnkGothITC Bk BT","Fruitger","FRUTIGER","Futura","Futura Bk BT","Futura Lt BT","Futura Md BT","Futura ZBlk BT","FuturaBlack BT","Gabriola","Galliard BT","Gautami","Geeza Pro","Geometr231 BT","Geometr231 Hv BT","Geometr231 Lt BT","GeoSlab 703 Lt BT","GeoSlab 703 XBd BT","Gigi","Gill Sans","Gill Sans MT","Gill Sans MT Condensed","Gill Sans MT Ext Condensed Bold","Gill Sans Ultra Bold","Gill Sans Ultra Bold Condensed","Gisha","Gloucester MT Extra Condensed","GOTHAM","GOTHAM BOLD","Goudy Old Style","Goudy Stout","GoudyHandtooled BT","GoudyOLSt BT","Gujarati Sangam MN","Gulim","GulimChe","Gungsuh","GungsuhChe","Gurmukhi MN","Haettenschweiler","Harlow Solid Italic","Harrington","Heather","Heiti SC","Heiti TC","HELV","Herald","High Tower Text","Hiragino Kaku Gothic ProN","Hiragino Mincho ProN","Hoefler Text","Humanst 521 Cn BT","Humanst521 BT","Humanst521 Lt BT","Imprint MT Shadow","Incised901 Bd BT","Incised901 BT","Incised901 Lt BT","INCONSOLATA","Informal Roman","Informal011 BT","INTERSTATE","IrisUPC","Iskoola Pota","JasmineUPC","Jazz LET","Jenson","Jester","Jokerman","Juice ITC","Kabel Bk BT","Kabel Ult BT","Kailasa","KaiTi","Kalinga","Kannada Sangam MN","Kartika","Kaufmann Bd BT","Kaufmann BT","Khmer UI","KodchiangUPC","Kokila","Korinna BT","Kristen ITC","Krungthep","Kunstler Script","Lao UI","Latha","Leelawadee","Letter Gothic","Levenim MT","LilyUPC","Lithograph","Lithograph Light","Long Island","Lydian BT","Magneto","Maiandra GD","Malayalam Sangam MN","Malgun Gothic","Mangal","Marigold","Marion","Marker Felt","Market","Marlett","Matisse ITC","Matura MT Script Capitals","Meiryo","Meiryo UI","Microsoft Himalaya","Microsoft JhengHei","Microsoft New Tai Lue","Microsoft PhagsPa","Microsoft Tai Le","Microsoft Uighur","Microsoft YaHei","Microsoft Yi Baiti","MingLiU","MingLiU_HKSCS","MingLiU_HKSCS-ExtB","MingLiU-ExtB","Minion","Minion Pro","Miriam","Miriam Fixed","Mistral","Modern","Modern No. 20","Mona Lisa Solid ITC TT","Mongolian Baiti","MONO","MoolBoran","Mrs Eaves","MS LineDraw","MS Mincho","MS PMincho","MS Reference Specialty","MS UI Gothic","MT Extra","MUSEO","MV Boli","Nadeem","Narkisim","NEVIS","News Gothic","News GothicMT","NewsGoth BT","Niagara Engraved","Niagara Solid","Noteworthy","NSimSun","Nyala","OCR A Extended","Old Century","Old English Text MT","Onyx","Onyx BT","OPTIMA","Oriya Sangam MN","OSAKA","OzHandicraft BT","Palace Script MT","Papyrus","Parchment","Party LET","Pegasus","Perpetua","Perpetua Titling MT","PetitaBold","Pickwick","Plantagenet Cherokee","Playbill","PMingLiU","PMingLiU-ExtB","Poor Richard","Poster","PosterBodoni BT","PRINCETOWN LET","Pristina","PTBarnum BT","Pythagoras","Raavi","Rage Italic","Ravie","Ribbon131 Bd BT","Rockwell","Rockwell Condensed","Rockwell Extra Bold","Rod","Roman","Sakkal Majalla","Santa Fe LET","Savoye LET","Sceptre","Script","Script MT Bold","SCRIPTINA","Serifa","Serifa BT","Serifa Th BT","ShelleyVolante BT","Sherwood","Shonar Bangla","Showcard Gothic","Shruti","Signboard","SILKSCREEN","SimHei","Simplified Arabic","Simplified Arabic Fixed","SimSun","SimSun-ExtB","Sinhala Sangam MN","Sketch Rockwell","Skia","Small Fonts","Snap ITC","Snell Roundhand","Socket","Souvenir Lt BT","Staccato222 BT","Steamer","Stencil","Storybook","Styllo","Subway","Swis721 BlkEx BT","Swiss911 XCm BT","Sylfaen","Synchro LET","System","Tamil Sangam MN","Technical","Teletype","Telugu Sangam MN","Tempus Sans ITC","Terminal","Thonburi","Traditional Arabic","Trajan","TRAJAN PRO","Tristan","Tubular","Tunga","Tw Cen MT","Tw Cen MT Condensed","Tw Cen MT Condensed Extra Bold","TypoUpright BT","Unicorn","Univers","Univers CE 55 Medium","Univers Condensed","Utsaah","Vagabond","Vani","Vijaya","Viner Hand ITC","VisualUI","Vivaldi","Vladimir Script","Vrinda","Westminster","WHITNEY","Wide Latin","ZapfEllipt BT","ZapfHumnst BT","ZapfHumnst Dm BT","Zapfino","Zurich BlkEx BT","Zurich Ex BT","ZWAdobeF"])),P=(P=P.concat(y.fonts.userDefinedFonts)).filter(function(Q,ue){return P.indexOf(Q)===ue});var M=document.getElementsByTagName("body")[0],I=document.createElement("div"),L=document.createElement("div"),N={},z={},F=function(){var Q=document.createElement("span");return Q.style.position="absolute",Q.style.left="-9999px",Q.style.fontSize="72px",Q.style.fontStyle="normal",Q.style.fontWeight="normal",Q.style.letterSpacing="normal",Q.style.lineBreak="auto",Q.style.lineHeight="normal",Q.style.textTransform="none",Q.style.textAlign="left",Q.style.textDecoration="none",Q.style.textShadow="none",Q.style.whiteSpace="normal",Q.style.wordBreak="normal",Q.style.wordSpacing="normal",Q.innerHTML="mmmmmmmmmmlli",Q},D=function(Q,ue){var _e=F();return _e.style.fontFamily="'"+Q+"',"+ue,_e},re=function(Q){for(var ue=!1,_e=0;_e<S.length;_e++)if(ue=Q[_e].offsetWidth!==N[S[_e]]||Q[_e].offsetHeight!==z[S[_e]])return ue;return ue},ae=function(){for(var Q=[],ue=0,_e=S.length;ue<_e;ue++){var nt=F();nt.style.fontFamily=S[ue],I.appendChild(nt),Q.push(nt)}return Q}();M.appendChild(I);for(var X=0,be=S.length;X<be;X++)N[S[X]]=ae[X].offsetWidth,z[S[X]]=ae[X].offsetHeight;var j=function(){for(var Q={},ue=0,_e=P.length;ue<_e;ue++){for(var nt=[],rr=0,Ei=S.length;rr<Ei;rr++){var Dr=D(P[ue],S[rr]);L.appendChild(Dr),nt.push(Dr)}Q[P[ue]]=nt}return Q}();M.appendChild(L);for(var ve=[],ke=0,Ce=P.length;ke<Ce;ke++)re(j[P[ke]])&&ve.push(P[ke]);M.removeChild(L),M.removeChild(I),m(ve)},pauseBefore:!0},{key:"fontsFlash",getData:function(m,y){return De()?Ze()?y.fonts.swfPath?void se(function(S){m(S)},y):m("missing options.fonts.swfPath"):m("flash not installed"):m("swf object not loaded")},pauseBefore:!0},{key:"audio",getData:function(m,y){var S=y.audio;if(S.excludeIOS11&&navigator.userAgent.match(/OS 11.+Version\/11.+Safari/))return m(y.EXCLUDED);var P=window.OfflineAudioContext||window.webkitOfflineAudioContext;if(P==null)return m(y.NOT_AVAILABLE);var M=new P(1,44100,44100),I=M.createOscillator();I.type="triangle",I.frequency.setValueAtTime(1e4,M.currentTime);var L=M.createDynamicsCompressor();u([["threshold",-50],["knee",40],["ratio",12],["reduction",-20],["attack",0],["release",.25]],function(z){L[z[0]]!==void 0&&typeof L[z[0]].setValueAtTime=="function"&&L[z[0]].setValueAtTime(z[1],M.currentTime)}),I.connect(L),L.connect(M.destination),I.start(0),M.startRendering();var N=setTimeout(function(){return console.warn('Audio fingerprint timed out. Please report bug at https://github.com/fingerprintjs/fingerprintjs with your user agent: "'+navigator.userAgent+'".'),M.oncomplete=function(){},M=null,m("audioTimeout")},S.timeout);M.oncomplete=function(z){var F;try{clearTimeout(N),F=z.renderedBuffer.getChannelData(0).slice(4500,5e3).reduce(function(D,re){return D+Math.abs(re)},0).toString(),I.disconnect(),L.disconnect()}catch(D){return void m(D)}m(F)}}},{key:"enumerateDevices",getData:function(m,y){if(!p())return m(y.NOT_AVAILABLE);navigator.mediaDevices.enumerateDevices().then(function(S){m(S.map(function(P){return"id="+P.deviceId+";gid="+P.groupId+";"+P.kind+";"+P.label}))}).catch(function(S){m(S)})}}],me=function(m){throw new Error("'new Fingerprint()' is deprecated, see https://github.com/fingerprintjs/fingerprintjs#upgrade-guide-from-182-to-200")};return me.get=function(m,y){y?m||(m={}):(y=m,m={}),function(I,L){if(L==null)return I;var N,z;for(z in L)(N=L[z])==null||Object.prototype.hasOwnProperty.call(I,z)||(I[z]=N)}(m,l),m.components=m.extraComponents.concat(qe);var S={data:[],addPreprocessedComponent:function(I,L){typeof m.preprocessor=="function"&&(L=m.preprocessor(I,L)),S.data.push({key:I,value:L})}},P=-1,M=function(I){if((P+=1)>=m.components.length)y(S.data);else{var L=m.components[P];if(m.excludes[L.key])M(!1);else{if(!I&&L.pauseBefore)return P-=1,void setTimeout(function(){M(!0)},1);try{L.getData(function(N){S.addPreprocessedComponent(L.key,N),M(!1)},m)}catch(N){S.addPreprocessedComponent(L.key,String(N)),M(!1)}}}};M(!1)},me.getPromise=function(m){return new Promise(function(y,S){me.get(m,y)})},me.getV18=function(m,y){return y==null&&(y=m,m={}),me.get(m,function(S){for(var P=[],M=0;M<S.length;M++){var I=S[M];if(I.value===(m.NOT_AVAILABLE||"not available"))P.push({key:I.key,value:"unknown"});else if(I.key==="plugins")P.push({key:"plugins",value:h(I.value,function(N){var z=h(N[2],function(F){return F.join?F.join("~"):F}).join(",");return[N[0],N[1],z].join("::")})});else if(["canvas","webgl"].indexOf(I.key)!==-1&&Array.isArray(I.value))P.push({key:I.key,value:I.value.join("~")});else if(["sessionStorage","localStorage","indexedDb","addBehavior","openDatabase"].indexOf(I.key)!==-1){if(!I.value)continue;P.push({key:I.key,value:1})}else I.value?P.push(I.value.join?{key:I.key,value:I.value.join(";")}:I):P.push({key:I.key,value:I.value})}var L=c(h(P,function(N){return N.value}).join("~~~"),31);y(L,P)})},me.x64hash128=c,me.VERSION="2.1.4",me},e.exports?e.exports=t():r.exports?r.exports=t():r.Fingerprint2=t()}),Ko=ft(function(e){(function(r){function t(f,v){var g=(65535&f)+(65535&v);return(f>>16)+(v>>16)+(g>>16)<<16|65535&g}function i(f,v,g,b,x,A){return t((R=t(t(v,f),t(b,A)))<<(k=x)|R>>>32-k,g);var R,k}function n(f,v,g,b,x,A,R){return i(v&g|~v&b,f,v,x,A,R)}function o(f,v,g,b,x,A,R){return i(v&b|g&~b,f,v,x,A,R)}function a(f,v,g,b,x,A,R){return i(v^g^b,f,v,x,A,R)}function s(f,v,g,b,x,A,R){return i(g^(v|~b),f,v,x,A,R)}function d(f,v){var g,b,x,A,R;f[v>>5]|=128<<v%32,f[14+(v+64>>>9<<4)]=v;var k=1732584193,_=-271733879,T=-1732584194,E=271733878;for(g=0;g<f.length;g+=16)b=k,x=_,A=T,R=E,k=n(k,_,T,E,f[g],7,-680876936),E=n(E,k,_,T,f[g+1],12,-389564586),T=n(T,E,k,_,f[g+2],17,606105819),_=n(_,T,E,k,f[g+3],22,-1044525330),k=n(k,_,T,E,f[g+4],7,-176418897),E=n(E,k,_,T,f[g+5],12,1200080426),T=n(T,E,k,_,f[g+6],17,-1473231341),_=n(_,T,E,k,f[g+7],22,-45705983),k=n(k,_,T,E,f[g+8],7,1770035416),E=n(E,k,_,T,f[g+9],12,-1958414417),T=n(T,E,k,_,f[g+10],17,-42063),_=n(_,T,E,k,f[g+11],22,-1990404162),k=n(k,_,T,E,f[g+12],7,1804603682),E=n(E,k,_,T,f[g+13],12,-40341101),T=n(T,E,k,_,f[g+14],17,-1502002290),k=o(k,_=n(_,T,E,k,f[g+15],22,1236535329),T,E,f[g+1],5,-165796510),E=o(E,k,_,T,f[g+6],9,-1069501632),T=o(T,E,k,_,f[g+11],14,643717713),_=o(_,T,E,k,f[g],20,-373897302),k=o(k,_,T,E,f[g+5],5,-701558691),E=o(E,k,_,T,f[g+10],9,38016083),T=o(T,E,k,_,f[g+15],14,-660478335),_=o(_,T,E,k,f[g+4],20,-405537848),k=o(k,_,T,E,f[g+9],5,568446438),E=o(E,k,_,T,f[g+14],9,-1019803690),T=o(T,E,k,_,f[g+3],14,-187363961),_=o(_,T,E,k,f[g+8],20,1163531501),k=o(k,_,T,E,f[g+13],5,-1444681467),E=o(E,k,_,T,f[g+2],9,-51403784),T=o(T,E,k,_,f[g+7],14,1735328473),k=a(k,_=o(_,T,E,k,f[g+12],20,-1926607734),T,E,f[g+5],4,-378558),E=a(E,k,_,T,f[g+8],11,-2022574463),T=a(T,E,k,_,f[g+11],16,1839030562),_=a(_,T,E,k,f[g+14],23,-35309556),k=a(k,_,T,E,f[g+1],4,-1530992060),E=a(E,k,_,T,f[g+4],11,1272893353),T=a(T,E,k,_,f[g+7],16,-155497632),_=a(_,T,E,k,f[g+10],23,-1094730640),k=a(k,_,T,E,f[g+13],4,681279174),E=a(E,k,_,T,f[g],11,-358537222),T=a(T,E,k,_,f[g+3],16,-722521979),_=a(_,T,E,k,f[g+6],23,76029189),k=a(k,_,T,E,f[g+9],4,-640364487),E=a(E,k,_,T,f[g+12],11,-421815835),T=a(T,E,k,_,f[g+15],16,530742520),k=s(k,_=a(_,T,E,k,f[g+2],23,-995338651),T,E,f[g],6,-198630844),E=s(E,k,_,T,f[g+7],10,1126891415),T=s(T,E,k,_,f[g+14],15,-1416354905),_=s(_,T,E,k,f[g+5],21,-57434055),k=s(k,_,T,E,f[g+12],6,1700485571),E=s(E,k,_,T,f[g+3],10,-1894986606),T=s(T,E,k,_,f[g+10],15,-1051523),_=s(_,T,E,k,f[g+1],21,-2054922799),k=s(k,_,T,E,f[g+8],6,1873313359),E=s(E,k,_,T,f[g+15],10,-30611744),T=s(T,E,k,_,f[g+6],15,-1560198380),_=s(_,T,E,k,f[g+13],21,1309151649),k=s(k,_,T,E,f[g+4],6,-145523070),E=s(E,k,_,T,f[g+11],10,-1120210379),T=s(T,E,k,_,f[g+2],15,718787259),_=s(_,T,E,k,f[g+9],21,-343485551),k=t(k,b),_=t(_,x),T=t(T,A),E=t(E,R);return[k,_,T,E]}function c(f){var v,g="",b=32*f.length;for(v=0;v<b;v+=8)g+=String.fromCharCode(f[v>>5]>>>v%32&255);return g}function l(f){var v,g=[];for(g[(f.length>>2)-1]=void 0,v=0;v<g.length;v+=1)g[v]=0;var b=8*f.length;for(v=0;v<b;v+=8)g[v>>5]|=(255&f.charCodeAt(v/8))<<v%32;return g}function u(f){var v,g,b="0123456789abcdef",x="";for(g=0;g<f.length;g+=1)v=f.charCodeAt(g),x+=b.charAt(v>>>4&15)+b.charAt(15&v);return x}function h(f){return unescape(encodeURIComponent(f))}function p(f){return function(v){return c(d(l(v),8*v.length))}(h(f))}function w(f,v){return function(g,b){var x,A,R=l(g),k=[],_=[];for(k[15]=_[15]=void 0,R.length>16&&(R=d(R,8*g.length)),x=0;x<16;x+=1)k[x]=909522486^R[x],_[x]=1549556828^R[x];return A=d(k.concat(l(b)),512+8*b.length),c(d(_.concat(A),640))}(h(f),h(v))}function C(f,v,g){return v?g?w(v,f):u(w(v,f)):g?p(f):u(p(f))}e.exports?e.exports=C:r.md5=C})(mt)});class $o extends nr{constructor(r="TaskQueue"){super(),this.name=r,this._closed=!1,this._busy=!1,this._queue=[]}close(){this._closed=!0}push(r,t){return new Promise((i,n)=>{this._queue.push({method:r,data:t,resolve:i,reject:n}),this._handlePendingCommands()})}_handlePendingCommands(){if(this._busy)return;const r=this._queue,t=r[0];t&&(this._busy=!0,this._handleCommand(t).then(()=>{this._busy=!1,r.shift(),this._handlePendingCommands()}))}_handleCommand(r){if(this._closed)return r.reject(new G(`${this.name} taskQueue closed`)),Promise.resolve();const t={promise:null};return this.emit("exec",r,t),Promise.resolve().then(()=>t.promise).then(i=>{this._closed?r.reject(new G(`${this.name} taskQueue closed`)):r.resolve(i)}).catch(i=>{r.reject(i)})}}/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */function St(e){let r=e.length;for(;--r>=0;)e[r]=0}const ni=256,oa=286,Ft=30,jt=15,ai=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),yr=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),qo=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),sa=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Je=new Array(576);St(Je);const zt=new Array(60);St(zt);const Vt=new Array(512);St(Vt);const Gt=new Array(256);St(Gt);const oi=new Array(29);St(oi);const br=new Array(Ft);function si(e,r,t,i,n){this.static_tree=e,this.extra_bits=r,this.extra_base=t,this.elems=i,this.max_length=n,this.has_stree=e&&e.length}let ca,da,la;function ci(e,r){this.dyn_tree=e,this.max_code=0,this.stat_desc=r}St(br);const ua=e=>e<256?Vt[e]:Vt[256+(e>>>7)],Ut=(e,r)=>{e.pending_buf[e.pending++]=255&r,e.pending_buf[e.pending++]=r>>>8&255},Te=(e,r,t)=>{e.bi_valid>16-t?(e.bi_buf|=r<<e.bi_valid&65535,Ut(e,e.bi_buf),e.bi_buf=r>>16-e.bi_valid,e.bi_valid+=t-16):(e.bi_buf|=r<<e.bi_valid&65535,e.bi_valid+=t)},ze=(e,r,t)=>{Te(e,t[2*r],t[2*r+1])},ha=(e,r)=>{let t=0;do t|=1&e,e>>>=1,t<<=1;while(--r>0);return t>>>1},pa=(e,r,t)=>{const i=new Array(16);let n,o,a=0;for(n=1;n<=jt;n++)a=a+t[n-1]<<1,i[n]=a;for(o=0;o<=r;o++){let s=e[2*o+1];s!==0&&(e[2*o]=ha(i[s]++,s))}},ma=e=>{let r;for(r=0;r<oa;r++)e.dyn_ltree[2*r]=0;for(r=0;r<Ft;r++)e.dyn_dtree[2*r]=0;for(r=0;r<19;r++)e.bl_tree[2*r]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},fa=e=>{e.bi_valid>8?Ut(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},ga=(e,r,t,i)=>{const n=2*r,o=2*t;return e[n]<e[o]||e[n]===e[o]&&i[r]<=i[t]},di=(e,r,t)=>{const i=e.heap[t];let n=t<<1;for(;n<=e.heap_len&&(n<e.heap_len&&ga(r,e.heap[n+1],e.heap[n],e.depth)&&n++,!ga(r,i,e.heap[n],e.depth));)e.heap[t]=e.heap[n],t=n,n<<=1;e.heap[t]=i},va=(e,r,t)=>{let i,n,o,a,s=0;if(e.sym_next!==0)do i=255&e.pending_buf[e.sym_buf+s++],i+=(255&e.pending_buf[e.sym_buf+s++])<<8,n=e.pending_buf[e.sym_buf+s++],i===0?ze(e,n,r):(o=Gt[n],ze(e,o+ni+1,r),a=ai[o],a!==0&&(n-=oi[o],Te(e,n,a)),i--,o=ua(i),ze(e,o,t),a=yr[o],a!==0&&(i-=br[o],Te(e,i,a)));while(s<e.sym_next);ze(e,256,r)},li=(e,r)=>{const t=r.dyn_tree,i=r.stat_desc.static_tree,n=r.stat_desc.has_stree,o=r.stat_desc.elems;let a,s,d,c=-1;for(e.heap_len=0,e.heap_max=573,a=0;a<o;a++)t[2*a]!==0?(e.heap[++e.heap_len]=c=a,e.depth[a]=0):t[2*a+1]=0;for(;e.heap_len<2;)d=e.heap[++e.heap_len]=c<2?++c:0,t[2*d]=1,e.depth[d]=0,e.opt_len--,n&&(e.static_len-=i[2*d+1]);for(r.max_code=c,a=e.heap_len>>1;a>=1;a--)di(e,t,a);d=o;do a=e.heap[1],e.heap[1]=e.heap[e.heap_len--],di(e,t,1),s=e.heap[1],e.heap[--e.heap_max]=a,e.heap[--e.heap_max]=s,t[2*d]=t[2*a]+t[2*s],e.depth[d]=(e.depth[a]>=e.depth[s]?e.depth[a]:e.depth[s])+1,t[2*a+1]=t[2*s+1]=d,e.heap[1]=d++,di(e,t,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((l,u)=>{const h=u.dyn_tree,p=u.max_code,w=u.stat_desc.static_tree,C=u.stat_desc.has_stree,f=u.stat_desc.extra_bits,v=u.stat_desc.extra_base,g=u.stat_desc.max_length;let b,x,A,R,k,_,T=0;for(R=0;R<=jt;R++)l.bl_count[R]=0;for(h[2*l.heap[l.heap_max]+1]=0,b=l.heap_max+1;b<573;b++)x=l.heap[b],R=h[2*h[2*x+1]+1]+1,R>g&&(R=g,T++),h[2*x+1]=R,x>p||(l.bl_count[R]++,k=0,x>=v&&(k=f[x-v]),_=h[2*x],l.opt_len+=_*(R+k),C&&(l.static_len+=_*(w[2*x+1]+k)));if(T!==0){do{for(R=g-1;l.bl_count[R]===0;)R--;l.bl_count[R]--,l.bl_count[R+1]+=2,l.bl_count[g]--,T-=2}while(T>0);for(R=g;R!==0;R--)for(x=l.bl_count[R];x!==0;)A=l.heap[--b],A>p||(h[2*A+1]!==R&&(l.opt_len+=(R-h[2*A+1])*h[2*A],h[2*A+1]=R),x--)}})(e,r),pa(t,c,e.bl_count)},wa=(e,r,t)=>{let i,n,o=-1,a=r[1],s=0,d=7,c=4;for(a===0&&(d=138,c=3),r[2*(t+1)+1]=65535,i=0;i<=t;i++)n=a,a=r[2*(i+1)+1],++s<d&&n===a||(s<c?e.bl_tree[2*n]+=s:n!==0?(n!==o&&e.bl_tree[2*n]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,o=n,a===0?(d=138,c=3):n===a?(d=6,c=3):(d=7,c=4))},ya=(e,r,t)=>{let i,n,o=-1,a=r[1],s=0,d=7,c=4;for(a===0&&(d=138,c=3),i=0;i<=t;i++)if(n=a,a=r[2*(i+1)+1],!(++s<d&&n===a)){if(s<c)do ze(e,n,e.bl_tree);while(--s!=0);else n!==0?(n!==o&&(ze(e,n,e.bl_tree),s--),ze(e,16,e.bl_tree),Te(e,s-3,2)):s<=10?(ze(e,17,e.bl_tree),Te(e,s-3,3)):(ze(e,18,e.bl_tree),Te(e,s-11,7));s=0,o=n,a===0?(d=138,c=3):n===a?(d=6,c=3):(d=7,c=4)}};let ba=!1;const _a=(e,r,t,i)=>{Te(e,0+(i?1:0),3),fa(e),Ut(e,t),Ut(e,~t),t&&e.pending_buf.set(e.window.subarray(r,r+t),e.pending),e.pending+=t};var Qo=e=>{ba||((()=>{let r,t,i,n,o;const a=new Array(16);for(i=0,n=0;n<28;n++)for(oi[n]=i,r=0;r<1<<ai[n];r++)Gt[i++]=n;for(Gt[i-1]=n,o=0,n=0;n<16;n++)for(br[n]=o,r=0;r<1<<yr[n];r++)Vt[o++]=n;for(o>>=7;n<Ft;n++)for(br[n]=o<<7,r=0;r<1<<yr[n]-7;r++)Vt[256+o++]=n;for(t=0;t<=jt;t++)a[t]=0;for(r=0;r<=143;)Je[2*r+1]=8,r++,a[8]++;for(;r<=255;)Je[2*r+1]=9,r++,a[9]++;for(;r<=279;)Je[2*r+1]=7,r++,a[7]++;for(;r<=287;)Je[2*r+1]=8,r++,a[8]++;for(pa(Je,287,a),r=0;r<Ft;r++)zt[2*r+1]=5,zt[2*r]=ha(r,5);ca=new si(Je,ai,257,oa,jt),da=new si(zt,yr,0,Ft,jt),la=new si(new Array(0),qo,0,19,7)})(),ba=!0),e.l_desc=new ci(e.dyn_ltree,ca),e.d_desc=new ci(e.dyn_dtree,da),e.bl_desc=new ci(e.bl_tree,la),e.bi_buf=0,e.bi_valid=0,ma(e)},es=(e,r,t,i)=>{let n,o,a=0;e.level>0?(e.strm.data_type===2&&(e.strm.data_type=(s=>{let d,c=4093624447;for(d=0;d<=31;d++,c>>>=1)if(1&c&&s.dyn_ltree[2*d]!==0)return 0;if(s.dyn_ltree[18]!==0||s.dyn_ltree[20]!==0||s.dyn_ltree[26]!==0)return 1;for(d=32;d<ni;d++)if(s.dyn_ltree[2*d]!==0)return 1;return 0})(e)),li(e,e.l_desc),li(e,e.d_desc),a=(s=>{let d;for(wa(s,s.dyn_ltree,s.l_desc.max_code),wa(s,s.dyn_dtree,s.d_desc.max_code),li(s,s.bl_desc),d=18;d>=3&&s.bl_tree[2*sa[d]+1]===0;d--);return s.opt_len+=3*(d+1)+5+5+4,d})(e),n=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,o<=n&&(n=o)):n=o=t+5,t+4<=n&&r!==-1?_a(e,r,t,i):e.strategy===4||o===n?(Te(e,2+(i?1:0),3),va(e,Je,zt)):(Te(e,4+(i?1:0),3),((s,d,c,l)=>{let u;for(Te(s,d-257,5),Te(s,c-1,5),Te(s,l-4,4),u=0;u<l;u++)Te(s,s.bl_tree[2*sa[u]+1],3);ya(s,s.dyn_ltree,d-1),ya(s,s.dyn_dtree,c-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),va(e,e.dyn_ltree,e.dyn_dtree)),ma(e),i&&fa(e)},ts=(e,r,t)=>(e.pending_buf[e.sym_buf+e.sym_next++]=r,e.pending_buf[e.sym_buf+e.sym_next++]=r>>8,e.pending_buf[e.sym_buf+e.sym_next++]=t,r===0?e.dyn_ltree[2*t]++:(e.matches++,r--,e.dyn_ltree[2*(Gt[t]+ni+1)]++,e.dyn_dtree[2*ua(r)]++),e.sym_next===e.sym_end),rs={_tr_init:Qo,_tr_stored_block:_a,_tr_flush_block:es,_tr_tally:ts,_tr_align:e=>{Te(e,2,3),ze(e,256,Je),(r=>{r.bi_valid===16?(Ut(r,r.bi_buf),r.bi_buf=0,r.bi_valid=0):r.bi_valid>=8&&(r.pending_buf[r.pending++]=255&r.bi_buf,r.bi_buf>>=8,r.bi_valid-=8)})(e)}},Wt=(e,r,t,i)=>{let n=65535&e,o=e>>>16&65535,a=0;for(;t!==0;){a=t>2e3?2e3:t,t-=a;do n=n+r[i++]|0,o=o+n|0;while(--a);n%=65521,o%=65521}return n|o<<16};const is=new Uint32Array((()=>{let e,r=[];for(var t=0;t<256;t++){e=t;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;r[t]=e}return r})());var ce=(e,r,t,i)=>{const n=is,o=i+t;e^=-1;for(let a=i;a<o;a++)e=e>>>8^n[255&(e^r[a])];return~e},st={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Zt={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:ns,_tr_stored_block:ui,_tr_flush_block:as,_tr_tally:et,_tr_align:os}=rs,{Z_NO_FLUSH:tt,Z_PARTIAL_FLUSH:ss,Z_FULL_FLUSH:cs,Z_FINISH:Oe,Z_BLOCK:Sa,Z_OK:he,Z_STREAM_END:Ta,Z_STREAM_ERROR:Ve,Z_DATA_ERROR:ds,Z_BUF_ERROR:hi,Z_DEFAULT_COMPRESSION:ls,Z_FILTERED:us,Z_HUFFMAN_ONLY:_r,Z_RLE:hs,Z_FIXED:ps,Z_DEFAULT_STRATEGY:ms,Z_UNKNOWN:fs,Z_DEFLATED:Sr}=Zt,ct=258,Ge=262,Tt=42,dt=113,Ht=666,lt=(e,r)=>(e.msg=st[r],r),ka=e=>2*e-(e>4?9:0),rt=e=>{let r=e.length;for(;--r>=0;)e[r]=0},gs=e=>{let r,t,i,n=e.w_size;r=e.hash_size,i=r;do t=e.head[--i],e.head[i]=t>=n?t-n:0;while(--r);r=n,i=r;do t=e.prev[--i],e.prev[i]=t>=n?t-n:0;while(--r)};let it=(e,r,t)=>(r<<e.hash_shift^t)&e.hash_mask;const Pe=e=>{const r=e.state;let t=r.pending;t>e.avail_out&&(t=e.avail_out),t!==0&&(e.output.set(r.pending_buf.subarray(r.pending_out,r.pending_out+t),e.next_out),e.next_out+=t,r.pending_out+=t,e.total_out+=t,e.avail_out-=t,r.pending-=t,r.pending===0&&(r.pending_out=0))},Ae=(e,r)=>{as(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,r),e.block_start=e.strstart,Pe(e.strm)},ee=(e,r)=>{e.pending_buf[e.pending++]=r},Xt=(e,r)=>{e.pending_buf[e.pending++]=r>>>8&255,e.pending_buf[e.pending++]=255&r},pi=(e,r,t,i)=>{let n=e.avail_in;return n>i&&(n=i),n===0?0:(e.avail_in-=n,r.set(e.input.subarray(e.next_in,e.next_in+n),t),e.state.wrap===1?e.adler=Wt(e.adler,r,n,t):e.state.wrap===2&&(e.adler=ce(e.adler,r,n,t)),e.next_in+=n,e.total_in+=n,n)},Ca=(e,r)=>{let t,i,n=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match;const d=e.strstart>e.w_size-Ge?e.strstart-(e.w_size-Ge):0,c=e.window,l=e.w_mask,u=e.prev,h=e.strstart+ct;let p=c[o+a-1],w=c[o+a];e.prev_length>=e.good_match&&(n>>=2),s>e.lookahead&&(s=e.lookahead);do if(t=r,c[t+a]===w&&c[t+a-1]===p&&c[t]===c[o]&&c[++t]===c[o+1]){o+=2,t++;do;while(c[++o]===c[++t]&&c[++o]===c[++t]&&c[++o]===c[++t]&&c[++o]===c[++t]&&c[++o]===c[++t]&&c[++o]===c[++t]&&c[++o]===c[++t]&&c[++o]===c[++t]&&o<h);if(i=ct-(h-o),o=h-ct,i>a){if(e.match_start=r,a=i,i>=s)break;p=c[o+a-1],w=c[o+a]}}while((r=u[r&l])>d&&--n!=0);return a<=e.lookahead?a:e.lookahead},kt=e=>{const r=e.w_size;let t,i,n;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=r+(r-Ge)&&(e.window.set(e.window.subarray(r,r+r-i),0),e.match_start-=r,e.strstart-=r,e.block_start-=r,e.insert>e.strstart&&(e.insert=e.strstart),gs(e),i+=r),e.strm.avail_in===0)break;if(t=pi(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=t,e.lookahead+e.insert>=3)for(n=e.strstart-e.insert,e.ins_h=e.window[n],e.ins_h=it(e,e.ins_h,e.window[n+1]);e.insert&&(e.ins_h=it(e,e.ins_h,e.window[n+3-1]),e.prev[n&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=n,n++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<Ge&&e.strm.avail_in!==0)},Ea=(e,r)=>{let t,i,n,o=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,a=0,s=e.strm.avail_in;do{if(t=65535,n=e.bi_valid+42>>3,e.strm.avail_out<n||(n=e.strm.avail_out-n,i=e.strstart-e.block_start,t>i+e.strm.avail_in&&(t=i+e.strm.avail_in),t>n&&(t=n),t<o&&(t===0&&r!==Oe||r===tt||t!==i+e.strm.avail_in)))break;a=r===Oe&&t===i+e.strm.avail_in?1:0,ui(e,0,0,a),e.pending_buf[e.pending-4]=t,e.pending_buf[e.pending-3]=t>>8,e.pending_buf[e.pending-2]=~t,e.pending_buf[e.pending-1]=~t>>8,Pe(e.strm),i&&(i>t&&(i=t),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+i),e.strm.next_out),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i,e.block_start+=i,t-=i),t&&(pi(e.strm,e.strm.output,e.strm.next_out,t),e.strm.next_out+=t,e.strm.avail_out-=t,e.strm.total_out+=t)}while(a===0);return s-=e.strm.avail_in,s&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),a?4:r!==tt&&r!==Oe&&e.strm.avail_in===0&&e.strstart===e.block_start?2:(n=e.window_size-e.strstart,e.strm.avail_in>n&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,n+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),n>e.strm.avail_in&&(n=e.strm.avail_in),n&&(pi(e.strm,e.window,e.strstart,n),e.strstart+=n,e.insert+=n>e.w_size-e.insert?e.w_size-e.insert:n),e.high_water<e.strstart&&(e.high_water=e.strstart),n=e.bi_valid+42>>3,n=e.pending_buf_size-n>65535?65535:e.pending_buf_size-n,o=n>e.w_size?e.w_size:n,i=e.strstart-e.block_start,(i>=o||(i||r===Oe)&&r!==tt&&e.strm.avail_in===0&&i<=n)&&(t=i>n?n:i,a=r===Oe&&e.strm.avail_in===0&&t===i?1:0,ui(e,e.block_start,t,a),e.block_start+=t,Pe(e.strm)),a?3:1)},mi=(e,r)=>{let t,i;for(;;){if(e.lookahead<Ge){if(kt(e),e.lookahead<Ge&&r===tt)return 1;if(e.lookahead===0)break}if(t=0,e.lookahead>=3&&(e.ins_h=it(e,e.ins_h,e.window[e.strstart+3-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),t!==0&&e.strstart-t<=e.w_size-Ge&&(e.match_length=Ca(e,t)),e.match_length>=3)if(i=et(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do e.strstart++,e.ins_h=it(e,e.ins_h,e.window[e.strstart+3-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!=0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=it(e,e.ins_h,e.window[e.strstart+1]);else i=et(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(Ae(e,!1),e.strm.avail_out===0))return 1}return e.insert=e.strstart<2?e.strstart:2,r===Oe?(Ae(e,!0),e.strm.avail_out===0?3:4):e.sym_next&&(Ae(e,!1),e.strm.avail_out===0)?1:2},Ct=(e,r)=>{let t,i,n;for(;;){if(e.lookahead<Ge){if(kt(e),e.lookahead<Ge&&r===tt)return 1;if(e.lookahead===0)break}if(t=0,e.lookahead>=3&&(e.ins_h=it(e,e.ins_h,e.window[e.strstart+3-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,t!==0&&e.prev_length<e.max_lazy_match&&e.strstart-t<=e.w_size-Ge&&(e.match_length=Ca(e,t),e.match_length<=5&&(e.strategy===us||e.match_length===3&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){n=e.strstart+e.lookahead-3,i=et(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=n&&(e.ins_h=it(e,e.ins_h,e.window[e.strstart+3-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!=0);if(e.match_available=0,e.match_length=2,e.strstart++,i&&(Ae(e,!1),e.strm.avail_out===0))return 1}else if(e.match_available){if(i=et(e,0,e.window[e.strstart-1]),i&&Ae(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=et(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,r===Oe?(Ae(e,!0),e.strm.avail_out===0?3:4):e.sym_next&&(Ae(e,!1),e.strm.avail_out===0)?1:2};function Ue(e,r,t,i,n){this.good_length=e,this.max_lazy=r,this.nice_length=t,this.max_chain=i,this.func=n}const Yt=[new Ue(0,0,0,0,Ea),new Ue(4,4,8,4,mi),new Ue(4,5,16,8,mi),new Ue(4,6,32,32,mi),new Ue(4,4,16,16,Ct),new Ue(8,16,32,32,Ct),new Ue(8,16,128,128,Ct),new Ue(8,32,128,256,Ct),new Ue(32,128,258,1024,Ct),new Ue(32,258,258,4096,Ct)];function vs(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Sr,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),rt(this.dyn_ltree),rt(this.dyn_dtree),rt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),rt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),rt(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Jt=e=>{if(!e)return 1;const r=e.state;return!r||r.strm!==e||r.status!==Tt&&r.status!==57&&r.status!==69&&r.status!==73&&r.status!==91&&r.status!==103&&r.status!==dt&&r.status!==Ht?1:0},Ra=e=>{if(Jt(e))return lt(e,Ve);e.total_in=e.total_out=0,e.data_type=fs;const r=e.state;return r.pending=0,r.pending_out=0,r.wrap<0&&(r.wrap=-r.wrap),r.status=r.wrap===2?57:r.wrap?Tt:dt,e.adler=r.wrap===2?0:1,r.last_flush=-2,ns(r),he},xa=e=>{const r=Ra(e);var t;return r===he&&((t=e.state).window_size=2*t.w_size,rt(t.head),t.max_lazy_match=Yt[t.level].max_lazy,t.good_match=Yt[t.level].good_length,t.nice_match=Yt[t.level].nice_length,t.max_chain_length=Yt[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),r},Pa=(e,r,t,i,n,o)=>{if(!e)return Ve;let a=1;if(r===ls&&(r=6),i<0?(a=0,i=-i):i>15&&(a=2,i-=16),n<1||n>9||t!==Sr||i<8||i>15||r<0||r>9||o<0||o>ps||i===8&&a!==1)return lt(e,Ve);i===8&&(i=9);const s=new vs;return e.state=s,s.strm=e,s.status=Tt,s.wrap=a,s.gzhead=null,s.w_bits=i,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=n+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<n+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=3*(s.lit_bufsize-1),s.level=r,s.strategy=o,s.method=t,xa(e)};var Kt={deflateInit:(e,r)=>Pa(e,r,Sr,15,8,ms),deflateInit2:Pa,deflateReset:xa,deflateResetKeep:Ra,deflateSetHeader:(e,r)=>Jt(e)||e.state.wrap!==2?Ve:(e.state.gzhead=r,he),deflate:(e,r)=>{if(Jt(e)||r>Sa||r<0)return e?lt(e,Ve):Ve;const t=e.state;if(!e.output||e.avail_in!==0&&!e.input||t.status===Ht&&r!==Oe)return lt(e,e.avail_out===0?hi:Ve);const i=t.last_flush;if(t.last_flush=r,t.pending!==0){if(Pe(e),e.avail_out===0)return t.last_flush=-1,he}else if(e.avail_in===0&&ka(r)<=ka(i)&&r!==Oe)return lt(e,hi);if(t.status===Ht&&e.avail_in!==0)return lt(e,hi);if(t.status===Tt&&t.wrap===0&&(t.status=dt),t.status===Tt){let n=Sr+(t.w_bits-8<<4)<<8,o=-1;if(o=t.strategy>=_r||t.level<2?0:t.level<6?1:t.level===6?2:3,n|=o<<6,t.strstart!==0&&(n|=32),n+=31-n%31,Xt(t,n),t.strstart!==0&&(Xt(t,e.adler>>>16),Xt(t,65535&e.adler)),e.adler=1,t.status=dt,Pe(e),t.pending!==0)return t.last_flush=-1,he}if(t.status===57){if(e.adler=0,ee(t,31),ee(t,139),ee(t,8),t.gzhead)ee(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),ee(t,255&t.gzhead.time),ee(t,t.gzhead.time>>8&255),ee(t,t.gzhead.time>>16&255),ee(t,t.gzhead.time>>24&255),ee(t,t.level===9?2:t.strategy>=_r||t.level<2?4:0),ee(t,255&t.gzhead.os),t.gzhead.extra&&t.gzhead.extra.length&&(ee(t,255&t.gzhead.extra.length),ee(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(e.adler=ce(e.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=69;else if(ee(t,0),ee(t,0),ee(t,0),ee(t,0),ee(t,0),ee(t,t.level===9?2:t.strategy>=_r||t.level<2?4:0),ee(t,3),t.status=dt,Pe(e),t.pending!==0)return t.last_flush=-1,he}if(t.status===69){if(t.gzhead.extra){let n=t.pending,o=(65535&t.gzhead.extra.length)-t.gzindex;for(;t.pending+o>t.pending_buf_size;){let s=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+s),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>n&&(e.adler=ce(e.adler,t.pending_buf,t.pending-n,n)),t.gzindex+=s,Pe(e),t.pending!==0)return t.last_flush=-1,he;n=0,o-=s}let a=new Uint8Array(t.gzhead.extra);t.pending_buf.set(a.subarray(t.gzindex,t.gzindex+o),t.pending),t.pending+=o,t.gzhead.hcrc&&t.pending>n&&(e.adler=ce(e.adler,t.pending_buf,t.pending-n,n)),t.gzindex=0}t.status=73}if(t.status===73){if(t.gzhead.name){let n,o=t.pending;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>o&&(e.adler=ce(e.adler,t.pending_buf,t.pending-o,o)),Pe(e),t.pending!==0)return t.last_flush=-1,he;o=0}n=t.gzindex<t.gzhead.name.length?255&t.gzhead.name.charCodeAt(t.gzindex++):0,ee(t,n)}while(n!==0);t.gzhead.hcrc&&t.pending>o&&(e.adler=ce(e.adler,t.pending_buf,t.pending-o,o)),t.gzindex=0}t.status=91}if(t.status===91){if(t.gzhead.comment){let n,o=t.pending;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>o&&(e.adler=ce(e.adler,t.pending_buf,t.pending-o,o)),Pe(e),t.pending!==0)return t.last_flush=-1,he;o=0}n=t.gzindex<t.gzhead.comment.length?255&t.gzhead.comment.charCodeAt(t.gzindex++):0,ee(t,n)}while(n!==0);t.gzhead.hcrc&&t.pending>o&&(e.adler=ce(e.adler,t.pending_buf,t.pending-o,o))}t.status=103}if(t.status===103){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(Pe(e),t.pending!==0))return t.last_flush=-1,he;ee(t,255&e.adler),ee(t,e.adler>>8&255),e.adler=0}if(t.status=dt,Pe(e),t.pending!==0)return t.last_flush=-1,he}if(e.avail_in!==0||t.lookahead!==0||r!==tt&&t.status!==Ht){let n=t.level===0?Ea(t,r):t.strategy===_r?((o,a)=>{let s;for(;;){if(o.lookahead===0&&(kt(o),o.lookahead===0)){if(a===tt)return 1;break}if(o.match_length=0,s=et(o,0,o.window[o.strstart]),o.lookahead--,o.strstart++,s&&(Ae(o,!1),o.strm.avail_out===0))return 1}return o.insert=0,a===Oe?(Ae(o,!0),o.strm.avail_out===0?3:4):o.sym_next&&(Ae(o,!1),o.strm.avail_out===0)?1:2})(t,r):t.strategy===hs?((o,a)=>{let s,d,c,l;const u=o.window;for(;;){if(o.lookahead<=ct){if(kt(o),o.lookahead<=ct&&a===tt)return 1;if(o.lookahead===0)break}if(o.match_length=0,o.lookahead>=3&&o.strstart>0&&(c=o.strstart-1,d=u[c],d===u[++c]&&d===u[++c]&&d===u[++c])){l=o.strstart+ct;do;while(d===u[++c]&&d===u[++c]&&d===u[++c]&&d===u[++c]&&d===u[++c]&&d===u[++c]&&d===u[++c]&&d===u[++c]&&c<l);o.match_length=ct-(l-c),o.match_length>o.lookahead&&(o.match_length=o.lookahead)}if(o.match_length>=3?(s=et(o,1,o.match_length-3),o.lookahead-=o.match_length,o.strstart+=o.match_length,o.match_length=0):(s=et(o,0,o.window[o.strstart]),o.lookahead--,o.strstart++),s&&(Ae(o,!1),o.strm.avail_out===0))return 1}return o.insert=0,a===Oe?(Ae(o,!0),o.strm.avail_out===0?3:4):o.sym_next&&(Ae(o,!1),o.strm.avail_out===0)?1:2})(t,r):Yt[t.level].func(t,r);if(n!==3&&n!==4||(t.status=Ht),n===1||n===3)return e.avail_out===0&&(t.last_flush=-1),he;if(n===2&&(r===ss?os(t):r!==Sa&&(ui(t,0,0,!1),r===cs&&(rt(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),Pe(e),e.avail_out===0))return t.last_flush=-1,he}return r!==Oe?he:t.wrap<=0?Ta:(t.wrap===2?(ee(t,255&e.adler),ee(t,e.adler>>8&255),ee(t,e.adler>>16&255),ee(t,e.adler>>24&255),ee(t,255&e.total_in),ee(t,e.total_in>>8&255),ee(t,e.total_in>>16&255),ee(t,e.total_in>>24&255)):(Xt(t,e.adler>>>16),Xt(t,65535&e.adler)),Pe(e),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?he:Ta)},deflateEnd:e=>{if(Jt(e))return Ve;const r=e.state.status;return e.state=null,r===dt?lt(e,ds):he},deflateSetDictionary:(e,r)=>{let t=r.length;if(Jt(e))return Ve;const i=e.state,n=i.wrap;if(n===2||n===1&&i.status!==Tt||i.lookahead)return Ve;if(n===1&&(e.adler=Wt(e.adler,r,t,0)),i.wrap=0,t>=i.w_size){n===0&&(rt(i.head),i.strstart=0,i.block_start=0,i.insert=0);let d=new Uint8Array(i.w_size);d.set(r.subarray(t-i.w_size,t),0),r=d,t=i.w_size}const o=e.avail_in,a=e.next_in,s=e.input;for(e.avail_in=t,e.next_in=0,e.input=r,kt(i);i.lookahead>=3;){let d=i.strstart,c=i.lookahead-2;do i.ins_h=it(i,i.ins_h,i.window[d+3-1]),i.prev[d&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=d,d++;while(--c);i.strstart=d,i.lookahead=2,kt(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,e.next_in=a,e.input=s,e.avail_in=o,i.wrap=n,he},deflateInfo:"pako deflate (from Nodeca project)"};const ws=(e,r)=>Object.prototype.hasOwnProperty.call(e,r);var Aa=function(e){const r=Array.prototype.slice.call(arguments,1);for(;r.length;){const t=r.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const i in t)ws(t,i)&&(e[i]=t[i])}}return e},Ia=e=>{let r=0;for(let i=0,n=e.length;i<n;i++)r+=e[i].length;const t=new Uint8Array(r);for(let i=0,n=0,o=e.length;i<o;i++){let a=e[i];t.set(a,n),n+=a.length}return t};let Da=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Da=!1}const $t=new Uint8Array(256);for(let e=0;e<256;e++)$t[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;$t[254]=$t[254]=1;var fi=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let r,t,i,n,o,a=e.length,s=0;for(n=0;n<a;n++)t=e.charCodeAt(n),(64512&t)==55296&&n+1<a&&(i=e.charCodeAt(n+1),(64512&i)==56320&&(t=65536+(t-55296<<10)+(i-56320),n++)),s+=t<128?1:t<2048?2:t<65536?3:4;for(r=new Uint8Array(s),o=0,n=0;o<s;n++)t=e.charCodeAt(n),(64512&t)==55296&&n+1<a&&(i=e.charCodeAt(n+1),(64512&i)==56320&&(t=65536+(t-55296<<10)+(i-56320),n++)),t<128?r[o++]=t:t<2048?(r[o++]=192|t>>>6,r[o++]=128|63&t):t<65536?(r[o++]=224|t>>>12,r[o++]=128|t>>>6&63,r[o++]=128|63&t):(r[o++]=240|t>>>18,r[o++]=128|t>>>12&63,r[o++]=128|t>>>6&63,r[o++]=128|63&t);return r},ys=(e,r)=>{const t=r||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,r));let i,n;const o=new Array(2*t);for(n=0,i=0;i<t;){let a=e[i++];if(a<128){o[n++]=a;continue}let s=$t[a];if(s>4)o[n++]=65533,i+=s-1;else{for(a&=s===2?31:s===3?15:7;s>1&&i<t;)a=a<<6|63&e[i++],s--;s>1?o[n++]=65533:a<65536?o[n++]=a:(a-=65536,o[n++]=55296|a>>10&1023,o[n++]=56320|1023&a)}}return((a,s)=>{if(s<65534&&a.subarray&&Da)return String.fromCharCode.apply(null,a.length===s?a:a.subarray(0,s));let d="";for(let c=0;c<s;c++)d+=String.fromCharCode(a[c]);return d})(o,n)},bs=(e,r)=>{(r=r||e.length)>e.length&&(r=e.length);let t=r-1;for(;t>=0&&(192&e[t])==128;)t--;return t<0||t===0?r:t+$t[e[t]]>r?t:r},La=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Oa=Object.prototype.toString,{Z_NO_FLUSH:_s,Z_SYNC_FLUSH:Ss,Z_FULL_FLUSH:Ts,Z_FINISH:ks,Z_OK:Tr,Z_STREAM_END:Cs,Z_DEFAULT_COMPRESSION:Es,Z_DEFAULT_STRATEGY:Rs,Z_DEFLATED:xs}=Zt;function qt(e){this.options=Aa({level:Es,method:xs,chunkSize:16384,windowBits:15,memLevel:8,strategy:Rs},e||{});let r=this.options;r.raw&&r.windowBits>0?r.windowBits=-r.windowBits:r.gzip&&r.windowBits>0&&r.windowBits<16&&(r.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new La,this.strm.avail_out=0;let t=Kt.deflateInit2(this.strm,r.level,r.method,r.windowBits,r.memLevel,r.strategy);if(t!==Tr)throw new Error(st[t]);if(r.header&&Kt.deflateSetHeader(this.strm,r.header),r.dictionary){let i;if(i=typeof r.dictionary=="string"?fi(r.dictionary):Oa.call(r.dictionary)==="[object ArrayBuffer]"?new Uint8Array(r.dictionary):r.dictionary,t=Kt.deflateSetDictionary(this.strm,i),t!==Tr)throw new Error(st[t]);this._dict_set=!0}}function gi(e,r){const t=new qt(r);if(t.push(e,!0),t.err)throw t.msg||st[t.err];return t.result}qt.prototype.push=function(e,r){const t=this.strm,i=this.options.chunkSize;let n,o;if(this.ended)return!1;for(o=r===~~r?r:r===!0?ks:_s,typeof e=="string"?t.input=fi(e):Oa.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;)if(t.avail_out===0&&(t.output=new Uint8Array(i),t.next_out=0,t.avail_out=i),(o===Ss||o===Ts)&&t.avail_out<=6)this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;else{if(n=Kt.deflate(t,o),n===Cs)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),n=Kt.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===Tr;if(t.avail_out!==0){if(o>0&&t.next_out>0)this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;else if(t.avail_in===0)break}else this.onData(t.output)}return!0},qt.prototype.onData=function(e){this.chunks.push(e)},qt.prototype.onEnd=function(e){e===Tr&&(this.result=Ia(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Ps={Deflate:qt,deflate:gi,deflateRaw:function(e,r){return(r=r||{}).raw=!0,gi(e,r)},gzip:function(e,r){return(r=r||{}).gzip=!0,gi(e,r)}};const kr=16209;var As=function(e,r){let t,i,n,o,a,s,d,c,l,u,h,p,w,C,f,v,g,b,x,A,R,k,_,T;const E=e.state;t=e.next_in,_=e.input,i=t+(e.avail_in-5),n=e.next_out,T=e.output,o=n-(r-e.avail_out),a=n+(e.avail_out-257),s=E.dmax,d=E.wsize,c=E.whave,l=E.wnext,u=E.window,h=E.hold,p=E.bits,w=E.lencode,C=E.distcode,f=(1<<E.lenbits)-1,v=(1<<E.distbits)-1;e:do{p<15&&(h+=_[t++]<<p,p+=8,h+=_[t++]<<p,p+=8),g=w[h&f];t:for(;;){if(b=g>>>24,h>>>=b,p-=b,b=g>>>16&255,b===0)T[n++]=65535&g;else{if(!(16&b)){if(64&b){if(32&b){E.mode=16191;break e}e.msg="invalid literal/length code",E.mode=kr;break e}g=w[(65535&g)+(h&(1<<b)-1)];continue t}for(x=65535&g,b&=15,b&&(p<b&&(h+=_[t++]<<p,p+=8),x+=h&(1<<b)-1,h>>>=b,p-=b),p<15&&(h+=_[t++]<<p,p+=8,h+=_[t++]<<p,p+=8),g=C[h&v];;){if(b=g>>>24,h>>>=b,p-=b,b=g>>>16&255,16&b){if(A=65535&g,b&=15,p<b&&(h+=_[t++]<<p,p+=8,p<b&&(h+=_[t++]<<p,p+=8)),A+=h&(1<<b)-1,A>s){e.msg="invalid distance too far back",E.mode=kr;break e}if(h>>>=b,p-=b,b=n-o,A>b){if(b=A-b,b>c&&E.sane){e.msg="invalid distance too far back",E.mode=kr;break e}if(R=0,k=u,l===0){if(R+=d-b,b<x){x-=b;do T[n++]=u[R++];while(--b);R=n-A,k=T}}else if(l<b){if(R+=d+l-b,b-=l,b<x){x-=b;do T[n++]=u[R++];while(--b);if(R=0,l<x){b=l,x-=b;do T[n++]=u[R++];while(--b);R=n-A,k=T}}}else if(R+=l-b,b<x){x-=b;do T[n++]=u[R++];while(--b);R=n-A,k=T}for(;x>2;)T[n++]=k[R++],T[n++]=k[R++],T[n++]=k[R++],x-=3;x&&(T[n++]=k[R++],x>1&&(T[n++]=k[R++]))}else{R=n-A;do T[n++]=T[R++],T[n++]=T[R++],T[n++]=T[R++],x-=3;while(x>2);x&&(T[n++]=T[R++],x>1&&(T[n++]=T[R++]))}break}if(64&b){e.msg="invalid distance code",E.mode=kr;break e}g=C[(65535&g)+(h&(1<<b)-1)]}}break}}while(t<i&&n<a);x=p>>3,t-=x,p-=x<<3,h&=(1<<p)-1,e.next_in=t,e.next_out=n,e.avail_in=t<i?i-t+5:5-(t-i),e.avail_out=n<a?a-n+257:257-(n-a),E.hold=h,E.bits=p};const Cr=15,Is=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Ds=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Ls=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Os=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var Qt=(e,r,t,i,n,o,a,s)=>{const d=s.bits;let c,l,u,h,p,w,C=0,f=0,v=0,g=0,b=0,x=0,A=0,R=0,k=0,_=0,T=null;const E=new Uint16Array(16),K=new Uint16Array(16);let B,H,W,$=null;for(C=0;C<=Cr;C++)E[C]=0;for(f=0;f<i;f++)E[r[t+f]]++;for(b=d,g=Cr;g>=1&&E[g]===0;g--);if(b>g&&(b=g),g===0)return n[o++]=20971520,n[o++]=20971520,s.bits=1,0;for(v=1;v<g&&E[v]===0;v++);for(b<v&&(b=v),R=1,C=1;C<=Cr;C++)if(R<<=1,R-=E[C],R<0)return-1;if(R>0&&(e===0||g!==1))return-1;for(K[1]=0,C=1;C<Cr;C++)K[C+1]=K[C]+E[C];for(f=0;f<i;f++)r[t+f]!==0&&(a[K[r[t+f]]++]=f);if(e===0?(T=$=a,w=20):e===1?(T=Is,$=Ds,w=257):(T=Ls,$=Os,w=0),_=0,f=0,C=v,p=o,x=b,A=0,u=-1,k=1<<b,h=k-1,e===1&&k>852||e===2&&k>592)return 1;for(;;){B=C-A,a[f]+1<w?(H=0,W=a[f]):a[f]>=w?(H=$[a[f]-w],W=T[a[f]-w]):(H=96,W=0),c=1<<C-A,l=1<<x,v=l;do l-=c,n[p+(_>>A)+l]=B<<24|H<<16|W;while(l!==0);for(c=1<<C-1;_&c;)c>>=1;if(c!==0?(_&=c-1,_+=c):_=0,f++,--E[C]==0){if(C===g)break;C=r[t+a[f]]}if(C>b&&(_&h)!==u){for(A===0&&(A=b),p+=v,x=C-A,R=1<<x;x+A<g&&(R-=E[x+A],!(R<=0));)x++,R<<=1;if(k+=1<<x,e===1&&k>852||e===2&&k>592)return 1;u=_&h,n[u]=b<<24|x<<16|p-o}}return _!==0&&(n[p+_]=C-A<<24|64<<16),s.bits=b,0};const{Z_FINISH:Ma,Z_BLOCK:Ms,Z_TREES:Er,Z_OK:ut,Z_STREAM_END:Bs,Z_NEED_DICT:Ns,Z_STREAM_ERROR:Me,Z_DATA_ERROR:Ba,Z_MEM_ERROR:Na,Z_BUF_ERROR:Fs,Z_DEFLATED:Fa}=Zt,Rr=16180,xr=16190,Ke=16191,vi=16192,wi=16194,Pr=16199,Ar=16200,yi=16206,ne=16209,ja=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function js(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const ht=e=>{if(!e)return 1;const r=e.state;return!r||r.strm!==e||r.mode<Rr||r.mode>16211?1:0},za=e=>{if(ht(e))return Me;const r=e.state;return e.total_in=e.total_out=r.total=0,e.msg="",r.wrap&&(e.adler=1&r.wrap),r.mode=Rr,r.last=0,r.havedict=0,r.flags=-1,r.dmax=32768,r.head=null,r.hold=0,r.bits=0,r.lencode=r.lendyn=new Int32Array(852),r.distcode=r.distdyn=new Int32Array(592),r.sane=1,r.back=-1,ut},Va=e=>{if(ht(e))return Me;const r=e.state;return r.wsize=0,r.whave=0,r.wnext=0,za(e)},Ga=(e,r)=>{let t;if(ht(e))return Me;const i=e.state;return r<0?(t=0,r=-r):(t=5+(r>>4),r<48&&(r&=15)),r&&(r<8||r>15)?Me:(i.window!==null&&i.wbits!==r&&(i.window=null),i.wrap=t,i.wbits=r,Va(e))},Ua=(e,r)=>{if(!e)return Me;const t=new js;e.state=t,t.strm=e,t.window=null,t.mode=Rr;const i=Ga(e,r);return i!==ut&&(e.state=null),i};let bi,_i,Wa=!0;const zs=e=>{if(Wa){bi=new Int32Array(512),_i=new Int32Array(32);let r=0;for(;r<144;)e.lens[r++]=8;for(;r<256;)e.lens[r++]=9;for(;r<280;)e.lens[r++]=7;for(;r<288;)e.lens[r++]=8;for(Qt(1,e.lens,0,288,bi,0,e.work,{bits:9}),r=0;r<32;)e.lens[r++]=5;Qt(2,e.lens,0,32,_i,0,e.work,{bits:5}),Wa=!1}e.lencode=bi,e.lenbits=9,e.distcode=_i,e.distbits=5},Za=(e,r,t,i)=>{let n;const o=e.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),i>=o.wsize?(o.window.set(r.subarray(t-o.wsize,t),0),o.wnext=0,o.whave=o.wsize):(n=o.wsize-o.wnext,n>i&&(n=i),o.window.set(r.subarray(t-i,t-i+n),o.wnext),(i-=n)?(o.window.set(r.subarray(t-i,t),0),o.wnext=i,o.whave=o.wsize):(o.wnext+=n,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=n))),0};var $e={inflateReset:Va,inflateReset2:Ga,inflateResetKeep:za,inflateInit:e=>Ua(e,15),inflateInit2:Ua,inflate:(e,r)=>{let t,i,n,o,a,s,d,c,l,u,h,p,w,C,f,v,g,b,x,A,R,k,_=0;const T=new Uint8Array(4);let E,K;const B=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(ht(e)||!e.output||!e.input&&e.avail_in!==0)return Me;t=e.state,t.mode===Ke&&(t.mode=vi),a=e.next_out,n=e.output,d=e.avail_out,o=e.next_in,i=e.input,s=e.avail_in,c=t.hold,l=t.bits,u=s,h=d,k=ut;e:for(;;)switch(t.mode){case Rr:if(t.wrap===0){t.mode=vi;break}for(;l<16;){if(s===0)break e;s--,c+=i[o++]<<l,l+=8}if(2&t.wrap&&c===35615){t.wbits===0&&(t.wbits=15),t.check=0,T[0]=255&c,T[1]=c>>>8&255,t.check=ce(t.check,T,2,0),c=0,l=0,t.mode=16181;break}if(t.head&&(t.head.done=!1),!(1&t.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",t.mode=ne;break}if((15&c)!==Fa){e.msg="unknown compression method",t.mode=ne;break}if(c>>>=4,l-=4,R=8+(15&c),t.wbits===0&&(t.wbits=R),R>15||R>t.wbits){e.msg="invalid window size",t.mode=ne;break}t.dmax=1<<t.wbits,t.flags=0,e.adler=t.check=1,t.mode=512&c?16189:Ke,c=0,l=0;break;case 16181:for(;l<16;){if(s===0)break e;s--,c+=i[o++]<<l,l+=8}if(t.flags=c,(255&t.flags)!==Fa){e.msg="unknown compression method",t.mode=ne;break}if(57344&t.flags){e.msg="unknown header flags set",t.mode=ne;break}t.head&&(t.head.text=c>>8&1),512&t.flags&&4&t.wrap&&(T[0]=255&c,T[1]=c>>>8&255,t.check=ce(t.check,T,2,0)),c=0,l=0,t.mode=16182;case 16182:for(;l<32;){if(s===0)break e;s--,c+=i[o++]<<l,l+=8}t.head&&(t.head.time=c),512&t.flags&&4&t.wrap&&(T[0]=255&c,T[1]=c>>>8&255,T[2]=c>>>16&255,T[3]=c>>>24&255,t.check=ce(t.check,T,4,0)),c=0,l=0,t.mode=16183;case 16183:for(;l<16;){if(s===0)break e;s--,c+=i[o++]<<l,l+=8}t.head&&(t.head.xflags=255&c,t.head.os=c>>8),512&t.flags&&4&t.wrap&&(T[0]=255&c,T[1]=c>>>8&255,t.check=ce(t.check,T,2,0)),c=0,l=0,t.mode=16184;case 16184:if(1024&t.flags){for(;l<16;){if(s===0)break e;s--,c+=i[o++]<<l,l+=8}t.length=c,t.head&&(t.head.extra_len=c),512&t.flags&&4&t.wrap&&(T[0]=255&c,T[1]=c>>>8&255,t.check=ce(t.check,T,2,0)),c=0,l=0}else t.head&&(t.head.extra=null);t.mode=16185;case 16185:if(1024&t.flags&&(p=t.length,p>s&&(p=s),p&&(t.head&&(R=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(i.subarray(o,o+p),R)),512&t.flags&&4&t.wrap&&(t.check=ce(t.check,i,p,o)),s-=p,o+=p,t.length-=p),t.length))break e;t.length=0,t.mode=16186;case 16186:if(2048&t.flags){if(s===0)break e;p=0;do R=i[o+p++],t.head&&R&&t.length<65536&&(t.head.name+=String.fromCharCode(R));while(R&&p<s);if(512&t.flags&&4&t.wrap&&(t.check=ce(t.check,i,p,o)),s-=p,o+=p,R)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=16187;case 16187:if(4096&t.flags){if(s===0)break e;p=0;do R=i[o+p++],t.head&&R&&t.length<65536&&(t.head.comment+=String.fromCharCode(R));while(R&&p<s);if(512&t.flags&&4&t.wrap&&(t.check=ce(t.check,i,p,o)),s-=p,o+=p,R)break e}else t.head&&(t.head.comment=null);t.mode=16188;case 16188:if(512&t.flags){for(;l<16;){if(s===0)break e;s--,c+=i[o++]<<l,l+=8}if(4&t.wrap&&c!==(65535&t.check)){e.msg="header crc mismatch",t.mode=ne;break}c=0,l=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),e.adler=t.check=0,t.mode=Ke;break;case 16189:for(;l<32;){if(s===0)break e;s--,c+=i[o++]<<l,l+=8}e.adler=t.check=ja(c),c=0,l=0,t.mode=xr;case xr:if(t.havedict===0)return e.next_out=a,e.avail_out=d,e.next_in=o,e.avail_in=s,t.hold=c,t.bits=l,Ns;e.adler=t.check=1,t.mode=Ke;case Ke:if(r===Ms||r===Er)break e;case vi:if(t.last){c>>>=7&l,l-=7&l,t.mode=yi;break}for(;l<3;){if(s===0)break e;s--,c+=i[o++]<<l,l+=8}switch(t.last=1&c,c>>>=1,l-=1,3&c){case 0:t.mode=16193;break;case 1:if(zs(t),t.mode=Pr,r===Er){c>>>=2,l-=2;break e}break;case 2:t.mode=16196;break;case 3:e.msg="invalid block type",t.mode=ne}c>>>=2,l-=2;break;case 16193:for(c>>>=7&l,l-=7&l;l<32;){if(s===0)break e;s--,c+=i[o++]<<l,l+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",t.mode=ne;break}if(t.length=65535&c,c=0,l=0,t.mode=wi,r===Er)break e;case wi:t.mode=16195;case 16195:if(p=t.length,p){if(p>s&&(p=s),p>d&&(p=d),p===0)break e;n.set(i.subarray(o,o+p),a),s-=p,o+=p,d-=p,a+=p,t.length-=p;break}t.mode=Ke;break;case 16196:for(;l<14;){if(s===0)break e;s--,c+=i[o++]<<l,l+=8}if(t.nlen=257+(31&c),c>>>=5,l-=5,t.ndist=1+(31&c),c>>>=5,l-=5,t.ncode=4+(15&c),c>>>=4,l-=4,t.nlen>286||t.ndist>30){e.msg="too many length or distance symbols",t.mode=ne;break}t.have=0,t.mode=16197;case 16197:for(;t.have<t.ncode;){for(;l<3;){if(s===0)break e;s--,c+=i[o++]<<l,l+=8}t.lens[B[t.have++]]=7&c,c>>>=3,l-=3}for(;t.have<19;)t.lens[B[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,E={bits:t.lenbits},k=Qt(0,t.lens,0,19,t.lencode,0,t.work,E),t.lenbits=E.bits,k){e.msg="invalid code lengths set",t.mode=ne;break}t.have=0,t.mode=16198;case 16198:for(;t.have<t.nlen+t.ndist;){for(;_=t.lencode[c&(1<<t.lenbits)-1],f=_>>>24,v=_>>>16&255,g=65535&_,!(f<=l);){if(s===0)break e;s--,c+=i[o++]<<l,l+=8}if(g<16)c>>>=f,l-=f,t.lens[t.have++]=g;else{if(g===16){for(K=f+2;l<K;){if(s===0)break e;s--,c+=i[o++]<<l,l+=8}if(c>>>=f,l-=f,t.have===0){e.msg="invalid bit length repeat",t.mode=ne;break}R=t.lens[t.have-1],p=3+(3&c),c>>>=2,l-=2}else if(g===17){for(K=f+3;l<K;){if(s===0)break e;s--,c+=i[o++]<<l,l+=8}c>>>=f,l-=f,R=0,p=3+(7&c),c>>>=3,l-=3}else{for(K=f+7;l<K;){if(s===0)break e;s--,c+=i[o++]<<l,l+=8}c>>>=f,l-=f,R=0,p=11+(127&c),c>>>=7,l-=7}if(t.have+p>t.nlen+t.ndist){e.msg="invalid bit length repeat",t.mode=ne;break}for(;p--;)t.lens[t.have++]=R}}if(t.mode===ne)break;if(t.lens[256]===0){e.msg="invalid code -- missing end-of-block",t.mode=ne;break}if(t.lenbits=9,E={bits:t.lenbits},k=Qt(1,t.lens,0,t.nlen,t.lencode,0,t.work,E),t.lenbits=E.bits,k){e.msg="invalid literal/lengths set",t.mode=ne;break}if(t.distbits=6,t.distcode=t.distdyn,E={bits:t.distbits},k=Qt(2,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,E),t.distbits=E.bits,k){e.msg="invalid distances set",t.mode=ne;break}if(t.mode=Pr,r===Er)break e;case Pr:t.mode=Ar;case Ar:if(s>=6&&d>=258){e.next_out=a,e.avail_out=d,e.next_in=o,e.avail_in=s,t.hold=c,t.bits=l,As(e,h),a=e.next_out,n=e.output,d=e.avail_out,o=e.next_in,i=e.input,s=e.avail_in,c=t.hold,l=t.bits,t.mode===Ke&&(t.back=-1);break}for(t.back=0;_=t.lencode[c&(1<<t.lenbits)-1],f=_>>>24,v=_>>>16&255,g=65535&_,!(f<=l);){if(s===0)break e;s--,c+=i[o++]<<l,l+=8}if(v&&!(240&v)){for(b=f,x=v,A=g;_=t.lencode[A+((c&(1<<b+x)-1)>>b)],f=_>>>24,v=_>>>16&255,g=65535&_,!(b+f<=l);){if(s===0)break e;s--,c+=i[o++]<<l,l+=8}c>>>=b,l-=b,t.back+=b}if(c>>>=f,l-=f,t.back+=f,t.length=g,v===0){t.mode=16205;break}if(32&v){t.back=-1,t.mode=Ke;break}if(64&v){e.msg="invalid literal/length code",t.mode=ne;break}t.extra=15&v,t.mode=16201;case 16201:if(t.extra){for(K=t.extra;l<K;){if(s===0)break e;s--,c+=i[o++]<<l,l+=8}t.length+=c&(1<<t.extra)-1,c>>>=t.extra,l-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=16202;case 16202:for(;_=t.distcode[c&(1<<t.distbits)-1],f=_>>>24,v=_>>>16&255,g=65535&_,!(f<=l);){if(s===0)break e;s--,c+=i[o++]<<l,l+=8}if(!(240&v)){for(b=f,x=v,A=g;_=t.distcode[A+((c&(1<<b+x)-1)>>b)],f=_>>>24,v=_>>>16&255,g=65535&_,!(b+f<=l);){if(s===0)break e;s--,c+=i[o++]<<l,l+=8}c>>>=b,l-=b,t.back+=b}if(c>>>=f,l-=f,t.back+=f,64&v){e.msg="invalid distance code",t.mode=ne;break}t.offset=g,t.extra=15&v,t.mode=16203;case 16203:if(t.extra){for(K=t.extra;l<K;){if(s===0)break e;s--,c+=i[o++]<<l,l+=8}t.offset+=c&(1<<t.extra)-1,c>>>=t.extra,l-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){e.msg="invalid distance too far back",t.mode=ne;break}t.mode=16204;case 16204:if(d===0)break e;if(p=h-d,t.offset>p){if(p=t.offset-p,p>t.whave&&t.sane){e.msg="invalid distance too far back",t.mode=ne;break}p>t.wnext?(p-=t.wnext,w=t.wsize-p):w=t.wnext-p,p>t.length&&(p=t.length),C=t.window}else C=n,w=a-t.offset,p=t.length;p>d&&(p=d),d-=p,t.length-=p;do n[a++]=C[w++];while(--p);t.length===0&&(t.mode=Ar);break;case 16205:if(d===0)break e;n[a++]=t.length,d--,t.mode=Ar;break;case yi:if(t.wrap){for(;l<32;){if(s===0)break e;s--,c|=i[o++]<<l,l+=8}if(h-=d,e.total_out+=h,t.total+=h,4&t.wrap&&h&&(e.adler=t.check=t.flags?ce(t.check,n,h,a-h):Wt(t.check,n,h,a-h)),h=d,4&t.wrap&&(t.flags?c:ja(c))!==t.check){e.msg="incorrect data check",t.mode=ne;break}c=0,l=0}t.mode=16207;case 16207:if(t.wrap&&t.flags){for(;l<32;){if(s===0)break e;s--,c+=i[o++]<<l,l+=8}if(4&t.wrap&&c!==(4294967295&t.total)){e.msg="incorrect length check",t.mode=ne;break}c=0,l=0}t.mode=16208;case 16208:k=Bs;break e;case ne:k=Ba;break e;case 16210:return Na;default:return Me}return e.next_out=a,e.avail_out=d,e.next_in=o,e.avail_in=s,t.hold=c,t.bits=l,(t.wsize||h!==e.avail_out&&t.mode<ne&&(t.mode<yi||r!==Ma))&&Za(e,e.output,e.next_out,h-e.avail_out),u-=e.avail_in,h-=e.avail_out,e.total_in+=u,e.total_out+=h,t.total+=h,4&t.wrap&&h&&(e.adler=t.check=t.flags?ce(t.check,n,h,e.next_out-h):Wt(t.check,n,h,e.next_out-h)),e.data_type=t.bits+(t.last?64:0)+(t.mode===Ke?128:0)+(t.mode===Pr||t.mode===wi?256:0),(u===0&&h===0||r===Ma)&&k===ut&&(k=Fs),k},inflateEnd:e=>{if(ht(e))return Me;let r=e.state;return r.window&&(r.window=null),e.state=null,ut},inflateGetHeader:(e,r)=>{if(ht(e))return Me;const t=e.state;return 2&t.wrap?(t.head=r,r.done=!1,ut):Me},inflateSetDictionary:(e,r)=>{const t=r.length;let i,n,o;return ht(e)?Me:(i=e.state,i.wrap!==0&&i.mode!==xr?Me:i.mode===xr&&(n=1,n=Wt(n,r,t,0),n!==i.check)?Ba:(o=Za(e,r,t,t),o?(i.mode=16210,Na):(i.havedict=1,ut)))},inflateInfo:"pako inflate (from Nodeca project)"},Vs=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Ha=Object.prototype.toString,{Z_NO_FLUSH:Gs,Z_FINISH:Us,Z_OK:er,Z_STREAM_END:Si,Z_NEED_DICT:Ti,Z_STREAM_ERROR:Ws,Z_DATA_ERROR:Xa,Z_MEM_ERROR:Zs}=Zt;function tr(e){this.options=Aa({chunkSize:65536,windowBits:15,to:""},e||{});const r=this.options;r.raw&&r.windowBits>=0&&r.windowBits<16&&(r.windowBits=-r.windowBits,r.windowBits===0&&(r.windowBits=-15)),!(r.windowBits>=0&&r.windowBits<16)||e&&e.windowBits||(r.windowBits+=32),r.windowBits>15&&r.windowBits<48&&(15&r.windowBits||(r.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new La,this.strm.avail_out=0;let t=$e.inflateInit2(this.strm,r.windowBits);if(t!==er)throw new Error(st[t]);if(this.header=new Vs,$e.inflateGetHeader(this.strm,this.header),r.dictionary&&(typeof r.dictionary=="string"?r.dictionary=fi(r.dictionary):Ha.call(r.dictionary)==="[object ArrayBuffer]"&&(r.dictionary=new Uint8Array(r.dictionary)),r.raw&&(t=$e.inflateSetDictionary(this.strm,r.dictionary),t!==er)))throw new Error(st[t])}function ki(e,r){const t=new tr(r);if(t.push(e),t.err)throw t.msg||st[t.err];return t.result}tr.prototype.push=function(e,r){const t=this.strm,i=this.options.chunkSize,n=this.options.dictionary;let o,a,s;if(this.ended)return!1;for(a=r===~~r?r:r===!0?Us:Gs,Ha.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(i),t.next_out=0,t.avail_out=i),o=$e.inflate(t,a),o===Ti&&n&&(o=$e.inflateSetDictionary(t,n),o===er?o=$e.inflate(t,a):o===Xa&&(o=Ti));t.avail_in>0&&o===Si&&t.state.wrap>0&&e[t.next_in]!==0;)$e.inflateReset(t),o=$e.inflate(t,a);switch(o){case Ws:case Xa:case Ti:case Zs:return this.onEnd(o),this.ended=!0,!1}if(s=t.avail_out,t.next_out&&(t.avail_out===0||o===Si))if(this.options.to==="string"){let d=bs(t.output,t.next_out),c=t.next_out-d,l=ys(t.output,d);t.next_out=c,t.avail_out=i-c,c&&t.output.set(t.output.subarray(d,d+c),0),this.onData(l)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(o!==er||s!==0){if(o===Si)return o=$e.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(t.avail_in===0)break}}return!0},tr.prototype.onData=function(e){this.chunks.push(e)},tr.prototype.onEnd=function(e){e===er&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Ia(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Hs={Inflate:tr,inflate:ki,inflateRaw:function(e,r){return(r=r||{}).raw=!0,ki(e,r)},ungzip:ki};const{Deflate:Xs,deflate:Ys,deflateRaw:Js,gzip:Ks}=Ps,{Inflate:$s,inflate:qs,inflateRaw:Qs,ungzip:ec}=Hs;var tc={Deflate:Xs,deflate:Ys,deflateRaw:Js,gzip:Ks,Inflate:$s,inflate:qs,inflateRaw:Qs,ungzip:ec,constants:Zt},rc="1.2.6",We=ft(function(e){e.exports=function(r){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return r[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=r,i.c=t,i.d=function(n,o,a){i.o(n,o)||Object.defineProperty(n,o,{configurable:!1,enumerable:!0,get:a})},i.n=function(n){var o=n&&n.__esModule?function(){return n.default}:function(){return n};return i.d(o,"a",o),o},i.o=function(n,o){return Object.prototype.hasOwnProperty.call(n,o)},i.p="",i(i.s=1)}([function(r,t,i){var n={MOBILE:"mobile",TABLET:"tablet",SMART_TV:"smarttv",CONSOLE:"console",WEARABLE:"wearable",BROWSER:void 0};r.exports={BROWSER_TYPES:{CHROME:"Chrome",FIREFOX:"Firefox",OPERA:"Opera",YANDEX:"Yandex",SAFARI:"Safari",INTERNET_EXPLORER:"Internet Explorer",EDGE:"Edge",CHROMIUM:"Chromium",IE:"IE",MOBILE_SAFARI:"Mobile Safari",EDGE_CHROMIUM:"Edge Chromium"},DEVICE_TYPES:n,OS_TYPES:{IOS:"iOS",ANDROID:"Android",WINDOWS_PHONE:"Windows Phone",WINDOWS:"Windows",MAC_OS:"Mac OS"},defaultData:{isMobile:!1,isTablet:!1,isBrowser:!1,isSmartTV:!1,isConsole:!1,isWearable:!1}}},function(r,t,i){var n,o=i(2),a=i(0),s=a.BROWSER_TYPES,d=a.OS_TYPES,c=a.DEVICE_TYPES,l=i(4),u=l.checkType,h=l.broPayload,p=l.mobilePayload,w=l.wearPayload,C=l.consolePayload,f=l.stvPayload,v=l.getNavigatorInstance,g=l.isIOS13Check,b=new o,x=b.getBrowser(),A=b.getDevice(),R=b.getEngine(),k=b.getOS(),_=b.getUA(),T=s.CHROME,E=s.CHROMIUM,K=s.IE,B=s.INTERNET_EXPLORER,H=s.OPERA,W=s.FIREFOX,$=s.SAFARI,J=s.EDGE,q=s.YANDEX,de=s.MOBILE_SAFARI,oe=c.MOBILE,le=c.TABLET,Ie=c.SMART_TV,pe=c.BROWSER,De=c.WEARABLE,Ze=c.CONSOLE,se=d.ANDROID,je=d.WINDOWS_PHONE,ge=d.IOS,qe=d.WINDOWS,me=d.MAC_OS,m=function(){return k.name===d.WINDOWS&&k.version==="10"&&typeof _=="string"&&_.indexOf("Edg/")!==-1},y=function(){return x.name===J},S=function(){return g("iPad")},P=A.type===Ie,M=A.type===Ze,I=A.type===De,L=x.name===de||S(),N=x.name===E,z=function(){switch(A.type){case oe:case le:return!0;default:return!1}}()||S(),F=A.type===oe,D=A.type===le||S(),re=A.type===pe,ae=k.name===se,X=k.name===je,be=k.name===ge||S(),j=x.name===T,ve=x.name===W,ke=x.name===$||x.name===de,Ce=x.name===H,Q=x.name===B||x.name===K,ue=k.version?k.version:"none",_e=k.name?k.name:"none",nt=x.major,rr=x.version,Ei=x.name,Dr=A.vendor?A.vendor:"none",ac=A.model?A.model:"none",oc=R.name,sc=R.version,cc=_,dc=y()||m(),lc=x.name===q,uc=A.type,hc=(n=v())&&(/iPad|iPhone|iPod/.test(n.platform)||n.platform==="MacIntel"&&n.maxTouchPoints>1)&&!window.MSStream,pc=S(),mc=g("iPhone"),fc=g("iPod"),gc=function(){var ir=v(),Lr=ir&&ir.userAgent.toLowerCase();return typeof Lr=="string"&&/electron/.test(Lr)}(),vc=m(),wc=y(),yc=k.name===qe,bc=k.name===me,pt=u(A.type);r.exports={deviceDetect:function(){var ir=pt.isBrowser,Lr=pt.isMobile,_c=pt.isTablet,$a=pt.isSmartTV,qa=pt.isConsole,Qa=pt.isWearable;return ir?h(ir,x,R,k,_):$a?f($a,R,k,_):qa?C(qa,R,k,_):Lr||_c?p(pt,A,k,_):Qa?w(Qa,R,k,_):void 0},isSmartTV:P,isConsole:M,isWearable:I,isMobileSafari:L,isChromium:N,isMobile:z,isMobileOnly:F,isTablet:D,isBrowser:re,isAndroid:ae,isWinPhone:X,isIOS:be,isChrome:j,isFirefox:ve,isSafari:ke,isOpera:Ce,isIE:Q,osVersion:ue,osName:_e,fullBrowserVersion:nt,browserVersion:rr,browserName:Ei,mobileVendor:Dr,mobileModel:ac,engineName:oc,engineVersion:sc,getUA:cc,isEdge:dc,isYandex:lc,deviceType:uc,isIOS13:hc,isIPad13:pc,isIPhone13:mc,isIPod13:fc,isElectron:gc,isEdgeChromium:vc,isLegacyEdge:wc,isWindows:yc,isMacOs:bc}},function(r,t,i){var n;/*!
 * UAParser.js v0.7.18
 * Lightweight JavaScript-based User-Agent string parser
 * https://github.com/faisalman/ua-parser-js
 *
 * Copyright Â© 2012-2016 Faisal Salman <fyzlman@gmail.com>
 * Dual licensed under GPLv2 or MIT
 */(function(o,a){var s="function",d="undefined",c="object",l="model",u="name",h="type",p="vendor",w="version",C="architecture",f="console",v="mobile",g="tablet",b="smarttv",x="wearable",A={extend:function(B,H){var W={};for(var $ in B)H[$]&&H[$].length%2==0?W[$]=H[$].concat(B[$]):W[$]=B[$];return W},has:function(B,H){return typeof B=="string"&&H.toLowerCase().indexOf(B.toLowerCase())!==-1},lowerize:function(B){return B.toLowerCase()},major:function(B){return typeof B=="string"?B.replace(/[^\d\.]/g,"").split(".")[0]:a},trim:function(B){return B.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},R={rgx:function(B,H){for(var W,$,J,q,de,oe,le=0;le<H.length&&!de;){var Ie=H[le],pe=H[le+1];for(W=$=0;W<Ie.length&&!de;)if(de=Ie[W++].exec(B))for(J=0;J<pe.length;J++)oe=de[++$],typeof(q=pe[J])===c&&q.length>0?q.length==2?typeof q[1]==s?this[q[0]]=q[1].call(this,oe):this[q[0]]=q[1]:q.length==3?typeof q[1]!==s||q[1].exec&&q[1].test?this[q[0]]=oe?oe.replace(q[1],q[2]):a:this[q[0]]=oe?q[1].call(this,oe,q[2]):a:q.length==4&&(this[q[0]]=oe?q[3].call(this,oe.replace(q[1],q[2])):a):this[q]=oe||a;le+=2}},str:function(B,H){for(var W in H)if(typeof H[W]===c&&H[W].length>0){for(var $=0;$<H[W].length;$++)if(A.has(H[W][$],B))return W==="?"?a:W}else if(A.has(H[W],B))return W==="?"?a:W;return B}},k={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},_={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[u,w],[/(opios)[\/\s]+([\w\.]+)/i],[[u,"Opera Mini"],w],[/\s(opr)\/([\w\.]+)/i],[[u,"Opera"],w],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark)\/([\w\.-]+)/i],[u,w],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[u,"IE"],w],[/(edge|edgios|edgea)\/((\d+)?[\w\.]+)/i],[[u,"Edge"],w],[/(yabrowser)\/([\w\.]+)/i],[[u,"Yandex"],w],[/(puffin)\/([\w\.]+)/i],[[u,"Puffin"],w],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[u,"UCBrowser"],w],[/(comodo_dragon)\/([\w\.]+)/i],[[u,/_/g," "],w],[/(micromessenger)\/([\w\.]+)/i],[[u,"WeChat"],w],[/(qqbrowserlite)\/([\w\.]+)/i],[u,w],[/(QQ)\/([\d\.]+)/i],[u,w],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[u,w],[/(BIDUBrowser)[\/\s]?([\w\.]+)/i],[u,w],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[u,w],[/(MetaSr)[\/\s]?([\w\.]+)/i],[u],[/(LBBROWSER)/i],[u],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[w,[u,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[w,[u,"Facebook"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[w,[u,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[u,/(.+)/,"$1 WebView"],w],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[u,/(.+(?:g|us))(.+)/,"$1 $2"],w],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[w,[u,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[u,w],[/(dolfin)\/([\w\.]+)/i],[[u,"Dolphin"],w],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[u,"Chrome"],w],[/(coast)\/([\w\.]+)/i],[[u,"Opera Coast"],w],[/fxios\/([\w\.-]+)/i],[w,[u,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[w,[u,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[w,u],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[u,"GSA"],w],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[u,[w,R.str,k.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[u,w],[/(navigator|netscape)\/([\w\.-]+)/i],[[u,"Netscape"],w],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[u,w]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[C,"amd64"]],[/(ia32(?=;))/i],[[C,A.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[C,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[C,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[C,/ower/,"",A.lowerize]],[/(sun4\w)[;\)]/i],[[C,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[C,A.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[l,p,[h,g]],[/applecoremedia\/[\w\.]+ \((ipad)/],[l,[p,"Apple"],[h,g]],[/(apple\s{0,1}tv)/i],[[l,"Apple TV"],[p,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[p,l,[h,g]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[l,[p,"Amazon"],[h,g]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[l,R.str,k.device.amazon.model],[p,"Amazon"],[h,v]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[l,p,[h,v]],[/\((ip[honed|\s\w*]+);/i],[l,[p,"Apple"],[h,v]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[p,l,[h,v]],[/\(bb10;\s(\w+)/i],[l,[p,"BlackBerry"],[h,v]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[l,[p,"Asus"],[h,g]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[p,"Sony"],[l,"Xperia Tablet"],[h,g]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[l,[p,"Sony"],[h,v]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[p,l,[h,f]],[/android.+;\s(shield)\sbuild/i],[l,[p,"Nvidia"],[h,f]],[/(playstation\s[34portablevi]+)/i],[l,[p,"Sony"],[h,f]],[/(sprint\s(\w+))/i],[[p,R.str,k.device.sprint.vendor],[l,R.str,k.device.sprint.model],[h,v]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[p,l,[h,g]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[p,[l,/_/g," "],[h,v]],[/(nexus\s9)/i],[l,[p,"HTC"],[h,g]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[l,[p,"Huawei"],[h,v]],[/(microsoft);\s(lumia[\s\w]+)/i],[p,l,[h,v]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[l,[p,"Microsoft"],[h,f]],[/(kin\.[onetw]{3})/i],[[l,/\./g," "],[p,"Microsoft"],[h,v]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[l,[p,"Motorola"],[h,v]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[l,[p,"Motorola"],[h,g]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[p,A.trim],[l,A.trim],[h,b]],[/hbbtv.+maple;(\d+)/i],[[l,/^/,"SmartTV"],[p,"Samsung"],[h,b]],[/\(dtv[\);].+(aquos)/i],[l,[p,"Sharp"],[h,b]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[p,"Samsung"],l,[h,g]],[/smart-tv.+(samsung)/i],[p,[h,b],l],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[p,"Samsung"],l,[h,v]],[/sie-(\w*)/i],[l,[p,"Siemens"],[h,v]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[p,"Nokia"],l,[h,v]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[l,[p,"Acer"],[h,g]],[/android.+([vl]k\-?\d{3})\s+build/i],[l,[p,"LG"],[h,g]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[p,"LG"],l,[h,g]],[/(lg) netcast\.tv/i],[p,l,[h,b]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[l,[p,"LG"],[h,v]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[l,[p,"Lenovo"],[h,g]],[/linux;.+((jolla));/i],[p,l,[h,v]],[/((pebble))app\/[\d\.]+\s/i],[p,l,[h,x]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[p,l,[h,v]],[/crkey/i],[[l,"Chromecast"],[p,"Google"]],[/android.+;\s(glass)\s\d/i],[l,[p,"Google"],[h,x]],[/android.+;\s(pixel c)\s/i],[l,[p,"Google"],[h,g]],[/android.+;\s(pixel xl|pixel)\s/i],[l,[p,"Google"],[h,v]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[l,/_/g," "],[p,"Xiaomi"],[h,v]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[l,/_/g," "],[p,"Xiaomi"],[h,g]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[l,[p,"Meizu"],[h,g]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})\s+build/i],[l,[p,"OnePlus"],[h,v]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[l,[p,"RCA"],[h,g]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[l,[p,"Dell"],[h,g]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[l,[p,"Verizon"],[h,g]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[p,"Barnes & Noble"],l,[h,g]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[l,[p,"NuVision"],[h,g]],[/android.+;\s(k88)\sbuild/i],[l,[p,"ZTE"],[h,g]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[l,[p,"Swiss"],[h,v]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[l,[p,"Swiss"],[h,g]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[l,[p,"Zeki"],[h,g]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[p,"Dragon Touch"],l,[h,g]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[l,[p,"Insignia"],[h,g]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[l,[p,"NextBook"],[h,g]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[p,"Voice"],l,[h,v]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[p,"LvTel"],l,[h,v]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[l,[p,"Envizen"],[h,g]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[p,l,[h,g]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[l,[p,"MachSpeed"],[h,g]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[p,l,[h,g]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[l,[p,"Rotor"],[h,g]],[/android.+(KS(.+))\s+build/i],[l,[p,"Amazon"],[h,g]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[p,l,[h,g]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[h,A.lowerize],p,l],[/(android[\w\.\s\-]{0,9});.+build/i],[l,[p,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[w,[u,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[u,w],[/rv\:([\w\.]{1,9}).+(gecko)/i],[w,u]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[u,w],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[u,[w,R.str,k.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[u,"Windows"],[w,R.str,k.os.windows.version]],[/\((bb)(10);/i],[[u,"BlackBerry"],w],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]*)/i,/linux;.+(sailfish);/i],[u,w],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[u,"Symbian"],w],[/\((series40);/i],[u],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[u,"Firefox OS"],w],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[u,w],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[u,"Chromium OS"],w],[/(sunos)\s?([\w\.\d]*)/i],[[u,"Solaris"],w],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[u,w],[/(haiku)\s(\w+)/i],[u,w],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[w,/_/g,"."],[u,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[u,"Mac OS"],[w,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]*)/i],[u,w]]},T=function(B,H){if(typeof B=="object"&&(H=B,B=a),!(this instanceof T))return new T(B,H).getResult();var W=B||(o&&o.navigator&&o.navigator.userAgent?o.navigator.userAgent:""),$=H?A.extend(_,H):_;return this.getBrowser=function(){var J={name:a,version:a};return R.rgx.call(J,W,$.browser),J.major=A.major(J.version),J},this.getCPU=function(){var J={architecture:a};return R.rgx.call(J,W,$.cpu),J},this.getDevice=function(){var J={vendor:a,model:a,type:a};return R.rgx.call(J,W,$.device),J},this.getEngine=function(){var J={name:a,version:a};return R.rgx.call(J,W,$.engine),J},this.getOS=function(){var J={name:a,version:a};return R.rgx.call(J,W,$.os),J},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return W},this.setUA=function(J){return W=J,this},this};T.VERSION="0.7.18",T.BROWSER={NAME:u,MAJOR:"major",VERSION:w},T.CPU={ARCHITECTURE:C},T.DEVICE={MODEL:l,VENDOR:p,TYPE:h,CONSOLE:f,MOBILE:v,SMARTTV:b,TABLET:g,WEARABLE:x,EMBEDDED:"embedded"},T.ENGINE={NAME:u,VERSION:w},T.OS={NAME:u,VERSION:w},typeof t!==d?(typeof r!==d&&r.exports&&(t=r.exports=T),t.UAParser=T):i(3)?(n=(function(){return T}).call(t,i,t,r))===a||(r.exports=n):o&&(o.UAParser=T);var E=o&&(o.jQuery||o.Zepto);if(typeof E!==d){var K=new T;E.ua=K.getResult(),E.ua.get=function(){return K.getUA()},E.ua.set=function(B){K.setUA(B);var H=K.getResult();for(var W in H)E.ua[W]=H[W]}}})(typeof window=="object"?window:this)},function(r,t){(function(i){r.exports=i}).call(t,{})},function(r,t,i){Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(l){for(var u=1;u<arguments.length;u++){var h=arguments[u];for(var p in h)Object.prototype.hasOwnProperty.call(h,p)&&(l[p]=h[p])}return l},o=i(0),a=o.DEVICE_TYPES,s=o.defaultData,d=t.getNavigatorInstance=function(){return!(typeof window>"u"||!window.navigator&&!navigator)&&(window.navigator||navigator)},c=t.isIOS13Check=function(l){var u=d();return u&&u.platform&&(u.platform.indexOf(l)!==-1||u.platform==="MacIntel"&&u.maxTouchPoints>1&&!window.MSStream)};r.exports={checkType:function(l){switch(l){case a.MOBILE:return{isMobile:!0};case a.TABLET:return{isTablet:!0};case a.SMART_TV:return{isSmartTV:!0};case a.CONSOLE:return{isConsole:!0};case a.WEARABLE:return{isWearable:!0};case a.BROWSER:return{isBrowser:!0};default:return s}},broPayload:function(l,u,h,p,w){return{isBrowser:l,browserMajorVersion:u.major,browserFullVersion:u.version,browserName:u.name,engineName:h.name||!1,engineVersion:h.version,osName:p.name,osVersion:p.version,userAgent:w}},mobilePayload:function(l,u,h,p){return n({},l,{vendor:u.vendor,model:u.model,os:h.name,osVersion:h.version,ua:p})},stvPayload:function(l,u,h,p){return{isSmartTV:l,engineName:u.name,engineVersion:u.version,osName:h.name,osVersion:h.version,userAgent:p}},consolePayload:function(l,u,h,p){return{isConsole:l,engineName:u.name,engineVersion:u.version,osName:h.name,osVersion:h.version,userAgent:p}},wearPayload:function(l,u,h,p){return{isWearable:l,engineName:u.name,engineVersion:u.version,osName:h.name,osVersion:h.version,userAgent:p}},getNavigatorInstance:d,isIOS13Check:c}}])});class ic{constructor(){this.canvas=null,this.gl=null,this.glRenderer=null,this.models=null,this.devices=[["a7","640x1136",["iPhone 5","iPhone 5s"]],["a7","1536x2048",["iPad Air","iPad Mini 2","iPad Mini 3"]],["a8","640x1136",["iPod touch (6th gen)"]],["a8","750x1334",["iPhone 6"]],["a8","1242x2208",["iPhone 6 Plus"]],["a8","1536x2048",["iPad Air 2","iPad Mini 4"]],["a9","640x1136",["iPhone SE"]],["a9","750x1334",["iPhone 6s"]],["a9","1242x2208",["iPhone 6s Plus"]],["a9x","1536x2048",["iPad Pro (1st gen 9.7-inch)"]],["a9x","2048x2732",["iPad Pro (1st gen 12.9-inch)"]],["a10","750x1334",["iPhone 7"]],["a10","1242x2208",["iPhone 7 Plus"]],["a10x","1668x2224",["iPad Pro (2th gen 10.5-inch)"]],["a10x","2048x2732",["iPad Pro (2th gen 12.9-inch)"]],["a11","750x1334",["iPhone 8"]],["a11","1242x2208",["iPhone 8 Plus"]],["a11","1125x2436",["iPhone X"]],["a12","828x1792",["iPhone Xr"]],["a12","1125x2436",["iPhone Xs"]],["a12","1242x2688",["iPhone Xs Max"]],["a12x","1668x2388",["iPad Pro (3rd gen 11-inch)"]],["a12x","2048x2732",["iPad Pro (3rd gen 12.9-inch)"]]]}getCanvas(){return this.canvas==null&&(this.canvas=document.createElement("canvas")),this.canvas}getGl(){return this.gl==null&&(this.gl=this.getCanvas().getContext("experimental-webgl")),this.gl}getResolution(){let r=window.devicePixelRatio||1;return Math.min(screen.width,screen.height)*r+"x"+Math.max(screen.width,screen.height)*r}getGlRenderer(){if(this.glRenderer==null){const r=this.getGl().getExtension("WEBGL_debug_renderer_info");this.glRenderer=r==null?"unknown":this.getGl().getParameter(r.UNMASKED_RENDERER_WEBGL)}return this.glRenderer}getModels(){if(this.models==null){const r=this.getGlRenderer().match(/^apple\s+([_a-z0-9-]+)\s+gpu$/i),t=this.getResolution();if(this.models=["iPhone"],r)for(let i=0;i<this.devices.length;i++){let n=this.devices[i];if(r[1].toLowerCase()==n[0]&&t==n[1]){this.models=n[2];break}}}return this.models[0]}}const Ci="unknown",Ir="qnrtcqosevents",Fe=new class{constructor(){this.base={version:rc,device_id:"",browser_version:"",os:"",host_vendor:"",host_model:"",url:"",stream_name:"",app_name:"",uid:"",type:"sdk-player",session_id:"",jitter_buffer_support:!1,timestamp:Date.now(),request_id:"",userAgent:navigator.userAgent,userIp:"",uuid:""},this.events=[],this.lastSubmitTime=Date.now(),this.submitQueue=new $o("qos_submit"),this.emitterId=""}init(e,r){return U(this,void 0,void 0,function*(){this.emitterId=e,this.base.uid=r,this.submitQueue.off("exec"),this.initSubmitQueue(),this.submitQueue.push("resume").catch(It);try{const t=yield new Promise(i=>{i()}).then(()=>new Promise((i,n)=>{try{Jo.get(o=>{const a=o.sort((s,d)=>s.key.localeCompare(d.key));i(a)})}catch(o){n(o)}})).then(i=>{try{return Ko(JSON.stringify(i))}catch{return Promise.reject(new Error("Failed to generate device ID"))}});this.base.device_id=t}catch(t){t instanceof Error&&O.error(t.message,this.emitterId),this.base.device_id=Ci}this.base.browser_version=`${We.browserName} ${We.browserVersion}`,this.base.os=`${We.osName} ${We.osVersion}`,We.isMobile?(this.base.host_vendor=We.mobileVendor,We.isIOS?this.base.host_model=new ic().getModels():this.base.host_model=We.mobileModel):We.isMacOs?(this.base.host_vendor="Apple",this.base.host_model="Mac"):We.isWindows?(this.base.host_vendor="Microsoft",this.base.host_model="Windows"):(this.base.host_vendor=Ci,this.base.host_model=Ci)})}addUrl(e){this.base.url=e;try{let r=new URL(e).pathname.slice(1).split("/");const t=r.pop(),i=r.pop(),n=t.split(".")[0];this.base.app_name=i??"",this.base.stream_name=n??""}catch{}}addSessionId(e){this.base.session_id=e}addRequestId(e){this.base.request_id=e}addJitterBufferTarget(e){this.base.jitter_buffer_support=e}addEvent(e,r,t){this.submitQueue.push("add",Object.assign(Object.assign({},r),this.base)).catch(It)}submit(e=!1){this.submitQueue.push("submit",e).catch(It)}initSubmitQueue(){this.submitQueue.on("exec",(e,r)=>{switch(e.method){case"submit":return void(r.promise=this._submit(e.data));case"add":return void(r.promise=this._addEvent(e.data));case"resume":return void(r.promise=this._recoverStoredEvents())}})}_recoverStoredEvents(){return U(this,void 0,void 0,function*(){const e=localStorage.getItem(Ir);localStorage.removeItem(Ir),e&&(this.events=JSON.parse(window.atob(decodeURIComponent(e))))})}_addEvent(e){return U(this,void 0,void 0,function*(){return this.events.push(Object.assign(Object.assign({},e),{timestamp:Date.now(),uuid:`${Zr()}-${Date.now()}`})),this.submit(),Promise.resolve()})}loggather(e){return U(this,arguments,void 0,function*(r,t=1){if(!(yield fetch("https://pili-sdk-transport.qnsdk.com/v1/loggather/",{method:"POST",headers:{"Content-Type":"application/json"},body:r})).ok)throw new G("rtcevent error");this.lastSubmitTime=Date.now()})}_submit(){return U(this,arguments,void 0,function*(e=!1){if(!(e||this.submitCheck()))return void this.saveEvents();const r=this.encodeQosSubmitData();try{yield this.loggather(r)}catch(t){t instanceof Error&&(O.error(t.message,this.emitterId),yield this.loggather(r))}finally{this.events=[],localStorage.removeItem(Ir)}})}saveEvents(){const e=encodeURIComponent(window.btoa(JSON.stringify(this.events)));localStorage.setItem(Ir,e)}submitCheck(){return!(!this.base.device_id||!this.base.uid)&&this.events.length>=60}encodeQosSubmitData(){let e="",r=[];for(let t of this.events)t.session_id?(r.forEach((i,n,o)=>{t.request_id===o[n].request_id&&(o[n].session_id=t.session_id),e+=JSON.stringify(o[n])+`
`}),r=[],e+=JSON.stringify(t)+`
`):t.event_name===xe.Error?e+=JSON.stringify(t)+`
`:r.push(t);return e}encodeQosSubmitData2(){let e="";for(let r of this.events)e+=JSON.stringify(r)+`
`;return new Uint8Array(tc.gzip(function(r){const t=[];for(let i=0;i<r.length;i++){let n=r.charCodeAt(i);n<128?t.push(n):n<2048?t.push(192|n>>6,128|63&n):n<55296||n>=57344?t.push(224|n>>12,128|n>>6&63,128|63&n):(i++,n=65536+((1023&n)<<10|1023&r.charCodeAt(i)),t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n))}return new Uint8Array(t)}(e)))}},nc={[Y.PlayerState.STATE_IDLE]:"Idle",[Y.PlayerState.STATE_INIT]:"Initialized",[Y.PlayerState.STATE_READY]:"Ready",[Y.PlayerState.STATE_PLAYING]:"Playing",[Y.PlayerState.STATE_STOP]:"Stopped",[Y.PlayerState.STATE_ERROR]:"Error"},Ya="qn_media_element_reset";function Ja(e,r){e.addEventListener(Ya,r,{once:!0})}function Ka(e){e.dispatchEvent(new Event(Ya))}Y.QNRTPlayer=class extends nr{constructor(){super(),this.playerEmitterId="",this.uid="",this.lagDuration=[],this.isVideoContainer=!1,this.lastTimeupdateTime=0,this.deferred=on(),this.timeupdateCallback=t=>{this.lastTimeupdateTime===0||t.timeStamp-this.lastTimeupdateTime>=450&&(O.debug(`wait duration: ${t.timeStamp-this.lastTimeupdateTime-250} time: ${this.lastTimeupdateTime}`,this.playerEmitterId),this.emit("wait",this.lastTimeupdateTime,t.timeStamp-this.lastTimeupdateTime-250)),this.lastTimeupdateTime=t.timeStamp},this.loadedmetadataHandler=()=>{O.log("media element loadedmetadata.",this.playerEmitterId),this.deferred.resolve(null)};const{emitterId:e,emitter:r}=(()=>{const t=new nr,i=sn();return Hr[i]=t,{emitterId:i,emitter:t}})();this.qnPC=new Yo(e),this.playerEmitterId=e,this.handleEvent(r),this.setState(Y.PlayerState.STATE_IDLE),this.getPlayerSupportPm=new Promise((t,i)=>{Vo().then(n=>{this.playerSupport=n,n.peerConnection||un("RTC not supported!",e),n.H264||un("H264 not supported!",e),t()})})}static setLogLevel(e){O.setLevel(e)}get version(){return xi}init(e){this.uid=e.uid?e.uid.toString():`qn_${Zr()}-${Date.now()}`,Fe.init(this.playerEmitterId,this.uid),this.config=Object.assign(Object.assign({},ro),e)}getUID(){return this.uid}getConfig(){if(!this.config)throw O.error("config is not initialized, try init() first.",this.playerEmitterId),new G("config is not initialized");return this.config}setConfig(e){if(!this.config)throw O.error("config is not initialized, try init() first.",this.playerEmitterId),new G("config is not initilized");if(!this.mediaElement)throw O.error("media is not initialized, try play() first.",this.playerEmitterId),new G("media is not initialized");e.className!==void 0&&(this.config.className=e.className,this.mediaElement.className=this.config.className),e.controls!==void 0&&(this.config.controls=e.controls,this.mediaElement.controls=this.config.controls),e.width!==void 0&&(this.config.width=e.width,this.mediaElement.style.width=this.config.width),e.height!==void 0&&(this.config.height=e.height,this.mediaElement.style.height=this.config.height),e.objectFit!==void 0&&(this.config.objectFit=e.objectFit,this.mediaElement.style.objectFit=this.config.objectFit),e.playsinline!==void 0&&(this.config.playsinline=e.playsinline,this.mediaElement.playsInline=this.config.playsinline,this.mediaElement.setAttribute("webkit-playsinline",String(e.playsinline))),e.volumn!==void 0&&(this.config.volumn=e.volumn,this.mediaElement.volume=this.config.volumn);const{muted:r=!1}=e;this.config.muted=r,this.mediaElement.muted=r}play(e,r){return U(this,void 0,void 0,function*(){const t=this;if(!this.config)throw O.error("config is not initialized, try init() first.",this.playerEmitterId),new G("config is not initialized");if(yield this.getPlayerSupportPm,this.playerSupport&&Fe.addJitterBufferTarget(this.playerSupport.jitterBufferTarget),Fe.addSessionId(""),Fe.addRequestId(`${Zr()}-${Date.now()}`),Fe.addUrl(e.trim()),this.setState(Y.PlayerState.STATE_INIT),this.lastTimeupdateTime=0,Fe.addEvent(xe.Config,{event_name:xe.Config,width:this.config.width,height:this.config.height,object_fit:this.config.objectFit,volumn:this.config.volumn,audio_only:this.config.audioOnly,muted:this.config.muted,jitter_buffer:this.config.jitterBuffer==null?-1:this.config.jitterBuffer}),r instanceof HTMLVideoElement?(this.isVideoContainer=!0,this.mediaElement=r,this.mediaElement.removeEventListener("timeupdate",this.timeupdateCallback)):this.isVideoContainer=!1,!this.isVideoContainer&&this.mediaElement||(this.mediaElement||(this.mediaElement=document.createElement("video")),this.mediaElement.addEventListener("timeupdate",this.timeupdateCallback),Ja(this.mediaElement,()=>{this.mediaElement&&this.mediaElement.removeEventListener("timeupdate",this.timeupdateCallback)}),this.mediaElement.setAttribute("x5-video-player-type","h5"),this.setConfig(this.config)),this.mediaElement.removeEventListener("loadedmetadata",this.loadedmetadataHandler),this.url=yield O.initUpload(e),this.mediaStream=yield this.qnPC.pullStream(this.url,this.config.audioOnly),Fe.addSessionId(this.qnPC.getSessionId()),this.setState(Y.PlayerState.STATE_READY),this.mediaElement.srcObject=this.mediaStream,this.isVideoContainer||(this.mediaElement&&this.container&&this.mediaElement.parentElement&&this.mediaElement.parentElement!==this.container&&this.mediaElement.parentElement.removeChild(this.mediaElement),this.container&&this.container===r||(this.container=r,this.container.appendChild(this.mediaElement))),Uo&&function(){return U(this,arguments,void 0,function*(i=5e3){const n=new Promise(o=>{"WeixinJSBridge"in window?window.WeixinJSBridge.invoke("getNetworkType",{},()=>{o()},!1):document.addEventListener("WeixinJSBridgeReady",()=>{window.WeixinJSBridge.invoke("getNetworkType",{},()=>{o()},!1)},{once:!0})});return Promise.race([n,lr(i,"WeChatAutoplayReady")]).catch(o=>{console.debug(o.message)})})}().then(()=>{this.playerState!=Y.PlayerState.STATE_IDLE&&(O.debug("Try autoplay in WeChat browser.",this.playerEmitterId),this.resume())}),this.deferred=on(),this.mediaElement.addEventListener("loadedmetadata",this.loadedmetadataHandler),Ja(this.mediaElement,()=>{t.mediaElement.removeEventListener("loadedmetadata",this.loadedmetadataHandler)}),yield Promise.race([lr(Mr,"loadedmetadata"),this.deferred.promise]).catch(()=>{O.debug("media element loadedmetadata timeout: 8s.",this.playerEmitterId)}),this.playerState!=Y.PlayerState.STATE_IDLE)return this.resume()})}pause(){if(!this.config)throw O.error("config is not initialized, try init() first.",this.playerEmitterId),new G("config is not initialized");if(!this.mediaElement)throw O.error("media is not initialized, try play() first.",this.playerEmitterId),new G("media is not initialized");this.mediaElement.pause()}resume(){return new Promise((e,r)=>{if(!this.config)throw O.error("config is not initialized, try init() first.",this.playerEmitterId),new G("config is not initialized");if(!this.mediaElement)throw O.error("media is not initialized, try play() first.",this.playerEmitterId),new G("media is not initialized");this.isPlaying()&&e();try{const t=this.mediaElement.play();t?t.then(()=>{this.playerState!==Y.PlayerState.STATE_STOP&&this.setState(Y.PlayerState.STATE_PLAYING),e()}).catch(i=>{if(i.name==="NotAllowedError"){const n=`play fail, ${i.name}, ${i.message}`;O.error(n,this.playerEmitterId),r(new G(n))}else e()}):(this.playerState!==Y.PlayerState.STATE_STOP&&this.setState(Y.PlayerState.STATE_PLAYING),e())}catch(t){const i=t instanceof Error?`play error, ${t.name}, ${t.message}`:String(t);O.error(i,this.playerEmitterId),r(new G(i))}})}hasAudio(){if(!this.config)throw O.error("config is not initialized, try init() first.",this.playerEmitterId),new G("config is not initialized");if(!this.mediaElement)throw O.error("media is not initialized, try play() first.",this.playerEmitterId),new G("media is not initialized");return!!this.mediaStream&&this.mediaStream.getAudioTracks().length>0}hasVideo(){if(!this.config)throw O.error("config is not initialized, try init() first.",this.playerEmitterId),new G("config is not initialized");if(!this.mediaElement)throw O.error("media is not initialized, try play() first.",this.playerEmitterId),new G("media is not initialized");return!!this.mediaStream&&this.mediaStream.getVideoTracks().length>0}setAudioVolume(e){if(!this.config)throw O.error("config is not initialized, try init() first.",this.playerEmitterId),new G("config is not initialized");if(!this.mediaElement)throw O.error("media is not initialized, try play() first.",this.playerEmitterId),new G("media is not initialized");this.mediaElement.volume=e}getAudioVolume(){if(!this.config)throw O.error("config is not initialized, try init() first.",this.playerEmitterId),new G("config is not initialized");if(!this.mediaElement)throw O.error("media is not initialized, try play() first.",this.playerEmitterId),new G("media is not initialized");return this.mediaElement.volume}muteAudio(){if(!this.config)throw O.error("config is not initialized, try init() first.",this.playerEmitterId),new G("config is not initialized");if(!this.mediaElement)throw O.error("media is not initialized, try play() first.",this.playerEmitterId),new G("media is not initialized");this.mediaElement.muted=!0}unmuteAudio(){if(!this.config)throw O.error("config is not initialized, try init() first.",this.playerEmitterId),new G("config is not initialized");if(!this.mediaElement)throw O.error("media is not initialized, try play() first.",this.playerEmitterId),new G("media is not initialized");this.mediaElement.muted=!1}muteVideo(){var e;if(!this.config)throw O.error("config is not initialized, try init() first.",this.playerEmitterId),new G("config is not initialized");if(!this.mediaElement)throw O.error("media is not initialized, try play() first.",this.playerEmitterId),new G("media is not initialized");const r=(e=this.mediaStream)===null||e===void 0?void 0:e.getAudioTracks();r&&r.length>0?this.mediaElement.srcObject=new MediaStream(r):this.mediaElement.srcObject=null,this.resume()}unmuteVideo(){if(!this.config)throw O.error("config is not initialized, try init() first.",this.playerEmitterId),new G("config is not initialized");if(!this.mediaElement)throw O.error("media is not initialized, try play() first.",this.playerEmitterId),new G("media is not initialized");if(!this.mediaStream)throw O.error("mediaStream is empty",this.playerEmitterId),new G("mediaStream is empty");this.mediaElement.srcObject=this.mediaStream,this.resume()}isPlaying(){return!!this.mediaElement&&!this.mediaElement.paused}stop(){if(!this.config)throw O.error("config is not initialized, try init() first.",this.playerEmitterId),new G("config is not initialized");if(!this.mediaElement)throw O.error("media is not initialized, try play() first.",this.playerEmitterId),new G("media is not initialized");this._stop()}release(){if(!this.config)throw O.error("config is not initialized, try init() first.",this.playerEmitterId),new G("config is not initialized");this.setState(Y.PlayerState.STATE_IDLE),this.config=void 0,this.mediaElement&&Ka(this.mediaElement),this.mediaElement&&this.mediaElement.parentElement&&!this.isVideoContainer&&this.mediaElement.parentElement.removeChild(this.mediaElement),this.qnPC.release(),this.url=void 0,this.mediaElement=void 0,this.isVideoContainer=!1,this.container=void 0,this.mediaStream=void 0}getPlayerSupport(){return U(this,void 0,void 0,function*(){return yield this.getPlayerSupportPm,this.playerSupport})}getBrowserReport(){return ra}setState(e){this.playerState!==e&&(this.playerState=e,O.log(`player state changed: ${e} ${nc[e]}`,this.playerEmitterId),((r,t)=>{Dt("playerStateChanged",r,t)})(e,this.playerEmitterId))}handleEvent(e){e.on("log",r=>{this.emit("log",r)}),e.on("stats",r=>{let t=-1,i=-1,n=1e3*r.videoTotalFreezesDuration.reduce((s,d)=>s+d,0);"RTCRtpScriptTransform"in window||"MediaStreamTrackGenerator"in window?(t=this.lagDuration.reduce((s,d)=>s+d,0),i=this.lagDuration.length):n!=-4&&(i=r.videoTotalFreezesDuration.filter(s=>s>0).length),this.lagDuration=[];let o="";if(r.ip)o=r.ip;else{const s=this.qnPC.getIps();s&&(a=s).every(d=>d===a[0])&&(o=s[0])}var a;Fe.addEvent(xe.VideoStatistics,{ip:o,trans_protocol:r.protocol,event_name:xe.VideoStatistics,decoder_name:r.videoDecoderName,rtt:Z(r.rtt),bps:Z(r.videoBitrate),width:Z(r.videoFrameWidth),fps:Z(r.videoFps),height:Z(r.videoFrameHeight),avg_packet_processing_delay:Z(r.videoAvgPacketProcessingDelay),avg_jitter_buffer_delay:Z(r.videoAvgJitterBufferDelay),avg_jitter_buffer_Target_delay:Z(r.videoAvgJitterBufferTargetDelay),packet_lost_rate:Z(r.videoPacketLostRate),nack_count:Z(r.videoNackCount),pli_count:Z(r.videoPliCount),fir_count:Z(r.videoFirCount),frame_decoded:Z(r.videoFrameDecoded),frame_received:Z(r.videoFrameReceived),decode_cost_ms:Z(r.videoDecodeCostMs),key_frames_decoded:Z(r.videoKeyFramesDecoded),dropped_frames:Z(r.videoDroppedFrames),packets_received:Z(r.videoPacketReceived),bytes_received:Z(r.videoBytesReceived),total_freezes_duration:Z(n),fec_pkts_received:Z(r.videoFecPacketReceived),avg_interframe_delay:Z(r.videoAvgInterframeDelay),estimatedPlayoutTimestamp:Z(r.videoEstimatedPlayoutTimestamp),lastPacketReceivedTimestamp:Z(r.videoLastPacketReceivedTimestamp),lag_count:Z(i),lag_duration:Z(t),const_time:Z(r.constTime),frame_decoded_list:JSON.stringify(r.videoFrameDecodedList)}),Fe.addEvent(xe.AudioStatistics,{ip:o,trans_protocol:r.protocol,event_name:xe.AudioStatistics,decoder_name:r.audioDecoderName,bps:Z(r.audioBitrate),rtt:Z(r.rtt),avg_packet_processing_delay:Z(r.audioAvgPacketProcessingDelay),avg_jitter_buffer_delay:Z(r.audioAvgJitterBufferDelay),avg_jitter_buffer_Target_delay:Z(r.audioAvgJitterBufferTargetDelay),packet_lost_rate:Z(r.audioPacketLostRate),total_samples_received:Z(r.audioTotalSamplesReceived),packets_discarded:Z(r.audioPacketDiscarded),packets_lost:Z(r.audioPacketLost),packets_received:Z(r.audioPacketReceived),bytes_received:Z(r.audioBytesReceived),avg_interframe_delay:Z(r.audioAvgInterframeDelay),fps:Z(r.audioFps),estimatedPlayoutTimestamp:Z(r.audioEstimatedPlayoutTimestamp),lastPacketReceivedTimestamp:Z(r.audioLastPacketReceivedTimestamp),const_time:Z(r.constTime)}),this.emit("stats",{audioBitrate:r.audioBitrate,videoBitrate:r.videoBitrate,frameWidth:r.videoFrameWidth,frameHeight:r.videoFrameHeight,frameRate:r.videoFps})}),e.on("error",r=>{Fe.addEvent(xe.Error,{event_name:xe.Error,error_code:r.code,error_info:r.errorType,error_detail:r.msg}),this.setState(Y.PlayerState.STATE_ERROR),this._stop(),this.emit("error",r)}),e.on("freezeing",r=>{this.lagDuration.push(r)}),e.on("playerStateChanged",r=>{let t=Ye.init;switch(r){case Y.PlayerState.STATE_IDLE:t=Ye.idle;break;case Y.PlayerState.STATE_INIT:t=Ye.init;break;case Y.PlayerState.STATE_READY:t=Ye.ready;break;case Y.PlayerState.STATE_PLAYING:t=Ye.playing;break;case Y.PlayerState.STATE_STOP:t=Ye.stop;break;case Y.PlayerState.STATE_ERROR:t=Ye.error}Fe.addEvent(xe.PlayerStateChanged,{event_name:xe.PlayerStateChanged,state:t}),this.emit("playerStateChanged",r)})}_stop(){this.mediaElement&&Ka(this.mediaElement),this.qnPC.release(),this.url=void 0,this.setState(Y.PlayerState.STATE_STOP)}}}(Ri)),Ri}var Ec=Cc();function xc(Y){let Ee=new Date().getTime()+""+Math.floor(Math.random()*900+100);return Ee.substring(Ee.length-Y)}function Pc(Y,Ee="YYYY-MM-DD HH:mm:ss"){return Y?kc(Y).format(Ee):"-"}async function Ac(Y,Ee){if(!Y||!Ee)return"";const Se=Sc().state.tkToken;let He=`https://api.tianditu.gov.cn/geocoder?postStr={'lon':${Y},'lat':${Ee},'ver':1}&type=geocode&tk=${Se}`;return await Tc({url:He,method:"get"})}function Ic({webrtc:Y,el:Ee},U,Se){console.log("webrtc======",Y);const He=new Ec.QNRTPlayer;He.init({controls:!0,playsinline:!1}),setTimeout(function(){He.play(Y,document.getElementById(Ee)),He.on("error",mt=>{console.log("æ’­æ”¾å‡ºé”™",mt),Se(mt)}),U(He)},1e3)}export{Pc as f,xc as g,Ac as l,Ic as p};
