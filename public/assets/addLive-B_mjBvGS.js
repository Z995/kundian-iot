import{K as S}from"./index-BYOTr1Yd.js";import{a as M,f as U}from"./kdLive-CKaDh8Mo.js";import{i as N,r as k,j as $,d as n,c,o as i,b as e,w as o,a as p,e as _,f as g,M as x,g as D,m as R,p as y,u as w}from"./index-whL21Ijk.js";import"./TianDiMap-BTIHgNCG.js";const B={key:0,class:"w600"},H={__name:"CqkdGeneralLive",props:{id:{type:[Number,String],default:0}},setup(V){const t=V,s=N(),l=k({show:!1,loading:!1,saving:!1,form:{type:"local",name:"",desc:"",state:"",rtmp:"",hls:"",flv:"",webrtc:"",longitude:"",latitude:""}});$(async()=>{if(t.id){l.loading=!0;let a=await M({id:t.id});l.loading=!1,a.data&&(l.form={id:a.data.id,type:"local",name:a.data.name,desc:a.data.desc,state:a.data.state,rtmp:a.data.rtmp,hls:a.data.hls,flv:a.data.flv,webrtc:a.data.webrtc,longitude:a.data.longitude,latitude:a.data.latitude},a.data.longitude&&a.data.latitude&&(l.location=[a.data.longitude,a.data.latitude]))}});async function m(){if(await s.value.validate())return!1;let d=JSON.parse(JSON.stringify(l.form)),u=await U(d);if(u.code===200){x.success("保存成功"),setTimeout(function(){D.go(-1)},1e3);return}x.error(u.msg)}function r(a){l.form.longitude=a.location[0],l.form.latitude=a.location[1]}return(a,d)=>{const u=n("a-input"),f=n("a-form-item"),C=n("a-textarea"),q=n("a-button"),L=n("a-form"),b=n("a-spin");return i(),c("div",null,[e(b,{loading:l.saving,tip:"数据保存中...",style:{width:"100%"}},{default:o(()=>[e(L,{ref_key:"formRef",ref:s,model:l.form,"label-col-props":{flex:"150px"},"wrapper-col-props":{flex:1}},{default:o(()=>[e(f,{label:"监控名称",field:"name",rules:[{required:!0,message:"监控名称必填"}]},{default:o(()=>[e(u,{modelValue:l.form.name,"onUpdate:modelValue":d[0]||(d[0]=v=>l.form.name=v),placeholder:"请输入监控名称",class:"w600"},null,8,["modelValue"])]),_:1}),e(f,{label:"m3u8地址"},{default:o(()=>[p("div",null,[e(u,{modelValue:l.form.hls,"onUpdate:modelValue":d[1]||(d[1]=v=>l.form.hls=v),placeholder:"请输入m3u8直播流地址",class:"w600"},null,8,["modelValue"]),d[4]||(d[4]=p("div",{class:"tips mt10"},"m3u8播放源编码支持H.264格式",-1))])]),_:1}),e(f,{label:"flv地址"},{default:o(()=>[p("div",null,[e(u,{modelValue:l.form.flv,"onUpdate:modelValue":d[2]||(d[2]=v=>l.form.flv=v),placeholder:"请输入flv直播流地址",class:"w600"},null,8,["modelValue"]),d[5]||(d[5]=p("div",{class:"tips"},"m3u8播放源编码支持H.264，H.265格式",-1))])]),_:1}),e(f,{label:"监控位置"},{default:o(()=>[l.loading?_("",!0):(i(),c("div",B,[e(S,{lngLat:l.location,onSuccess:r},null,8,["lngLat"])]))]),_:1}),e(f,{label:"监控备注"},{default:o(()=>[e(C,{modelValue:l.form.desc,"onUpdate:modelValue":d[3]||(d[3]=v=>l.form.desc=v),placeholder:"请输入监控备注",class:"w600",style:{height:"120px"}},null,8,["modelValue"])]),_:1}),e(f,null,{default:o(()=>[e(q,{type:"primary",class:"w120",onClick:m,loading:l.saving},{default:o(()=>d[6]||(d[6]=[g("保存")])),_:1,__:[6]},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1},8,["loading"])])}}},J={class:"w600"},O={class:"w600"},K={key:0,class:"w600"},T={__name:"CqkdHaiKang",setup(V){const t=k({loading:!1,form:{name:"",deviceSerial:"",validateCode:"",address:""}});return(s,l)=>{const m=n("a-input"),r=n("a-form-item"),a=n("a-button"),d=n("a-form");return i(),c("div",null,[e(d,{model:t.form,ref:"formRef","label-col-props":{flex:"150px"},"wrapper-col-props":{flex:1}},{default:o(()=>[e(r,{label:"设备名称",field:"name",rules:[{required:!0,message:"展示名称必填"}]},{default:o(()=>[e(m,{modelValue:t.form.name,"onUpdate:modelValue":l[0]||(l[0]=u=>t.form.name=u),class:"w600",placeholder:"请输入设备展示名称"},null,8,["modelValue"])]),_:1}),e(r,{label:"设备序列号",field:"deviceSerial",rules:[{required:!0,message:"设备序列号必填"}]},{default:o(()=>[p("div",J,[e(m,{modelValue:t.form.deviceSerial,"onUpdate:modelValue":l[1]||(l[1]=u=>t.form.deviceSerial=u),placeholder:"请输入设备序列号"},null,8,["modelValue"]),l[3]||(l[3]=p("div",{class:"tips mt10"},"存在英文字母的设备序列号，字母需为大写",-1))])]),_:1}),e(r,{label:"设备验证码",field:"validateCode",rules:[{required:!0,message:"设备验证码必填"}]},{default:o(()=>[p("div",O,[e(m,{modelValue:t.form.validateCode,"onUpdate:modelValue":l[2]||(l[2]=u=>t.form.validateCode=u),placeholder:"请输入设备验证码"},null,8,["modelValue"]),l[4]||(l[4]=p("div",{class:"tips mt10"},"设备机身上的六位大写字母",-1))])]),_:1}),e(r,{label:"监控位置"},{default:o(()=>[t.loading?_("",!0):(i(),c("div",K,[e(S,{address:t.form.address,lngLat:t.location,onSuccess:s.getMapData},null,8,["address","lngLat","onSuccess"])]))]),_:1}),e(r,null,{default:o(()=>[e(a,{type:"primary",class:"w120"},{default:o(()=>l[5]||(l[5]=[g("保存")])),_:1,__:[5]})]),_:1})]),_:1},8,["model"])])}}},j={key:0,class:"w600"},E={__name:"CqkdQiniu",setup(V){const t=N(),s=k({loading:!1,form:{type:"kun_dian",device_type:1,desc:"",longitude:"",latitude:""},location:[]});function l(r){s.form.longitude=r.location[0],s.form.latitude=r.location[1]}async function m(){if(await t.value.validate())return!1;let a=JSON.parse(JSON.stringify(s.form)),d=await U(a);if(d.code===200){x.success("保存成功"),setTimeout(function(){D.go(-1)},1e3);return}x.error(d.msg)}return(r,a)=>{const d=n("a-radio"),u=n("a-radio-group"),f=n("a-form-item"),C=n("a-input"),q=n("a-button"),L=n("a-form");return i(),c("div",null,[e(L,{model:s.form,ref_key:"formRef",ref:t,"label-col-props":{flex:"150px"},"wrapper-col-props":{flex:1}},{default:o(()=>[e(f,{label:"设备类型"},{default:o(()=>[e(u,{modelValue:s.form.device_type,"onUpdate:modelValue":a[0]||(a[0]=b=>s.form.device_type=b)},{default:o(()=>[e(d,{value:1},{default:o(()=>a[2]||(a[2]=[g("摄像头")])),_:1,__:[2]}),e(d,{value:2},{default:o(()=>a[3]||(a[3]=[g("平台（监控录像机/NVR）")])),_:1,__:[3]})]),_:1},8,["modelValue"])]),_:1}),e(f,{label:"设备名称",field:"desc",rules:[{required:!0,message:"设备名称必填"}]},{default:o(()=>[e(C,{modelValue:s.form.desc,"onUpdate:modelValue":a[1]||(a[1]=b=>s.form.desc=b),class:"w600",placeholder:"请输入设备名称"},null,8,["modelValue"])]),_:1}),e(f,{label:"设备位置"},{default:o(()=>[s.loading?_("",!0):(i(),c("div",j,[e(S,{lngLat:s.location,onSuccess:l},null,8,["lngLat"])]))]),_:1}),e(f,null,{default:o(()=>[e(q,{type:"primary",class:"w120",onClick:m},{default:o(()=>a[4]||(a[4]=[g("保存")])),_:1,__:[4]})]),_:1})]),_:1},8,["model"])])}}},G={class:"w600"},I={key:0,class:"w600"},Q={__name:"CqkdImou",setup(V){const t=k({loading:!1,form:{name:"",deviceSerial:"",validateCode:"",address:""}});return(s,l)=>{const m=n("a-input"),r=n("a-form-item"),a=n("a-button"),d=n("a-form");return i(),c("div",null,[e(d,{model:t.form,ref:"formRef","label-col-props":{flex:"150px"},"wrapper-col-props":{flex:1}},{default:o(()=>[e(r,{label:"设备名称",field:"name",rules:[{required:!0,message:"展示名称必填"}]},{default:o(()=>[e(m,{modelValue:t.form.name,"onUpdate:modelValue":l[0]||(l[0]=u=>t.form.name=u),class:"w600",placeholder:"请输入设备展示名称"},null,8,["modelValue"])]),_:1}),e(r,{label:"设备序列号",field:"deviceSerial",rules:[{required:!0,message:"设备序列号必填"}]},{default:o(()=>[e(m,{modelValue:t.form.deviceSerial,"onUpdate:modelValue":l[1]||(l[1]=u=>t.form.deviceSerial=u),class:"w600",placeholder:"请输入设备序列号"},null,8,["modelValue"])]),_:1}),e(r,{label:"设备验证码",field:"validateCode",rules:[{required:!0,message:"设备验证码必填"}]},{default:o(()=>[p("div",G,[e(m,{modelValue:t.form.validateCode,"onUpdate:modelValue":l[2]||(l[2]=u=>t.form.validateCode=u),placeholder:"请输入设备验证码"},null,8,["modelValue"]),l[3]||(l[3]=p("div",{class:"tips mt10"},"传设备底部标签中（或二维码中）8位数字的安全码,如果修改了设备密码，则传修改后的设备密码",-1))])]),_:1}),e(r,{label:"监控位置"},{default:o(()=>[t.loading?_("",!0):(i(),c("div",I,[e(S,{address:t.form.address,lngLat:t.location,onSuccess:s.getMapData},null,8,["address","lngLat","onSuccess"])]))]),_:1}),e(r,null,{default:o(()=>[e(a,{type:"primary",class:"w120"},{default:o(()=>l[4]||(l[4]=[g("保存")])),_:1,__:[4]})]),_:1})]),_:1},8,["model"])])}}},z={class:"kd-content"},X={__name:"addLive",setup(V){const t=R().query,s=k({title:"新增监控"});return $(()=>{s.title=t.id?"编辑监控":"新增监控"}),(l,m)=>{const r=n("kd-back"),a=n("kd-page-box");return i(),y(a,null,{default:o(()=>[p("div",z,[e(r,{title:s.title},null,8,["title"]),w(t).type==="local"?(i(),y(H,{key:0,id:w(t).id},null,8,["id"])):_("",!0),w(t).type==="3"?(i(),y(T,{key:1})):_("",!0),w(t).type==="kun_dian"?(i(),y(E,{key:2})):_("",!0),w(t).type==="6"?(i(),y(Q,{key:3})):_("",!0)])]),_:1})}}};export{X as default};
