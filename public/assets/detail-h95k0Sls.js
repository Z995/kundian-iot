import{C as N}from"./CqkdAddGateway-npMI9Mq5.js";import{u as X}from"./TianDiMap-CZQsJKr7.js";import{_ as y,v as U,r as x,j as b,d as r,c as d,o as i,a as t,b as o,w as n,f,e as Q,l as k,t as m,F as h,k as Y,y as Z,z as G,q as O,M as F,x as W}from"./index-B09Km9Qy.js";import{b as V}from"./kdGateway-7ZUwpcTm.js";import"./CqkdSelectLabel-CzbhJYh6.js";import"./index-Cux7RQI6.js";const j="/static/img/device/gateway-model.png",q={class:"gateway-info"},P={class:"f15 fb flex-cb"},z={class:"gi-content flex mt10"},T={class:"gi-left flex"},H={class:"gi-info"},J={class:"name mb10"},K={class:"f14 fb"},$={class:"desc mt10 f12"},tt={class:"other-li flex-c fw"},At={class:"other-li flex-c fw"},st={key:0},et={key:1},ot={key:2},it={class:"other-li flex-c fw"},at={key:0},nt={key:1},lt={key:2},dt={key:3},ct={key:4},rt={class:"other-li flex-c fw"},gt={key:0,class:"other-li flex-c fw"},Qt={class:"tag-box flex"},ft={__name:"CqkdGatewayDetail",props:{info:{type:Object,default:null}},emits:["refresh"],setup(I,{emit:C}){const{initMap:a,setMapCenter:g,addMarker:l}=X(),_=C,e=I,s=U();x({}),b(()=>{a({el:"mapBox"},()=>{let{longitude:p,latitude:A}=e.info;!p||!A?g(106.5571,29.66746):(g(p,A),l(p,A,{draggable:!1}))})});const u=()=>s.value.show(e.info.id),E=()=>_("refresh");return(p,A)=>{var D;const B=r("a-button"),c=r("icon-down"),v=r("a-doption"),L=r("a-dropdown"),M=r("a-space"),w=r("a-tag");return i(),d("div",q,[t("div",P,[A[5]||(A[5]=t("span",null,"网关信息",-1)),o(M,null,{default:n(()=>[o(B,{type:"primary"},{default:n(()=>A[1]||(A[1]=[f("重启网关")])),_:1,__:[1]}),o(L,null,{content:n(()=>[o(v,null,{default:n(()=>[t("span",{onClick:A[0]||(A[0]=S=>u())},"编辑网关")]),_:1}),o(v,null,{default:n(()=>A[3]||(A[3]=[f("删除网关")])),_:1,__:[3]}),o(v,null,{default:n(()=>A[4]||(A[4]=[f("在离线记录")])),_:1,__:[4]})]),default:n(()=>[o(B,{type:"primary"},{default:n(()=>[A[2]||(A[2]=f("更多")),o(c,{class:"ml5"})]),_:1,__:[2]})]),_:1})]),_:1})]),t("div",z,[t("div",T,[A[13]||(A[13]=t("div",{class:"gi-img"},[t("img",{src:j,alt:"",class:"gateway1-icon"})],-1)),t("div",H,[t("div",J,[t("div",K,[t("span",null,m(e.info.name),1),e.info.online===1?(i(),k(w,{key:0,color:"#00CC66",size:"mini",class:"ml10"},{default:n(()=>A[6]||(A[6]=[f("在线")])),_:1,__:[6]})):(i(),k(w,{key:1,color:"#999",size:"mini",class:"ml10"},{default:n(()=>A[7]||(A[7]=[f("离线")])),_:1,__:[7]}))]),t("div",$,m(e.info.mac),1)]),t("div",tt,[A[8]||(A[8]=t("div",{class:"li-title"},"网关型号：",-1)),t("span",null,m(((D=e.info.marque)==null?void 0:D.name)||"-"),1)]),t("div",At,[A[9]||(A[9]=t("div",{class:"li-title"},"协议类型：",-1)),e.info.type===0?(i(),d("span",st,"TCP协议")):Q("",!0),e.info.type===1?(i(),d("span",et,"websocket")):Q("",!0),e.info.type===2?(i(),d("span",ot,"MQTT")):Q("",!0)]),t("div",it,[A[10]||(A[10]=t("div",{class:"li-title"},"网络类型：",-1)),e.info.network===1?(i(),d("span",at,"2g/3g/4g/5g")):Q("",!0),e.info.network===2?(i(),d("span",nt,"wifi")):Q("",!0),e.info.network===3?(i(),d("span",lt,"NB-loT")):Q("",!0),e.info.network===4?(i(),d("span",dt,"以太网")):Q("",!0),e.info.network===5?(i(),d("span",ct,"其他")):Q("",!0)]),t("div",rt,[A[11]||(A[11]=t("div",{class:"li-title"},"网关地址：",-1)),t("span",null,m(e.info.address),1)]),e.info.label?(i(),d("div",gt,[A[12]||(A[12]=t("div",{class:"li-title"},"网关标签：",-1)),t("div",Qt,[(i(!0),d(h,null,Y(e.info.label,(S,R)=>(i(),k(w,{color:"blue",key:R},{default:n(()=>[f(m(S.name),1)]),_:2},1024))),128))])])):Q("",!0)])]),A[14]||(A[14]=t("div",{class:"gi-map"},[t("div",{class:"map-box",id:"mapBox"})],-1))]),o(N,{ref_key:"addRef",ref:s,onSuccess:E},null,512)])}}},mt=y(ft,[["__scopeId","data-v-2ad40d3f"]]),Ct={class:"access-info"},_t={class:"access-info-content mt10"},ut={class:"aic-box flex"},pt={class:"aic-item flex-c"},Et={class:"aic-item-val"},It={class:"copy-btn ml20 f12"},vt={class:"aic-box flex"},Bt={class:"aic-item flex-c"},kt={class:"aic-item-val"},wt={class:"copy-btn ml20 f12"},ht={__name:"CqkdGatewayAccessInfo",props:{info:{type:Object,default:null}},emits:["refresh"],setup(I,{emit:C}){const a=I;return(g,l)=>{const _=r("icon-copy"),e=r("kd-copy");return i(),d("div",Ct,[l[5]||(l[5]=t("div",{class:"f15 fb"},"接入信息",-1)),t("div",_t,[t("div",ut,[t("div",pt,[l[2]||(l[2]=t("div",{class:"aic-item-label"},"接入地址：",-1)),t("div",Et,[l[1]||(l[1]=t("span",null,"-",-1)),t("span",It,[o(_),l[0]||(l[0]=f("点击复制"))])])]),l[3]||(l[3]=t("div",{class:"aic-item flex-c"},[t("div",{class:"aic-item-label"},"端 口 号："),t("div",{class:"aic-item-val"},[t("span",null,"-")])],-1))]),t("div",vt,[t("div",Bt,[l[4]||(l[4]=t("div",{class:"aic-item-label"},"注 册 包：",-1)),t("div",kt,[t("span",null,m(a.info.mac),1),t("span",wt,[o(e,{value:a.info.mac},null,8,["value"])])])])])])])}}},yt=y(ht,[["__scopeId","data-v-49f452ba"]]),xt="data:image/png;base64,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",bt="/assets/avatar-C8zt1v5w.png",Dt={class:"debug-box"},St={class:"dialogue-box mt10"},Yt={class:"dialogue-content",id:"dialogBox"},Lt={key:0,class:"dialog-device"},Mt={class:"dialog-item flex"},Rt={class:"dialog-item-right"},Nt={class:"user-info flex-c"},Xt={class:"code"},Ut={class:"time"},Zt={class:"dialog-item-content"},Gt={key:1,class:"dialog-device dialog-user"},Ot={class:"dialog-item flex"},Ft={class:"dialog-item-right"},Wt={class:"user-info flex-c"},Vt={class:"time"},jt={class:"code"},qt={class:"dialog-item-content"},Pt={class:"input-box mt10"},zt={class:"input-area"},Tt={class:"dialogue-footer"},Ht={class:"flex mt10"},Jt={__name:"CqkdNetworkDebug",props:{deviceCode:{type:[String,Number],default:""}},setup(I){const C=Z(),a=I,g=x({form:{type:"0",eol:!1,message:""}});G(()=>C.state.dialogList,()=>{l()},{deep:!0}),b(()=>{C.state.dialogList=[],C.connect(null,a.deviceCode),l()});function l(){requestAnimationFrame(()=>{dialogBox.scrollTop=dialogBox.scrollHeight})}function _(){let{type:e,eol:s,message:u}=g.form;if(!u)return F.warning("请输入发送内容"),!1;let E={to:a.code,type:e,eol:s?1:0,val:u.replace(/\s+/g,""),to:a.deviceCode};C.sendDebugMsg(E),g.form.message=""}return(e,s)=>{const u=r("a-textarea"),E=r("a-button"),p=r("a-radio"),A=r("a-radio-group"),B=r("a-checkbox");return i(),d("div",Dt,[t("div",St,[t("div",Yt,[(i(!0),d(h,null,Y(O(C).state.dialogList,(c,v)=>(i(),d(h,{key:v},[c.type==="device"?(i(),d("div",Lt,[t("div",Mt,[s[3]||(s[3]=t("img",{src:xt,class:"avatar"},null,-1)),t("div",Rt,[t("div",Nt,[t("span",Xt,m(c.code),1),t("span",Ut,m(c.time),1)]),t("div",Zt,m(c.message),1)])])])):Q("",!0),c.type==="user"?(i(),d("div",Gt,[t("div",Ot,[t("div",Ft,[t("div",Wt,[t("span",Vt,m(c.time),1),t("span",jt,m(c.code),1)]),t("div",qt,m(c.message),1)]),s[4]||(s[4]=t("img",{src:bt,class:"avatar"},null,-1))])])):Q("",!0)],64))),128))])]),t("div",Pt,[t("div",zt,[o(u,{modelValue:g.form.message,"onUpdate:modelValue":s[0]||(s[0]=c=>g.form.message=c),placeholder:"请输入",style:{height:"100px"}},null,8,["modelValue"])]),t("div",Tt,[o(E,{type:"primary",class:"w100",onClick:_},{default:n(()=>s[5]||(s[5]=[f("发送")])),_:1,__:[5]})])]),t("div",Ht,[o(A,{modelValue:g.form.type,"onUpdate:modelValue":s[1]||(s[1]=c=>g.form.type=c)},{default:n(()=>[o(p,{value:"0"},{default:n(()=>s[6]||(s[6]=[f("ASCII")])),_:1,__:[6]}),o(p,{value:"1"},{default:n(()=>s[7]||(s[7]=[f("HEX")])),_:1,__:[7]}),o(p,{value:"2"},{default:n(()=>s[8]||(s[8]=[f("GB2312")])),_:1,__:[8]})]),_:1},8,["modelValue"]),o(B,{modelValue:g.form.eol,"onUpdate:modelValue":s[2]||(s[2]=c=>g.form.eol=c)},{default:n(()=>s[9]||(s[9]=[f("末尾加换行")])),_:1,__:[9]},8,["modelValue"])])])}}},Kt=y(Jt,[["__scopeId","data-v-6787d663"]]),$t={class:"kd-content"},tA={key:0},AA={key:0},lA={__name:"detail",setup(I){const C=W().query,a=x({loading:!1,active:"net",info:null});b(()=>{g()});function g(){a.loading=!0,V({id:C.id}).then(l=>{a.loading=!1,a.info=l.data}).catch(()=>{a.loading=!1})}return(l,_)=>{const e=r("a-tab-pane"),s=r("a-tabs"),u=r("kd-page-box");return i(),k(u,{loading:a.loading},{default:n(()=>[t("div",$t,[o(s,{"active-key":a.active,"onUpdate:activeKey":_[0]||(_[0]=E=>a.active=E)},{default:n(()=>[o(e,{key:"detail",title:"网关详情"},{default:n(()=>[a.info?(i(),d("div",tA,[o(mt,{info:a.info,onRefresh:g},null,8,["info"]),o(yt,{info:a.info},null,8,["info"])])):Q("",!0)]),_:1}),o(e,{key:"net",title:"网络调试"},{default:n(()=>[a.info?(i(),d("div",AA,[o(Kt,{deviceCode:a.info.code},null,8,["deviceCode"])])):Q("",!0)]),_:1})]),_:1},8,["active-key"])])]),_:1},8,["loading"])}}};export{lA as default};
